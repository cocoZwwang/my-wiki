{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to My Wiki","title":"\u7b80\u4ecb"},{"location":"#welcome-to-my-wiki","text":"","title":"Welcome to My Wiki"},{"location":"algorithm/base/","text":"#\u57fa\u7840\u7b97\u6cd5 \u4e24\u6570\u4e4b\u548c \u4e09\u6570\u4e4b\u548c \u5939\u903c\u6cd5\u662f\u4e00\u4e2a\u4e00\u8fb9\u6392\u9664\u4e00\u8fb9\u5339\u914d\u7684\u7b97\u6cd5\u3002","title":"\u57fa\u7840\u7b97\u6cd5"},{"location":"algorithm/base/#_1","text":"","title":"#\u57fa\u7840\u7b97\u6cd5"},{"location":"algorithm/base/#_2","text":"","title":"\u4e24\u6570\u4e4b\u548c"},{"location":"algorithm/base/#_3","text":"\u5939\u903c\u6cd5\u662f\u4e00\u4e2a\u4e00\u8fb9\u6392\u9664\u4e00\u8fb9\u5339\u914d\u7684\u7b97\u6cd5\u3002","title":"\u4e09\u6570\u4e4b\u548c"},{"location":"algorithm/dp/","text":"\u52a8\u6001\u89c4\u5212 \u80cc\u5305\u95ee\u9898 01 \u80cc\u5305\u95ee\u9898 01 \u80cc\u5305\u672c\u8eab\u662f\u4e00\u4e2a\u5b50\u96c6\u95ee\u9898\uff0c\u6709 n \u4e2a\u7269\u54c1\uff0c\u6bcf\u4e2a\u7269\u54c1\u90fd\u53ef\u4ee5\u9009\u62e9\u6216\u8005\u4e0d\u9009\u62e9\uff0c\u90a3\u8fd9\u662f\u4e00\u9897\u6df1\u5ea6\u4e3a n \u7684\u4e8c\u53c9\u6811\uff0c\u8fd9\u662f\u80cc\u5305\u95ee\u9898\u7684\u66b4\u529b\u89e3\u6cd5\uff0c\u7a77\u4e3e\u6bcf\u4e00\u79cd\u7ec4\u5408\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a o(2^n)\u3002 \u8981\u6ce8\u610f\u80cc\u5305\u95ee\u9898\u7684\u7279\u70b9\uff1a \u4e00\u822c\u80cc\u5305\u95ee\u9898\u90fd\u662f\u53ea\u6709\u4e00\u4e2a\u7ef4\u5ea6\u7684\u9650\u5236\uff0c\u8fd9\u91cc\u662f\u80cc\u5305\u7684\u91cd\u91cf W\u3002 \u4e00\u822c\u53ea\u6c42\u4e00\u4e2a\u503c\uff0c\u8fd9\u91cc\u662f\u4ef7\u503c V\u3002 for(int i=0;i<n;++i){ for(int j=w[i];j<=W;++j){ dp[i][j]=max(dp[i][j],dp[i-1][j-w[i]]+v[i]); } } //\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316 for(int i=0;i<n;++i){ for(int j=W;j>=w[i];--j){//\u5012\u5e8f\u662f\u56e0\u4e3a\u907f\u514d\u8986\u76d6 dp[i-1][j] dp[j]=max(dp[j],dp[j-w[i]]+v[i]); } } \u65f6\u95f4\u590d\u6742\u5ea6 O(NW)\u3002 \u5b8c\u5168\u80cc\u5305 \u5b8c\u5168\u80cc\u5305\u53ef\u4ee5\u770b\u4f5c\u6210 01 \u80cc\u5305\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u540c\u79cd\u7c7b\u578b\u7684\u6ca1\u610f\u89c1\u7269\u54c1\u770b\u4f5c\u5355\u72ec\u4e00\u4e2a\u7269\u54c1\uff0c\u8fd9\u5c31\u662f\u4e00\u4e2a 01 \u80cc\u5305\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=W,++j){ for(int k=0;k*w[i]<=j;++k){ dp[i][j]=max(dp[i][j],dp[i][j-k*w[i]]+k*v[i]); } } } //\u8fd9\u6837\u4f1a\u5b58\u5728\u91cd\u590d\u7684\u8ba1\u7b97\uff0c\u6bd4\u5982 dp[i][j] \u4e0b\u9009\u62e9 k \u4ef6\u7269\u54c1\uff0c\u7b49\u540c\u4e8e dp[i][j-w[i]] \u9009\u62e9 k-1 \u4ef6\u7269\u54c1\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=W;++j){ dp[i][j]=d[i-1][j]; if(j>=w[i]) dp[i][j]=max(dp[i][j],dp[i][j-w[i]] + v[i]); } } //\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316 for(int i=0;i<n;++i){ for(int j=w[i];j<=W;++j){//\u987a\u5e8f\u662f\u56e0\u4e3a\u9700\u8981\u4f7f\u7528 dp[i][j] \u800c\u4e0d\u662f dp[i-1][j] dp[j]=max(dp[j],dp[j-w[i]]+v[i]); } } \u591a\u91cd\u90e8\u5206\u548c\u95ee\u9898 \u8fd9\u4e2a\u6211\u89c9\u5f97\u662f\u591a\u91cd\u80cc\u5305\u7684\u7b80\u5355\u7248\u672c\uff0c\u5b83\u4eec\u7684\u539f\u59cb\u7684\u63a8\u5bfc\u516c\u5f0f\u51e0\u4e4e\u4e00\u6837\uff0c\u4f46\u662f\u56e0\u4e3a\u6c42\u503c\u6bd4\u8f83\u7b80\u5355\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5316\u7b80\u4e3a\u7c7b\u4f3c\u5b8c\u5168\u80cc\u5305\u7684\u89e3\u6cd5\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=K;++j){ for(int k=0;k*a[i]<=j&&k<=m[i];++k){ dp[i][j]|=dp[i-1][j-k*a[i]]; } } } //\u5982\u679c\u53ea\u662f\u6c42 bool \u7ed3\u679c\u7684\u8bdd\uff0c\u8fd9\u6837 dp \u4f1a\u6709\u6d6a\u8d39\uff0c\u540c\u6837\u7684\u590d\u6742\u5ea6\u53ef\u4ee5\u5b58\u50a8\u66f4\u591a\u7684\u4fe1\u606f\u3002 //dp[i][j]: \u8868\u793a\u4f7f\u7528\u7b2c i \u79cd\u6570\u5b57\u7684\u65f6\u5019\uff0c\u5728\u548c\u4e3a j \u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u591a\u53ef\u4ee5\u5269\u4f59\u591a\u5c11\u4e2a\u8be5\u79cd\u6570\u5b57\u3002 memset(dp,-1,sizeof(dp)); //memset \u53ea\u53ef\u4ee5\u586b\u5145 0 \u548c -1\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=K;++j){ if(dp[j]>=0){ dp[j]=m[i];//\u5982\u679c\u524d i - 1 \u79cd\u6570\u5b57\u80fd\u6ee1\u8db3\u548c j\uff0c\u5219\u6700\u591a\u53ef\u4ee5\u5269\u4f59 m[i] \u4e2a\u3002 }else if(j<a[i]||dp[j-a[i]]<0){ dp[j]=-1; }else{ dp[j]=dp[j-a[i]]-1; } } } return dp[n][K]>=0; \u591a\u91cd\u80cc\u5305\u95ee\u9898 \u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\u95ee\u9898\uff08\u5b50\u5e8f\u5217\u6700\u7ecf\u5178\u4f8b\u9898\uff09 \u6700\u957f\u4e0a\u5347\u5b50\u5e8f\u5217\u95ee\u9898 int n; int a[MAX_N],dp[MAX_N];// dp[i]:\u8868\u793a\u4ee5\u7b2c i \u4e2a\u6570\u5b57\u7ed3\u5c3e\u7684\u5b50\u5e8f\u5217\u7684\u6700\u5927\u957f\u5ea6\u3002 int solve(){ int ans=0; for(int i=0;i<n;++i){ dp[i]=1; for(int j=0;j<i;++j){ if(a[j]<a[i]) dp[i]=max(dp[i],dp[j]+1); } ans=max(ans,dp[i]); } return ans; } \u6709\u5173\u8ba1\u6570 DP \u5212\u5206\u6570 \u6709 n \u4e2a\u5b8c\u5168\u76f8\u540c\u7684\u7269\u54c1\uff0c\u5c06\u5b83\u4eec\u5206\u6210\u4e0d\u8d85\u8fc7 m \u7ec4\uff0c\u6c42\u5212\u5206\u65b9\u6cd5\u6570\u6478 M \u7684\u4f59\u6570\u3002 (a1+a2+a3+...+ai)=n\u3002 \u9650\u5236\u6761\u4ef6 1<=m<=n<=1000 2<=M<=10000; //\u9012\u63a8\u516c\u5f0f dp[i][j]: \u8868\u793a j \u7684 i \u5212\u5206\u3002 dp[i][j]=dp[i][j-i]+dp[i-1][j]; int n,m; int dp[MAX_M+1][MAX_N+1]; int solve(){ dp[0][0]=1; for(int i=1;i<=m;++i){ for(int j=0;j<=n;++j){ if(j>=i){ dp[i][j]=dp[i][j-i] + dp[i-1][j]; }else{ dp[i][j]=dp[i-1][j]; } } } return dp[m][n]; } \u591a\u91cd\u96c6\u7684\u7ec4\u5408\u6570 \u6709 n \u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u7269\u54c1\uff0c\u7b2c i \u79cd\u7269\u54c1\u6709 a[i] \u4e2a\uff0c\u4e0d\u540c\u79cd\u7c7b\u7684\u7269\u54c1\u53ef\u4ee5\u76f8\u4e92\u533a\u5206\uff0c\u4f46\u662f\u540c\u79cd\u7c7b\u578b\u7684\u7269\u54c1\u65e0\u6cd5\u533a\u5206\uff0c\u4ece\u8fd9\u4e9b\u7269\u54c1\u4e2d\u6070\u597d\u53d6 m \u4e2a\uff0c\u6709\u591a\u5c11\u79cd\u53d6\u6cd5\uff1f\u6c42\u51fa\u65b9\u6848\u6570\u6a21 M \u7684\u4f59\u6570\u3002 \u9650\u5236\u6761\u4ef6 1<=n<=1000; 1<=m<=1000; 1<=a[i]<=1000; 1<=M<=10000; \u5206\u6790 \u5212\u5206\u6570\u662f\u6c42\u628a\u6240\u6709\u7269\u54c1\u5206\u7ec4\u7684\u65b9\u6848\u6570\uff0c\u8fd9\u9898\u76ee\u662f\u6c42\u53ea\u62ff\u4e00\u7ec4\u6709\u591a\u5c11\u79cd\u62ff\u6cd5\u3002 ps: \u5982\u679c\u5f53\u5f53 n \u4e2a\u4e0d\u540c\u7684\u7269\u54c1\u4e2d\u53d6\u51fa M \u4e2a\uff0c\u5219\u5355\u7eaf\u662f\u4e00\u4e2a\u7ec4\u5408\u95ee\u9898\uff0c $$ \\mathrm C_n^m = n!/(m!(n - m)!) $$ dp[i][j]: \u8868\u793a\u524d i \u79cd\u7269\u54c1\uff0c\u6070\u597d\u53d6 j \u4ef6\u4e00\u5171\u6709\u591a\u5c11\u79cd\u53d6\u6cd5\u3002\u90a3\u4e48\u5982\u679c\u7b2c i \u79cd\u7269\u54c1\u6211\u60f3\u62ff k \u4ef6\uff0c\u90a3\u4e48\u65b9\u6848\u6570\u662f\u524d i-1\u79cd\u7269\u54c1\u4e2d\u53d6\u51fa j-k \u4ef6\u7684\u65b9\u6848\u6570\uff0c\u56e0\u6b64\uff1a $$ dp[i+1][j]=\\sum_{k=0}^{min(j,ai)} dp[i][j-k] $$ \u53f3\u8fb9\u5c55\u5f00\u540e\uff0c\u53d8\u5f62 $$ \\sum_{k=0}^{min(j,ai)} dp[i][j-k]=\\sum_{k=0}^{min(j-1,ai)} dp[i][j-1-k] + dp[i][j] + dp[i][j-1-ai] $$ \u6240\u4ee5\uff1a $$ dp[i+1][j] = dp[i+1][j-1] + dp[i][j] + dp[i][j-1-ai] $$ \u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u65f6\u95f4\u590d\u6742\u5ea6 o(nm) \u5185\u89e3\u51b3\u95ee\u9898\uff1a int n, m; int a[MAX_N]; int dp[MAX_N][MAX_M]; int solve(){ //\u521d\u59cb\u5316\uff0c\u524d i \u4e2a\u7269\u54c1\u53ea\u53d6 0 \u4e2a\u90fd\u662f\u53ea\u6709\u4e00\u4e2a\u65b9\u6848\u3002 for(int i=0;i<=n;++i){ dp[i][0]=1; } for(int i=0;i<n;++i){ for(int j=1;j<=m;++j){ if(j-1-a[i]>=0){ dp[i+1][j]=(dp[i+1][j-1] + dp[i][j] - dp[i][j-1-a[i]] + M) % M; }else{ dp[i+1][j]=(dp[i+1][j-1] + dp[i][j]) % M;//\u5982\u679c\u6ca1\u6709\u6570\u91cf a[i] \u9650\u5236\u7684\u8bdd\uff0c\u662f\u4e0d\u662f\u5c31\u662f\u5b8c\u5168\u80cc\u5305\u7684\u516c\u5f0f\u3002 } } } return dp[n][m]; }","title":"\u52a8\u6001\u89c4\u5212"},{"location":"algorithm/dp/#_1","text":"","title":"\u52a8\u6001\u89c4\u5212"},{"location":"algorithm/dp/#_2","text":"","title":"\u80cc\u5305\u95ee\u9898"},{"location":"algorithm/dp/#01","text":"01 \u80cc\u5305\u672c\u8eab\u662f\u4e00\u4e2a\u5b50\u96c6\u95ee\u9898\uff0c\u6709 n \u4e2a\u7269\u54c1\uff0c\u6bcf\u4e2a\u7269\u54c1\u90fd\u53ef\u4ee5\u9009\u62e9\u6216\u8005\u4e0d\u9009\u62e9\uff0c\u90a3\u8fd9\u662f\u4e00\u9897\u6df1\u5ea6\u4e3a n \u7684\u4e8c\u53c9\u6811\uff0c\u8fd9\u662f\u80cc\u5305\u95ee\u9898\u7684\u66b4\u529b\u89e3\u6cd5\uff0c\u7a77\u4e3e\u6bcf\u4e00\u79cd\u7ec4\u5408\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a o(2^n)\u3002 \u8981\u6ce8\u610f\u80cc\u5305\u95ee\u9898\u7684\u7279\u70b9\uff1a \u4e00\u822c\u80cc\u5305\u95ee\u9898\u90fd\u662f\u53ea\u6709\u4e00\u4e2a\u7ef4\u5ea6\u7684\u9650\u5236\uff0c\u8fd9\u91cc\u662f\u80cc\u5305\u7684\u91cd\u91cf W\u3002 \u4e00\u822c\u53ea\u6c42\u4e00\u4e2a\u503c\uff0c\u8fd9\u91cc\u662f\u4ef7\u503c V\u3002 for(int i=0;i<n;++i){ for(int j=w[i];j<=W;++j){ dp[i][j]=max(dp[i][j],dp[i-1][j-w[i]]+v[i]); } } //\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316 for(int i=0;i<n;++i){ for(int j=W;j>=w[i];--j){//\u5012\u5e8f\u662f\u56e0\u4e3a\u907f\u514d\u8986\u76d6 dp[i-1][j] dp[j]=max(dp[j],dp[j-w[i]]+v[i]); } } \u65f6\u95f4\u590d\u6742\u5ea6 O(NW)\u3002","title":"01 \u80cc\u5305\u95ee\u9898"},{"location":"algorithm/dp/#_3","text":"\u5b8c\u5168\u80cc\u5305\u53ef\u4ee5\u770b\u4f5c\u6210 01 \u80cc\u5305\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u540c\u79cd\u7c7b\u578b\u7684\u6ca1\u610f\u89c1\u7269\u54c1\u770b\u4f5c\u5355\u72ec\u4e00\u4e2a\u7269\u54c1\uff0c\u8fd9\u5c31\u662f\u4e00\u4e2a 01 \u80cc\u5305\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=W,++j){ for(int k=0;k*w[i]<=j;++k){ dp[i][j]=max(dp[i][j],dp[i][j-k*w[i]]+k*v[i]); } } } //\u8fd9\u6837\u4f1a\u5b58\u5728\u91cd\u590d\u7684\u8ba1\u7b97\uff0c\u6bd4\u5982 dp[i][j] \u4e0b\u9009\u62e9 k \u4ef6\u7269\u54c1\uff0c\u7b49\u540c\u4e8e dp[i][j-w[i]] \u9009\u62e9 k-1 \u4ef6\u7269\u54c1\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=W;++j){ dp[i][j]=d[i-1][j]; if(j>=w[i]) dp[i][j]=max(dp[i][j],dp[i][j-w[i]] + v[i]); } } //\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316 for(int i=0;i<n;++i){ for(int j=w[i];j<=W;++j){//\u987a\u5e8f\u662f\u56e0\u4e3a\u9700\u8981\u4f7f\u7528 dp[i][j] \u800c\u4e0d\u662f dp[i-1][j] dp[j]=max(dp[j],dp[j-w[i]]+v[i]); } }","title":"\u5b8c\u5168\u80cc\u5305"},{"location":"algorithm/dp/#_4","text":"\u8fd9\u4e2a\u6211\u89c9\u5f97\u662f\u591a\u91cd\u80cc\u5305\u7684\u7b80\u5355\u7248\u672c\uff0c\u5b83\u4eec\u7684\u539f\u59cb\u7684\u63a8\u5bfc\u516c\u5f0f\u51e0\u4e4e\u4e00\u6837\uff0c\u4f46\u662f\u56e0\u4e3a\u6c42\u503c\u6bd4\u8f83\u7b80\u5355\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5316\u7b80\u4e3a\u7c7b\u4f3c\u5b8c\u5168\u80cc\u5305\u7684\u89e3\u6cd5\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=K;++j){ for(int k=0;k*a[i]<=j&&k<=m[i];++k){ dp[i][j]|=dp[i-1][j-k*a[i]]; } } } //\u5982\u679c\u53ea\u662f\u6c42 bool \u7ed3\u679c\u7684\u8bdd\uff0c\u8fd9\u6837 dp \u4f1a\u6709\u6d6a\u8d39\uff0c\u540c\u6837\u7684\u590d\u6742\u5ea6\u53ef\u4ee5\u5b58\u50a8\u66f4\u591a\u7684\u4fe1\u606f\u3002 //dp[i][j]: \u8868\u793a\u4f7f\u7528\u7b2c i \u79cd\u6570\u5b57\u7684\u65f6\u5019\uff0c\u5728\u548c\u4e3a j \u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u591a\u53ef\u4ee5\u5269\u4f59\u591a\u5c11\u4e2a\u8be5\u79cd\u6570\u5b57\u3002 memset(dp,-1,sizeof(dp)); //memset \u53ea\u53ef\u4ee5\u586b\u5145 0 \u548c -1\u3002 for(int i=0;i<n;++i){ for(int j=0;j<=K;++j){ if(dp[j]>=0){ dp[j]=m[i];//\u5982\u679c\u524d i - 1 \u79cd\u6570\u5b57\u80fd\u6ee1\u8db3\u548c j\uff0c\u5219\u6700\u591a\u53ef\u4ee5\u5269\u4f59 m[i] \u4e2a\u3002 }else if(j<a[i]||dp[j-a[i]]<0){ dp[j]=-1; }else{ dp[j]=dp[j-a[i]]-1; } } } return dp[n][K]>=0;","title":"\u591a\u91cd\u90e8\u5206\u548c\u95ee\u9898"},{"location":"algorithm/dp/#_5","text":"","title":"\u591a\u91cd\u80cc\u5305\u95ee\u9898"},{"location":"algorithm/dp/#_6","text":"","title":"\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\u95ee\u9898\uff08\u5b50\u5e8f\u5217\u6700\u7ecf\u5178\u4f8b\u9898\uff09"},{"location":"algorithm/dp/#_7","text":"int n; int a[MAX_N],dp[MAX_N];// dp[i]:\u8868\u793a\u4ee5\u7b2c i \u4e2a\u6570\u5b57\u7ed3\u5c3e\u7684\u5b50\u5e8f\u5217\u7684\u6700\u5927\u957f\u5ea6\u3002 int solve(){ int ans=0; for(int i=0;i<n;++i){ dp[i]=1; for(int j=0;j<i;++j){ if(a[j]<a[i]) dp[i]=max(dp[i],dp[j]+1); } ans=max(ans,dp[i]); } return ans; }","title":"\u6700\u957f\u4e0a\u5347\u5b50\u5e8f\u5217\u95ee\u9898"},{"location":"algorithm/dp/#dp","text":"","title":"\u6709\u5173\u8ba1\u6570 DP"},{"location":"algorithm/dp/#_8","text":"\u6709 n \u4e2a\u5b8c\u5168\u76f8\u540c\u7684\u7269\u54c1\uff0c\u5c06\u5b83\u4eec\u5206\u6210\u4e0d\u8d85\u8fc7 m \u7ec4\uff0c\u6c42\u5212\u5206\u65b9\u6cd5\u6570\u6478 M \u7684\u4f59\u6570\u3002 (a1+a2+a3+...+ai)=n\u3002 \u9650\u5236\u6761\u4ef6 1<=m<=n<=1000 2<=M<=10000; //\u9012\u63a8\u516c\u5f0f dp[i][j]: \u8868\u793a j \u7684 i \u5212\u5206\u3002 dp[i][j]=dp[i][j-i]+dp[i-1][j]; int n,m; int dp[MAX_M+1][MAX_N+1]; int solve(){ dp[0][0]=1; for(int i=1;i<=m;++i){ for(int j=0;j<=n;++j){ if(j>=i){ dp[i][j]=dp[i][j-i] + dp[i-1][j]; }else{ dp[i][j]=dp[i-1][j]; } } } return dp[m][n]; }","title":"\u5212\u5206\u6570"},{"location":"algorithm/dp/#_9","text":"\u6709 n \u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u7269\u54c1\uff0c\u7b2c i \u79cd\u7269\u54c1\u6709 a[i] \u4e2a\uff0c\u4e0d\u540c\u79cd\u7c7b\u7684\u7269\u54c1\u53ef\u4ee5\u76f8\u4e92\u533a\u5206\uff0c\u4f46\u662f\u540c\u79cd\u7c7b\u578b\u7684\u7269\u54c1\u65e0\u6cd5\u533a\u5206\uff0c\u4ece\u8fd9\u4e9b\u7269\u54c1\u4e2d\u6070\u597d\u53d6 m \u4e2a\uff0c\u6709\u591a\u5c11\u79cd\u53d6\u6cd5\uff1f\u6c42\u51fa\u65b9\u6848\u6570\u6a21 M \u7684\u4f59\u6570\u3002 \u9650\u5236\u6761\u4ef6 1<=n<=1000; 1<=m<=1000; 1<=a[i]<=1000; 1<=M<=10000; \u5206\u6790 \u5212\u5206\u6570\u662f\u6c42\u628a\u6240\u6709\u7269\u54c1\u5206\u7ec4\u7684\u65b9\u6848\u6570\uff0c\u8fd9\u9898\u76ee\u662f\u6c42\u53ea\u62ff\u4e00\u7ec4\u6709\u591a\u5c11\u79cd\u62ff\u6cd5\u3002 ps: \u5982\u679c\u5f53\u5f53 n \u4e2a\u4e0d\u540c\u7684\u7269\u54c1\u4e2d\u53d6\u51fa M \u4e2a\uff0c\u5219\u5355\u7eaf\u662f\u4e00\u4e2a\u7ec4\u5408\u95ee\u9898\uff0c $$ \\mathrm C_n^m = n!/(m!(n - m)!) $$ dp[i][j]: \u8868\u793a\u524d i \u79cd\u7269\u54c1\uff0c\u6070\u597d\u53d6 j \u4ef6\u4e00\u5171\u6709\u591a\u5c11\u79cd\u53d6\u6cd5\u3002\u90a3\u4e48\u5982\u679c\u7b2c i \u79cd\u7269\u54c1\u6211\u60f3\u62ff k \u4ef6\uff0c\u90a3\u4e48\u65b9\u6848\u6570\u662f\u524d i-1\u79cd\u7269\u54c1\u4e2d\u53d6\u51fa j-k \u4ef6\u7684\u65b9\u6848\u6570\uff0c\u56e0\u6b64\uff1a $$ dp[i+1][j]=\\sum_{k=0}^{min(j,ai)} dp[i][j-k] $$ \u53f3\u8fb9\u5c55\u5f00\u540e\uff0c\u53d8\u5f62 $$ \\sum_{k=0}^{min(j,ai)} dp[i][j-k]=\\sum_{k=0}^{min(j-1,ai)} dp[i][j-1-k] + dp[i][j] + dp[i][j-1-ai] $$ \u6240\u4ee5\uff1a $$ dp[i+1][j] = dp[i+1][j-1] + dp[i][j] + dp[i][j-1-ai] $$ \u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u65f6\u95f4\u590d\u6742\u5ea6 o(nm) \u5185\u89e3\u51b3\u95ee\u9898\uff1a int n, m; int a[MAX_N]; int dp[MAX_N][MAX_M]; int solve(){ //\u521d\u59cb\u5316\uff0c\u524d i \u4e2a\u7269\u54c1\u53ea\u53d6 0 \u4e2a\u90fd\u662f\u53ea\u6709\u4e00\u4e2a\u65b9\u6848\u3002 for(int i=0;i<=n;++i){ dp[i][0]=1; } for(int i=0;i<n;++i){ for(int j=1;j<=m;++j){ if(j-1-a[i]>=0){ dp[i+1][j]=(dp[i+1][j-1] + dp[i][j] - dp[i][j-1-a[i]] + M) % M; }else{ dp[i+1][j]=(dp[i+1][j-1] + dp[i][j]) % M;//\u5982\u679c\u6ca1\u6709\u6570\u91cf a[i] \u9650\u5236\u7684\u8bdd\uff0c\u662f\u4e0d\u662f\u5c31\u662f\u5b8c\u5168\u80cc\u5305\u7684\u516c\u5f0f\u3002 } } } return dp[n][m]; }","title":"\u591a\u91cd\u96c6\u7684\u7ec4\u5408\u6570"},{"location":"algorithm/greedy/","text":"\u8d2a\u5fc3 \u533a\u95f4\u95ee\u9898 \u4e0d\u76f8\u4ea4\u533a\u95f4\u6570\u6700\u591a \u9898\u76ee1 \u6709 n \u9879\u5de5\u4f5c\uff0c\u6bcf\u9879\u5de5\u4f5c\u5206\u522b\u518d\u65f6\u95f4 si \u5f00\u59cb\uff0c\u5728\u65f6\u95f4 ti \u7ed3\u675f\uff0c\u5bf9\u4e8e\u6bcf\u9879\u5de5\u4f5c\uff0c\u4f60\u90fd\u53ef\u4ee5\u9009\u62e9\u53c2\u4e0e\u4e0e\u5426\uff0c\u4f46\u662f\u5982\u679c\u9009\u62e9\u53c2\u4e0e\uff0c\u5c31\u5fc5\u987b\u5b8c\u6210\u8be5\u9879\u5de5\u4f5c\uff0c\u5e76\u4e14\u8be5\u5de5\u4f5c\u65f6\u95f4\u6bb5\u5185\u4e0d\u80fd\u53c2\u4e0e\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\u4f60\u7684\u76ee\u6807\u662f\u53c2\u4e0e\u5c3d\u91cf\u591a\u7684\u5de5\u4f5c\uff0c\u8fd4\u56de\u8be5\u6700\u5927\u503c\u3002 \u9650\u5236\u6761\u4ef6 1<=N<=100000; 1<=si<=ti<=1e9; \u8f93\u5165 n=5;s={1,2,4,6,8},t={3,5,7,9,0} \u89e3\u7b54 \u6309\u7167\u7ed3\u675f\u65f6\u95f4\u6392\u5e8f\uff0c\u6bcf\u6b21\u9009\u62e9\u5c3d\u91cf\u65e9\u7ed3\u675f\u7684\u5de5\u4f5c\u3002 typedef pair<int,int> pi; pi itv[MAX_N]; int solve(int n, vector<int> s, vector<int> t){ for(int i=0;i<n;++i){ itv[i].second=s[i]; itv[i].first=t[i];//\u7ed3\u675f\u65f6\u95f4\u4f5c first } sort(itv.begin(),itv.end()); int ans=0; for(int i=0,t=0;i<n;++i){ if(itv[i].second>t){ ans++; t=itv[i].first; } } return ans; } \u533a\u95f4\u9009\u70b9\u95ee\u9898 \u6570\u8f74\u4e0a\u6709 n \u4e2a\u95ed\u533a\u95f4 [ai,bi]\u3002\u53d6\u5c3d\u91cf\u5c11\u7684\u70b9\uff0c\u4f7f\u5f97\u8986\u76d6\u6bcf\u4e2a\u533a\u95f4\u5185\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\uff08\u4e0d\u540c\u533a\u95f4\u5185\u542b\u7684\u70b9\u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\uff09\u3002 \u5206\u6790 \u5148\u6309\u7167 b \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff08b \u76f8\u540c a \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff09\u3002 \u53d6\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u6700\u540e\u4e00\u4e2a\u70b9\uff0c\u7136\u540e ai \u5c0f\u4e8e\u7b49\u4e8e\u8be5\u70b9\u7684\u533a\u95f4\u90fd\u88ab\u8df3\u8fc7 \uff0c\u76f4\u5230 ai \u5927\u4e8e\u521a\u521a\u9009\u53d6\u7684\u70b9\uff0c\u91cd\u590d\u4e0a\u4e00\u6b65\u3002 \u533a\u95f4\u8986\u76d6\u95ee\u9898 \u6570\u8f74\u4e0a\u6709 n \u4e2a\u95ed\u533a\u95f4 [ai,bi]\uff0c\u9009\u62e9 \u5c3d\u91cf\u5c11 \u7684\u533a\u95f4\uff0c\u8986\u76d6\u4e00\u6761\u6307\u5b9a\u7ebf\u6bb5 [s,t]\u3002 \u5206\u6790 \u7a81\u7834\u53e3\u4ecd\u7136\u662f\u533a\u95f4\u5305\u542b\u548c\u533a\u95f4\u6392\u5e8f\uff0c\u4e0d\u8fc7\u9700\u8981\u4e00\u6b21\u9884\u5904\u7406\u3002 \u6bcf\u4e2a\u533a\u95f4\u5728 [s,t] \u5916\u9762\u7684\u90e8\u5206\u90fd\u5e94\u8be5\u5207\u6389\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u591a\u4f59\u7684\u3002 \u9884\u5904\u7406\u540e\uff0c\u5728\u76f8\u4e92\u5305\u542b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c0f\u533a\u95f4\u663e\u7136\u662f\u4e0d\u5e94\u8be5\u8003\u8651\u7684\u3002 \u628a\u5404\u4e2a\u533a\u95f4\u6309\u7167 ai \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u8d77\u70b9\u4e0d\u662f s\uff0c\u90a3\u4e48\u65e0\u89e3\uff1b\u5426\u5219\u9009\u62e9\u8d77\u70b9\u4e3a s \u7684\u533a\u95f4\u91cc\u9762\u6700\u957f\u7684\u4e00\u4e2a\uff0c\u66f4\u65b0 s \u4e3a\u521a\u521a\u9009\u62e9\u533a\u95f4\u7684 bi\u3002 \u91cd\u590d\u7b2c\u4e00\u6b65\uff0c\u76f4\u5230 s>=t\u3002 \u5176\u4ed6\u4f8b\u9898 POJ 3069 \u76f4\u7ebf\u4e0a\u6709 n \u4e2a\u70b9\uff0c\u5750\u6807\u4e3a xi\uff0c\u9009\u62e9\u82e5\u5e72\u4e2a\u70b9\u6dfb\u52a0\u6807\u8bb0\uff0c\u6bcf\u4e2a\u6807\u8bb0\u7684\u70b9\u7684\u8986\u76d6\u8303\u56f4\u662f R\uff0c\u8981\u6c42\u6240\u6709\u70b9\u90fd\u80fd\u88ab\u6807\u8bb0\u70b9\u8986\u76d6\u3002\u6c42\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\u60c5\u51b5\u4e0b\uff0c\u9009\u62e9\u5c3d\u91cf\u5c11\u7684\u70b9\u6dfb\u52a0\u6807\u8bb0\u3002 int N,R; int x[N]; int solve(){ int ans=0; sort(x,x+N); for(int l=0;l<N;l++){ int s=x[l];//\u56ed\u8986\u76d6\u7684\u6700\u5de6\u8fb9\u7684\u70b9\u3002 int j=l; while(j+1<n&&s+R>=x[j+1])++j;//\u627e\u5230\u5706\u5fc3\uff08s+R \u8303\u56f4\u5185\u7684\u6700\u8fdc\u7684\u70b9\uff09 int t=x[j]; while(j+1<n&&t+R>=x[j+1]) ++j; l=j; ans++; } return ans; } \u5b57\u5178\u5e8f\u95ee\u9898 POJ 3617 \u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a N \u7684\u5b57\u7b26\u4e32 S\uff0c\u8981\u6784\u9020\u4e00\u4e2a\u957f\u5ea6\u540c\u6837\u4e3a N \u7684\u5b57\u7b26 T\uff0cT \u521d\u59cb\u4e3a\u7a7a\uff0c\u4f60\u53ef\u4ee5\u53cd\u590d\u8fdb\u884c\u4ee5\u4e0b\u4efb\u610f\u64cd\u4f5c\uff1a \u4ece S \u7684\u5934\u90e8\u5220\u9664\u4e00\u4e2a\u5b57\u7b26\uff0c\u653e\u5230 T \u7684\u5c3e\u90e8\u3002 \u4ece S \u7684\u5c3e\u90e8\u5220\u9664\u4e00\u4e2a\u5b57\u7b26\uff0c\u653e\u5230 T \u7684\u5c3e\u90e8\u3002 1<=N<=1000 \u76ee\u6807\uff0cT \u5b57\u5178\u5e8f\u5c3d\u91cf\u5c0f \u3002 int N; char s[MAX_N]; string solve(){ int a=0; int b=N-1; string ans; while(a<=b){ bool left=true; for(int i=0;i+a<=b-i;++i){ if(s[a+i]==s[b-i]) continue; left=s[a+i]<s[b-i]; break; } ans+=left?s[a++]:s[b--]; } return ans; } \u539f\u9898\u76ee\u8f93\u51fa\u683c\u5f0f\u8981\u6c42\u6bcf 80 \u4e2a\u5b57\u7b26\u6362\u884c\u3002 \u54c8\u592b\u66fc\u7f16\u7801\u95ee\u9898 \u54c8\u592b\u66fc\u7f16\u7801\u7684\u4e24\u4e2a\u5173\u952e\uff1a \u524d\u7f00\u7801\u6811\uff1a\u6bcf\u4e2a\u7f16\u7801\u90fd\u662f\u53f6\u5b50\u8def\u5f84\u7f16\u7801\uff0c\u53ea\u6709\u53f6\u5b50\u624d\u662f\u6700\u7ec8\u7684\u7f16\u7801\u3002 \u603b\u4ef7\u503c\u6700\u5c0f\u7684\u524d\u7f00\u7801\u6811\uff1a\u4ef7\u503c\u6700\u5c0f\u7684\u4e24\u4e2a\u8282\u70b9\u6700\u4e3a\u5144\u5f1f\u8282\u70b9\uff0c\u5e76\u4e14\u662f\u6df1\u5ea6\u6700\u5927\u7684\u8282\u70b9\u3002 \u54c8\u592b\u66fc\u7f16\u7801\u53d8\u5f62\u4f8b\u9898 POJ 3253 Fence Repair typedef long long LL; const int N=20010; int n,len[N]; LL solve(){ LL ans=0; while(n>1){ int mi1=0,mi2=1; if(len[mi1]>len[mi2]) swap(mi1,mi2); for(int i=2;i<n;++i){ if(len[i]<=len[mi1]){ mi2=mi1; mi1=i; }else if(len[i]<len[mi2]) mi2=i; } int t=len[mi1] + len[mi2]; ans+=t; //\u5c31\u5730\u5408\u5e76\u6280\u5de7 if(mi1==n-1) swap(mi1,mi2); len[mi1]=t; len[mi2]=len[n-1]; --n; } return ans; }","title":"\u8d2a\u5fc3"},{"location":"algorithm/greedy/#_1","text":"","title":"\u8d2a\u5fc3"},{"location":"algorithm/greedy/#_2","text":"","title":"\u533a\u95f4\u95ee\u9898"},{"location":"algorithm/greedy/#_3","text":"","title":"\u4e0d\u76f8\u4ea4\u533a\u95f4\u6570\u6700\u591a"},{"location":"algorithm/greedy/#1","text":"\u6709 n \u9879\u5de5\u4f5c\uff0c\u6bcf\u9879\u5de5\u4f5c\u5206\u522b\u518d\u65f6\u95f4 si \u5f00\u59cb\uff0c\u5728\u65f6\u95f4 ti \u7ed3\u675f\uff0c\u5bf9\u4e8e\u6bcf\u9879\u5de5\u4f5c\uff0c\u4f60\u90fd\u53ef\u4ee5\u9009\u62e9\u53c2\u4e0e\u4e0e\u5426\uff0c\u4f46\u662f\u5982\u679c\u9009\u62e9\u53c2\u4e0e\uff0c\u5c31\u5fc5\u987b\u5b8c\u6210\u8be5\u9879\u5de5\u4f5c\uff0c\u5e76\u4e14\u8be5\u5de5\u4f5c\u65f6\u95f4\u6bb5\u5185\u4e0d\u80fd\u53c2\u4e0e\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\u4f60\u7684\u76ee\u6807\u662f\u53c2\u4e0e\u5c3d\u91cf\u591a\u7684\u5de5\u4f5c\uff0c\u8fd4\u56de\u8be5\u6700\u5927\u503c\u3002 \u9650\u5236\u6761\u4ef6 1<=N<=100000; 1<=si<=ti<=1e9; \u8f93\u5165 n=5;s={1,2,4,6,8},t={3,5,7,9,0} \u89e3\u7b54 \u6309\u7167\u7ed3\u675f\u65f6\u95f4\u6392\u5e8f\uff0c\u6bcf\u6b21\u9009\u62e9\u5c3d\u91cf\u65e9\u7ed3\u675f\u7684\u5de5\u4f5c\u3002 typedef pair<int,int> pi; pi itv[MAX_N]; int solve(int n, vector<int> s, vector<int> t){ for(int i=0;i<n;++i){ itv[i].second=s[i]; itv[i].first=t[i];//\u7ed3\u675f\u65f6\u95f4\u4f5c first } sort(itv.begin(),itv.end()); int ans=0; for(int i=0,t=0;i<n;++i){ if(itv[i].second>t){ ans++; t=itv[i].first; } } return ans; }","title":"\u9898\u76ee1"},{"location":"algorithm/greedy/#_4","text":"\u6570\u8f74\u4e0a\u6709 n \u4e2a\u95ed\u533a\u95f4 [ai,bi]\u3002\u53d6\u5c3d\u91cf\u5c11\u7684\u70b9\uff0c\u4f7f\u5f97\u8986\u76d6\u6bcf\u4e2a\u533a\u95f4\u5185\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\uff08\u4e0d\u540c\u533a\u95f4\u5185\u542b\u7684\u70b9\u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\uff09\u3002 \u5206\u6790 \u5148\u6309\u7167 b \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff08b \u76f8\u540c a \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff09\u3002 \u53d6\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u6700\u540e\u4e00\u4e2a\u70b9\uff0c\u7136\u540e ai \u5c0f\u4e8e\u7b49\u4e8e\u8be5\u70b9\u7684\u533a\u95f4\u90fd\u88ab\u8df3\u8fc7 \uff0c\u76f4\u5230 ai \u5927\u4e8e\u521a\u521a\u9009\u53d6\u7684\u70b9\uff0c\u91cd\u590d\u4e0a\u4e00\u6b65\u3002","title":"\u533a\u95f4\u9009\u70b9\u95ee\u9898"},{"location":"algorithm/greedy/#_5","text":"\u6570\u8f74\u4e0a\u6709 n \u4e2a\u95ed\u533a\u95f4 [ai,bi]\uff0c\u9009\u62e9 \u5c3d\u91cf\u5c11 \u7684\u533a\u95f4\uff0c\u8986\u76d6\u4e00\u6761\u6307\u5b9a\u7ebf\u6bb5 [s,t]\u3002 \u5206\u6790 \u7a81\u7834\u53e3\u4ecd\u7136\u662f\u533a\u95f4\u5305\u542b\u548c\u533a\u95f4\u6392\u5e8f\uff0c\u4e0d\u8fc7\u9700\u8981\u4e00\u6b21\u9884\u5904\u7406\u3002 \u6bcf\u4e2a\u533a\u95f4\u5728 [s,t] \u5916\u9762\u7684\u90e8\u5206\u90fd\u5e94\u8be5\u5207\u6389\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u591a\u4f59\u7684\u3002 \u9884\u5904\u7406\u540e\uff0c\u5728\u76f8\u4e92\u5305\u542b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c0f\u533a\u95f4\u663e\u7136\u662f\u4e0d\u5e94\u8be5\u8003\u8651\u7684\u3002 \u628a\u5404\u4e2a\u533a\u95f4\u6309\u7167 ai \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u8d77\u70b9\u4e0d\u662f s\uff0c\u90a3\u4e48\u65e0\u89e3\uff1b\u5426\u5219\u9009\u62e9\u8d77\u70b9\u4e3a s \u7684\u533a\u95f4\u91cc\u9762\u6700\u957f\u7684\u4e00\u4e2a\uff0c\u66f4\u65b0 s \u4e3a\u521a\u521a\u9009\u62e9\u533a\u95f4\u7684 bi\u3002 \u91cd\u590d\u7b2c\u4e00\u6b65\uff0c\u76f4\u5230 s>=t\u3002","title":"\u533a\u95f4\u8986\u76d6\u95ee\u9898"},{"location":"algorithm/greedy/#_6","text":"","title":"\u5176\u4ed6\u4f8b\u9898"},{"location":"algorithm/greedy/#poj-3069","text":"\u76f4\u7ebf\u4e0a\u6709 n \u4e2a\u70b9\uff0c\u5750\u6807\u4e3a xi\uff0c\u9009\u62e9\u82e5\u5e72\u4e2a\u70b9\u6dfb\u52a0\u6807\u8bb0\uff0c\u6bcf\u4e2a\u6807\u8bb0\u7684\u70b9\u7684\u8986\u76d6\u8303\u56f4\u662f R\uff0c\u8981\u6c42\u6240\u6709\u70b9\u90fd\u80fd\u88ab\u6807\u8bb0\u70b9\u8986\u76d6\u3002\u6c42\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\u60c5\u51b5\u4e0b\uff0c\u9009\u62e9\u5c3d\u91cf\u5c11\u7684\u70b9\u6dfb\u52a0\u6807\u8bb0\u3002 int N,R; int x[N]; int solve(){ int ans=0; sort(x,x+N); for(int l=0;l<N;l++){ int s=x[l];//\u56ed\u8986\u76d6\u7684\u6700\u5de6\u8fb9\u7684\u70b9\u3002 int j=l; while(j+1<n&&s+R>=x[j+1])++j;//\u627e\u5230\u5706\u5fc3\uff08s+R \u8303\u56f4\u5185\u7684\u6700\u8fdc\u7684\u70b9\uff09 int t=x[j]; while(j+1<n&&t+R>=x[j+1]) ++j; l=j; ans++; } return ans; }","title":"POJ 3069"},{"location":"algorithm/greedy/#_7","text":"","title":"\u5b57\u5178\u5e8f\u95ee\u9898"},{"location":"algorithm/greedy/#poj-3617","text":"\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a N \u7684\u5b57\u7b26\u4e32 S\uff0c\u8981\u6784\u9020\u4e00\u4e2a\u957f\u5ea6\u540c\u6837\u4e3a N \u7684\u5b57\u7b26 T\uff0cT \u521d\u59cb\u4e3a\u7a7a\uff0c\u4f60\u53ef\u4ee5\u53cd\u590d\u8fdb\u884c\u4ee5\u4e0b\u4efb\u610f\u64cd\u4f5c\uff1a \u4ece S \u7684\u5934\u90e8\u5220\u9664\u4e00\u4e2a\u5b57\u7b26\uff0c\u653e\u5230 T \u7684\u5c3e\u90e8\u3002 \u4ece S \u7684\u5c3e\u90e8\u5220\u9664\u4e00\u4e2a\u5b57\u7b26\uff0c\u653e\u5230 T \u7684\u5c3e\u90e8\u3002 1<=N<=1000 \u76ee\u6807\uff0cT \u5b57\u5178\u5e8f\u5c3d\u91cf\u5c0f \u3002 int N; char s[MAX_N]; string solve(){ int a=0; int b=N-1; string ans; while(a<=b){ bool left=true; for(int i=0;i+a<=b-i;++i){ if(s[a+i]==s[b-i]) continue; left=s[a+i]<s[b-i]; break; } ans+=left?s[a++]:s[b--]; } return ans; } \u539f\u9898\u76ee\u8f93\u51fa\u683c\u5f0f\u8981\u6c42\u6bcf 80 \u4e2a\u5b57\u7b26\u6362\u884c\u3002","title":"POJ 3617"},{"location":"algorithm/greedy/#_8","text":"\u54c8\u592b\u66fc\u7f16\u7801\u7684\u4e24\u4e2a\u5173\u952e\uff1a \u524d\u7f00\u7801\u6811\uff1a\u6bcf\u4e2a\u7f16\u7801\u90fd\u662f\u53f6\u5b50\u8def\u5f84\u7f16\u7801\uff0c\u53ea\u6709\u53f6\u5b50\u624d\u662f\u6700\u7ec8\u7684\u7f16\u7801\u3002 \u603b\u4ef7\u503c\u6700\u5c0f\u7684\u524d\u7f00\u7801\u6811\uff1a\u4ef7\u503c\u6700\u5c0f\u7684\u4e24\u4e2a\u8282\u70b9\u6700\u4e3a\u5144\u5f1f\u8282\u70b9\uff0c\u5e76\u4e14\u662f\u6df1\u5ea6\u6700\u5927\u7684\u8282\u70b9\u3002","title":"\u54c8\u592b\u66fc\u7f16\u7801\u95ee\u9898"},{"location":"algorithm/greedy/#poj-3253-fence-repair","text":"typedef long long LL; const int N=20010; int n,len[N]; LL solve(){ LL ans=0; while(n>1){ int mi1=0,mi2=1; if(len[mi1]>len[mi2]) swap(mi1,mi2); for(int i=2;i<n;++i){ if(len[i]<=len[mi1]){ mi2=mi1; mi1=i; }else if(len[i]<len[mi2]) mi2=i; } int t=len[mi1] + len[mi2]; ans+=t; //\u5c31\u5730\u5408\u5e76\u6280\u5de7 if(mi1==n-1) swap(mi1,mi2); len[mi1]=t; len[mi2]=len[n-1]; --n; } return ans; }","title":"\u54c8\u592b\u66fc\u7f16\u7801\u53d8\u5f62\u4f8b\u9898 POJ 3253  Fence Repair"},{"location":"algorithm/improve/","text":"\u524d\u7f00\u6570\u7ec4 \u8fb9\u754c \u5173\u952e\u4ee3\u7801\u586b\u7a7a \u7ec6\u8282 [from,end]: mid=from + (end-from)/2, [from,mid]: \u5de6\u534a\u533a\uff0c\u5947\u6570\u957f\u5ea6\u5de6\u8fb9\u591a\u4e00\u4e2a\uff1b[mid+1,end]: \u53f3\u534a\u533a\u3002 [from,end): mid=from+(end-from)/2, [from,mid): \u5de6\u534a\u533a\uff0c\u5947\u6570\u957f\u5ea6\u5c11\u4e00\u4e2a\uff1b[mid,end): \u53f3\u534a\u533a\u3002 bfs \u7b2c\u4e00\u4e2a\u5165\u961f\u5217\u7684\u5143\u7d20\u5728\u5faa\u73af\u5916\uff0c\u4f46\u662f\u4e5f\u8981\u505a\u5408\u6cd5\u6027\u68c0\u6d4b\u3002 \u5316\u7acb\u4f53\u4e3a\u5e73\u9762\uff0c\u5316\u5e73\u9762\u4e3a\u76f4\u7ebf\uff0c\u5efa\u7acb\u6a21\u578b\uff1b\u518d\u4ece\u5e73\u9762\u8fd4\u56de\u7acb\u4f53\uff0c\u4ece\u76f4\u7ebf\u8fd4\u56de\u5e73\u9762\u3002","title":"Improve"},{"location":"algorithm/improve/#_1","text":"[from,end]: mid=from + (end-from)/2, [from,mid]: \u5de6\u534a\u533a\uff0c\u5947\u6570\u957f\u5ea6\u5de6\u8fb9\u591a\u4e00\u4e2a\uff1b[mid+1,end]: \u53f3\u534a\u533a\u3002 [from,end): mid=from+(end-from)/2, [from,mid): \u5de6\u534a\u533a\uff0c\u5947\u6570\u957f\u5ea6\u5c11\u4e00\u4e2a\uff1b[mid,end): \u53f3\u534a\u533a\u3002 bfs \u7b2c\u4e00\u4e2a\u5165\u961f\u5217\u7684\u5143\u7d20\u5728\u5faa\u73af\u5916\uff0c\u4f46\u662f\u4e5f\u8981\u505a\u5408\u6cd5\u6027\u68c0\u6d4b\u3002 \u5316\u7acb\u4f53\u4e3a\u5e73\u9762\uff0c\u5316\u5e73\u9762\u4e3a\u76f4\u7ebf\uff0c\u5efa\u7acb\u6a21\u578b\uff1b\u518d\u4ece\u5e73\u9762\u8fd4\u56de\u7acb\u4f53\uff0c\u4ece\u76f4\u7ebf\u8fd4\u56de\u5e73\u9762\u3002","title":"\u7ec6\u8282"},{"location":"algorithm/problems/","text":"\u9898\u76ee\u5f52\u7c7b\uff08\u6309\u6280\u5de7\uff09 \u4e8c\u7ef4\u53cc\u91cd\u6709\u5e8f \u8d29\u5356\u571f\u5730 uva 12265 \u7d2b\u4e66 p250 \u9632\u7ebf uva 1471 \u7d2b\u4e66 p242 4 values whose sum is 0 POJ 2785 \u767d\u4e66 p160","title":"\u9898\u76ee\u5f52\u7c7b\uff08\u6309\u6280\u5de7\uff09"},{"location":"algorithm/problems/#_1","text":"","title":"\u9898\u76ee\u5f52\u7c7b\uff08\u6309\u6280\u5de7\uff09"},{"location":"algorithm/problems/#_2","text":"\u8d29\u5356\u571f\u5730 uva 12265 \u7d2b\u4e66 p250 \u9632\u7ebf uva 1471 \u7d2b\u4e66 p242 4 values whose sum is 0 POJ 2785 \u767d\u4e66 p160","title":"\u4e8c\u7ef4\u53cc\u91cd\u6709\u5e8f"},{"location":"algorithm/slidwindow/","text":"\u6ed1\u52a8\u7a97\u53e3 \u7ec6\u8282\u548c\u6280\u5de7 \u6ed1\u52a8\u7a97\u53e3\u533a\u95f4\u5750\u6807\uff08\u8fd9\u79cd\u5c31\u662f\u8981\u808c\u8089\u53cd\u5e94\uff09\uff1a \u533a\u95f4\uff1a[x,i]\uff0c\u957f\u5ea6\uff1ak\uff0c\u5219 x=i-k+1\u3002 \u533a\u95f4\uff1a[i,x]\uff0c\u957f\u5ea6\uff1ak\uff0c\u5219 x=i+k-1\u3002Q","title":"\u6ed1\u52a8\u7a97\u53e3"},{"location":"algorithm/slidwindow/#_1","text":"","title":"\u6ed1\u52a8\u7a97\u53e3"},{"location":"algorithm/slidwindow/#_2","text":"\u6ed1\u52a8\u7a97\u53e3\u533a\u95f4\u5750\u6807\uff08\u8fd9\u79cd\u5c31\u662f\u8981\u808c\u8089\u53cd\u5e94\uff09\uff1a \u533a\u95f4\uff1a[x,i]\uff0c\u957f\u5ea6\uff1ak\uff0c\u5219 x=i-k+1\u3002 \u533a\u95f4\uff1a[i,x]\uff0c\u957f\u5ea6\uff1ak\uff0c\u5219 x=i+k-1\u3002Q","title":"\u7ec6\u8282\u548c\u6280\u5de7"},{"location":"algorithm/string/","text":"\u5b57\u7b26\u4e32 \u5b50\u5e8f\u5217\u95ee\u9898 \u5b50\u5e8f\u5217\u7684\u4e00\u4e9b\u7279\u70b9 \u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4 strs \uff0c\u5bf9\u4e8e\u5176\u4e2d\u5b57\u7b26\u4e32 str[i] \uff0c \u5982\u679c\u5b83\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217 sub \u662f \u7279\u6027\u5e8f\u5217 \uff0c\u90a3\u4e48str[i] \u672c\u8eab\u4e5f\u662f\u4e00\u4e2a \u7279\u6b8a\u5e8f\u5217 \u3002\uff08\u7279\u6b8a\u5b50\u5e8f\u5217\u5c31\u662f\u662f\u5b57\u7b26\u4e32 str[i] \u672c\u8eab\u72ec\u6709\u7684\u5b50\u5e8f\u5217\uff09\u3002 \u56de\u6587\u5b57\u7b26\u4e32 \u6700\u957f\u56de\u6587\u5b50\u4e32 \u6700\u957f\u56de\u6587\u5b50\u5e8f\u5217 \u8ba9\u5b57\u7b26\u4e32\u6210\u4e3a\u56de\u6587\u4e32\u7684\u6700\u5c11\u63d2\u5165\u6b21\u6570","title":"\u5b57\u7b26\u4e32"},{"location":"algorithm/string/#_1","text":"","title":"\u5b57\u7b26\u4e32"},{"location":"algorithm/string/#_2","text":"","title":"\u5b50\u5e8f\u5217\u95ee\u9898"},{"location":"algorithm/string/#_3","text":"\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4 strs \uff0c\u5bf9\u4e8e\u5176\u4e2d\u5b57\u7b26\u4e32 str[i] \uff0c \u5982\u679c\u5b83\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217 sub \u662f \u7279\u6027\u5e8f\u5217 \uff0c\u90a3\u4e48str[i] \u672c\u8eab\u4e5f\u662f\u4e00\u4e2a \u7279\u6b8a\u5e8f\u5217 \u3002\uff08\u7279\u6b8a\u5b50\u5e8f\u5217\u5c31\u662f\u662f\u5b57\u7b26\u4e32 str[i] \u672c\u8eab\u72ec\u6709\u7684\u5b50\u5e8f\u5217\uff09\u3002","title":"\u5b50\u5e8f\u5217\u7684\u4e00\u4e9b\u7279\u70b9"},{"location":"algorithm/string/#_4","text":"","title":"\u56de\u6587\u5b57\u7b26\u4e32"},{"location":"algorithm/string/#_5","text":"","title":"\u6700\u957f\u56de\u6587\u5b50\u4e32"},{"location":"algorithm/string/#_6","text":"","title":"\u6700\u957f\u56de\u6587\u5b50\u5e8f\u5217"},{"location":"algorithm/string/#_7","text":"","title":"\u8ba9\u5b57\u7b26\u4e32\u6210\u4e3a\u56de\u6587\u4e32\u7684\u6700\u5c11\u63d2\u5165\u6b21\u6570"},{"location":"front/bootstrap/bootstrap/","text":"","title":"bootstrap \u5b9e\u8df5"},{"location":"front/css/css/","text":"","title":"\u7cbe\u901a CSS"},{"location":"front/es/es/","text":"","title":"ES6-ES11"},{"location":"front/javascript/javascript/","text":"Javascript \u5bf9\u8c61\u3001\u7c7b\u4e0e\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b \u5bf9\u8c61 ECMA-262 \u5c06\u5bf9\u8c61\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u5c5e\u6027\u7684\u65e0\u5e8f\u96c6\u5408\u3002 \u521b\u5efa\u5bf9\u8c61\uff1anew\uff0c\u5bf9\u8c61\u5b57\u9762\u91cf\u3002 \u5c5e\u6027\u7c7b\u578b\uff1a \u6570\u636e\u5c5e\u6027\uff1a[[Configurable]], [[Enumerable]], [[Writeable]], [[Value]]\u3002 \u8bbf\u95ee\u5c5e\u6027\uff1a[[Configurable]], [[Enumerable]], [[Get]], [[Set]\u3002 \u8bfb\u53d6\u5c5e\u6027\u63cf\u8ff0\u7b26\uff1a let descriptor=Object.getOwnPropertyDescriptor(obj,fileName); Object.getOwnPropertyDescriptors(obj); \u5408\u5e76\u5bf9\u8c61 let dest={}; let result=Object.assign(dest,{a:'foo'},{b:'bar'}); \u5bf9\u8c61\u76f8\u7b49\u53ef\u4ee5\u4f7f\u7528 Object.is() \u65b9\u6cd5 \u589e\u5f3a\u5bf9\u8c61\u5199\u6cd5\uff08ECMAScript 6\uff09: \u5c5e\u6027\u7b80\u5199 \u53ef\u8ba1\u7b97\u5c5e\u6027: person[namekey()]=\"ruby\" \u7b80\u5199\u65b9\u6cd5\u540d \u5bf9\u8c61\u89e3\u6784\uff1a \u89e3\u6784\u662f\u628a\u6e90\u5bf9\u8c61\u91cd\u65b0\u8d4b\u503c\u7ed9\u76ee\u6807\u5bf9\u8c61 \u53ef\u4ee5\u5d4c\u5957\u89e3\u6784\uff1a\u5d4c\u5957\u89e3\u6784\u5f0f\u6d45\u590d\u5236\uff0c\u56e0\u6b64\u89e3\u6784\u540e\u7684\u5f15\u7528\uff0c\u5728\u5143\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\u4e2d\u90fd\u662f\u540c\u4e00\u4e2a\u3002 \u65b9\u6cd5\u53c2\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\uff0c\u867d\u7136\u4e0d\u4f1a\u5f71\u54cd arguments \u5bf9\u8c61\uff0c\u4f46\u662f\u53ef\u4ee5\u5728\u65b9\u6cd5\u5185\u4f7f\u7528\u89e3\u6784\u7684\u4e34\u65f6\u53d8\u91cf\u3002 \u7ee7\u627f\u65b9\u5f0f \u57fa\u4e8e\u6784\u9020\u51fd\u6570 \u57fa\u4e8e\u5de5\u5382\u6a21\u5f0f\uff1a \u89e3\u51b3\u521b\u5efa\u591a\u4e2a\u76f8\u4f3c\u5bf9\u8c61\u7684\u95ee\u9898\u3002 \u6ca1\u6709\u89e3\u51b3\u5bf9\u8c61\u6807\u8bc6\u95ee\u9898\u3002 \u6784\u9020\u51fd\u6570 \u6784\u9020\u51fd\u6570\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u6bcf\u4e2a\u51fd\u6570\u53ea\u8981\u4f7f\u7528 new \u8c03\u7528\u5c31\u662f\u6784\u9020\u51fd\u6570\uff0c\u6784\u9020\u51fd\u6570\u4e60\u60ef\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u3002 \u6784\u9020\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u521b\u5efa\u7279\u5b9a\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u6709\u81ea\u5df1\u72ec\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u6784\u9020\u51fd\u6570\u4f1a\u5bfc\u81f4\u5bf9\u8c61\u65b9\u6cd5\u91cd\u590d\u5b9a\u4e49\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u7684\u540c\u540d\u65b9\u6cd5\uff0c\u5176\u5b9e\u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684 Function \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u95ee\u9898\u867d\u7136\u53ef\u4ee5\u901a\u8fc7\u5168\u5c40\u65b9\u6cd5\u5f15\u7528\u6765\u89e3\u51b3\uff0c\u4f46\u662f\u90a3\u6837\u540c\u7c7b\u578b\u7684\u65b9\u6cd5\u65e0\u6cd5\u5f88\u597d\u805a\u5408\u5728\u4e00\u8d77\u3002 \u76d7\u7528\u6784\u9020\u51fd\u6570 function SuperType(){this.colors=[\"red\",\"blue\",\"green\"];} //\u7ee7\u627f SuperType function SubType(){SuperType.call(this);} \u89e3\u51b3\u539f\u578b\u94fe\u4e2d\u539f\u578b\u5f15\u7528\u503c\u5171\u4eab\u95ee\u9898 \u89e3\u51b3\u539f\u578b\u94fe\u4e2d\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u4f20\u53c2\u7684\u95ee\u9898\u3002 \u4f46\u662f\u4e5f\u548c\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\u4e00\u6837\uff0c\u65e0\u6cd5\u89e3\u51b3\u540c\u7c7b\u578b\u5bf9\u8c61\u540c\u540d\u65b9\u6cd5\u91cd\u590d\u5b9a\u4e49\u7684\u95ee\u9898\u3002 \u57fa\u4e8e\u539f\u578b \u539f\u578b\u94fe function SuperType(){this.property=true;} //\u539f\u578b\u65b9\u6cd5 SuperType.protoType.getSuperValue(){return this.property;} function SubType(){this.subProperty=false;} SubType.protoType=new SuperType(); //\u6dfb\u52a0\u5b50\u7c7b\u7684\u65b9\u6cd5 SbuType.protoType.getSubValue=function(){return this.subProperty} let instance=new SubTyep(); console.log(instance.getSuperType());// true \u539f\u578b\u94fe\u662f\u5b9e\u73b0\u7ee7\u627f\u7684\u5f3a\u5927\u5de5\u5177\uff0c\u4f46\u662f\u539f\u578b\u94fe\u4e5f\u6709\u95ee\u9898\uff1a \u539f\u578b\u4e2d\u5305\u542b\u7684\u5f15\u7528\u503c\u4f1a\u5728\u6240\u6709\u5b9e\u4f8b\u95f4\u5171\u4eab\u3002 \u5b50\u7c7b\u578b\u4e0d\u80fd\u5728\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\u7ed9\u7236\u7c7b\u578b\u6784\u9020\u51fd\u6570\u4f20\u9012\u53c2\u6570\u3002 \u539f\u578b\u5f0f\u7ee7\u627f \u5bc4\u751f\u5f0f\u7ee7\u627f \u7ec4\u5408\u7ee7\u627f \u7ec4\u5408\u7ee7\u627f\uff08\u4f2a\u7ecf\u5178\u7ee7\u627f\uff09 function SuperType(name){ this.name=name; this.colors=[\"red\",\"blue\",\"green\"]; } SuperType.protoType.sayName()=function(){conlose.log(this.name);}; //\u5b50\u7c7b\u5148\u4f7f\u7528\u76d7\u7528\u6784\u9020\u51fd\u6570\u5c4f\u853d\u7236\u7c7b\u4e2d\u5c5e\u6027\u3002 function SubType(name,age){ SuperType.call(this,name); this.age=age; } //\u518d\u4f7f\u7528\u539f\u578b\u94fe SubType.protoType=new SuperType(); SubType.protoType.sayAge=function(){conlose.log(this.age);}; \u7ec4\u5408\u7ee7\u627f\u5f25\u8865\u4e86\u539f\u578b\u94fe\u548c\u76d7\u7528\u6784\u9020\u51fd\u6570\u7684\u4e0d\u8db3\uff0c\u662f Javascript \u4e2d\u4f7f\u7528\u6700\u591a\u7684\u7ee7\u627f\u6a21\u5f0f\uff0c\u800c\u4e14\u7ec4\u5408\u7ee7\u627f\u4e5f\u4fdd\u7559 instanceof \u64cd\u4f5c\u7b26\u548c isPrototypeOf() \u65b9\u6cd5\u8bc6\u522b\u5408\u6210\u5bf9\u8c61\u7c7b\u578b\u7684\u80fd\u529b\u3002 \u4f46\u662f\u7ec4\u5408\u7ee7\u627f\u7236\u7c7b\u4e0a\u5c5e\u6027\u662f\u5197\u4f59\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4f1a\u88ab\u5b50\u7c7b\u7684\u540c\u540d\u5c5e\u6027\u6240\u5c4f\u853d\u3002 \u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f \u7ec4\u5408\u7ee7\u627f\u5b58\u5728\u4e00\u5b9a\u7684\u6548\u7387\u95ee\u9898\uff0c\u540c\u6837\u7684\u7236\u7c7b\u6784\u9020\u51fd\u6570\u9700\u8981\u88ab\u8c03\u7528\u4e24\u6b21\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a function inheritPrototype(subType,superType){ let prototype=object(subperType.prototype); prototype.constructor=subType; subType.prototype=prototype; } function SuperType(name){ this.name=name; this.colors=[\"red\",\"blue\",\"green\"]; } SuperType.protoType.sayName()=function(){conlose.log(this.name);}; //\u5b50\u7c7b\u5148\u4f7f\u7528\u76d7\u7528\u6784\u9020\u51fd\u6570\u5c4f\u853d\u7236\u7c7b\u4e2d\u5c5e\u6027\u3002 function SubType(name,age){ SuperType.call(this,name); this.age=age; } //\u8fd9\u4e0a\u9762\u7684\u5168\u90e8\u76f8\u540c inheritPrototype(subType,superType); subType.prototype.sayAge=function(){conlose.log(this.age)} \u7c7b \u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa\u5728 ES5 \u4e4b\u524d\u8981\u5b9e\u73b0\u7ee7\u627f\u662f\u4e00\u4ef6\u5f88\u9ebb\u70e6\u7684\u4e8b\u60c5\uff0c\u867d\u7136\u5f88\u591a\u79cd\u7b56\u7565\uff0c\u4f46\u662f\u6bcf\u79cd\u7b56\u7565\u90fd\u6709\u81ea\u5df1\u7684\u95ee\u9898\u3002ES6 \u5f15\u5165\u4e86\u7c7b\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u5728 ECMAScript \u4e2d\u5f0f\u6ca1\u6709\u6b63\u5f0f\u7684\u7c7b\u8fd9\u4e2a\u7c7b\u578b\u7684\uff0c\u7c7b\u5728 ECMAScript \u4e2d\u5c31\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\u3002 \u7c7b\u53ef\u4ee5\u5305\u542b\uff1a\u6784\u9020\u51fd\u6570\u3001\u5b9e\u4f8b\u65b9\u6cd5\u3001\u83b7\u53d6\u51fd\u6570\u3001\u8bbe\u7f6e\u51fd\u6570\u548c\u9759\u6001\u7c7b\u65b9\u6cd5\uff0c\u4f46\u662f\u8fd9\u4e9b\u90fd\u4e0d\u662f\u5fc5\u9700\u7684\u3002 \u6784\u9020\u51fd\u6570 \u5b9e\u4f8b\u3001\u539f\u578b\u548c\u7c7b\u6210\u5458 \u5b9e\u4f8b\u7684\u6210\u5458\uff1a\u5728\u6784\u9020\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u5728 this \u4e2d\u7684\u6210\u5458\u3002 \u539f\u578b\u7684\u6210\u5458\uff1a\u5728\u7c7b\u5757\u4e2d\u6dfb\u52a0\u7684\u6210\u5458\u5c31\u662f\u539f\u578b\u7684\u6210\u5458\uff0c\u4f46\u662f\u7c7b\u5757\u4e2d\u4e0d\u80fd\u6dfb\u52a0\u539f\u59cb\u503c\u6216\u8005\u5bf9\u8c61\u4f5c\u4e3a\u6210\u5458\u7684\u6570\u636e\u3002 \u7c7b\u7684\u6210\u5458\uff1a\u5728\u7c7b\u5b9a\u4e49\u5916\u9762\uff0c\u901a\u8fc7\u7c7b\u540d\u6dfb\u52a0\u7684\u6210\u5458\u5c31\u662f\u7c7b\u6210\u5458 \u9759\u6001\u7c7b\u65b9\u6cd5\uff1a\u4e00\u4e2a\u7c7b\u53ea\u80fd\u53f3\u4e00\u4e2a\u9759\u6001\u7c7b\u65b9\u6cd5\uff0c\u9759\u6001\u7c7b\u65b9\u6cd5\u4e2d\u7684 this \u662f\u7c7b\u672c\u8eab\uff0c\u9759\u6001\u7c7b\u65b9\u6cd5\u975e\u5e38\u9002\u5408\u505a\u4e3a\u5de5\u5382\u65b9\u6cd5\u3002 \u7ee7\u627f \u7c7b\u7ee7\u627f\u7684\u57fa\u7840\uff1a\u6548\u679c\u548c java \u4e2d\u7684\u4e00\u6837\uff0c\u540c\u65f6\u4e5f\u662f\u5355\u7ee7\u627f\u3002 \u62bd\u8c61\u57fa\u7c7b\uff1a\u5728 ECMAScript \u4e2d\u6ca1\u6709\u652f\u6301\u62bd\u8c61\u57fa\u7c7b\u7684\u8bed\u6cd5\uff0c\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528 new.target \u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd class Vehicle{ constructor(){ //\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u8be5\u7c7b\u5b9e\u4f8b\u5316 if(new.target===Vehicle){ throw new Error('Vehicle cannot be directly instantiated'); } //\u5b50\u7c7b\u5fc5\u9700\u5b9a\u4e49 foo \u6210\u5458 if(this.foo){ throw new Error('Inheriting class must be define foo') } } } \u7c7b\u6df7\u5165 \u4ee3\u7406\u548c\u53cd\u5c04 \u7ea2\u4e66\u4e2d\u8bf4\u4ee3\u7406\u548c C++ \u4e2d\u7684\u6307\u9488\u6709\u70b9\u50cf\uff0c\u4f46\u662f\u6211\u4e2a\u4eba\u89c9\u5f97\u5b83\u548c java \u4e2d\u52a8\u6001\u4ee3\u7406 Proxy \u975e\u5e38\u50cf\uff0c\u4e0d\u8fc7\u6211\u6ca1\u6709\u4ece ECMAScript \u4ee3\u7406\u7684\u5e95\u5c42\u5b9e\u73b0\u4e2d\u533a\u8003\u8651\uff0c\u6240\u4ee5\u4e5f\u4e0d\u77e5\u9053\u6211\u8fd9\u79cd\u60f3\u6cd5\u7684\u5408\u7406\u6027\u6709\u51e0\u5206\u3002 \u521b\u5efa\u4ee3\u7406 const target={foo:'bar'}; //\u88ab\u4ee3\u7406\u7684\u6e90\u5bf9\u8c61 const handler={//\u6355\u83b7\u5668\uff0c\u975e\u5fc5\u9700\u7684 get() {return 'handler override';} } const proxy=new Proxy(target,handler); \u51fd\u6570 \u51fd\u6570\u662f\u4ec0\u4e48 \u51fd\u6570\u5c31\u662f\u4e00\u4e2a Function \u5bf9\u8c61\uff0c\u51fd\u6570\u540d\u662f\u6307\u5411\u8fd9\u4e2a Function \u5bf9\u8c61\u7684\u4e00\u4e2a\u6307\u9488\u3002 \u51fd\u6570\u5bf9\u8c61\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a length\uff1a\u53c2\u6570\u5217\u8868\u7684\u957f\u5ea6\u3002 prototype\uff1a\u51fd\u6570\u7684\u539f\u578b\u3002 \u51fd\u6570\u5bf9\u8c61\u6709\u4e24\u4e2a\u65b9\u6cd5\uff1a apply\uff1a\u6307\u5b9a this \u503c\u6765\u6267\u884c\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f Array \u6216\u8005 Arguments \u5bf9\u8c61\u3002 call\uff1a\u6307\u5b9a this \u503c\u6765\u6267\u884c\u51fd\u6570\uff0c\u540e\u9762\u7684\u53c2\u6570\u662f\u5c55\u5f00\u7684\u5217\u8868\u3002","title":"javascript \u9ad8\u7ea7\u7f16\u7a0b"},{"location":"front/javascript/javascript/#javascript","text":"","title":"Javascript"},{"location":"front/javascript/javascript/#_1","text":"","title":"\u5bf9\u8c61\u3001\u7c7b\u4e0e\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b"},{"location":"front/javascript/javascript/#_2","text":"ECMA-262 \u5c06\u5bf9\u8c61\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u5c5e\u6027\u7684\u65e0\u5e8f\u96c6\u5408\u3002 \u521b\u5efa\u5bf9\u8c61\uff1anew\uff0c\u5bf9\u8c61\u5b57\u9762\u91cf\u3002 \u5c5e\u6027\u7c7b\u578b\uff1a \u6570\u636e\u5c5e\u6027\uff1a[[Configurable]], [[Enumerable]], [[Writeable]], [[Value]]\u3002 \u8bbf\u95ee\u5c5e\u6027\uff1a[[Configurable]], [[Enumerable]], [[Get]], [[Set]\u3002 \u8bfb\u53d6\u5c5e\u6027\u63cf\u8ff0\u7b26\uff1a let descriptor=Object.getOwnPropertyDescriptor(obj,fileName); Object.getOwnPropertyDescriptors(obj); \u5408\u5e76\u5bf9\u8c61 let dest={}; let result=Object.assign(dest,{a:'foo'},{b:'bar'}); \u5bf9\u8c61\u76f8\u7b49\u53ef\u4ee5\u4f7f\u7528 Object.is() \u65b9\u6cd5 \u589e\u5f3a\u5bf9\u8c61\u5199\u6cd5\uff08ECMAScript 6\uff09: \u5c5e\u6027\u7b80\u5199 \u53ef\u8ba1\u7b97\u5c5e\u6027: person[namekey()]=\"ruby\" \u7b80\u5199\u65b9\u6cd5\u540d \u5bf9\u8c61\u89e3\u6784\uff1a \u89e3\u6784\u662f\u628a\u6e90\u5bf9\u8c61\u91cd\u65b0\u8d4b\u503c\u7ed9\u76ee\u6807\u5bf9\u8c61 \u53ef\u4ee5\u5d4c\u5957\u89e3\u6784\uff1a\u5d4c\u5957\u89e3\u6784\u5f0f\u6d45\u590d\u5236\uff0c\u56e0\u6b64\u89e3\u6784\u540e\u7684\u5f15\u7528\uff0c\u5728\u5143\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\u4e2d\u90fd\u662f\u540c\u4e00\u4e2a\u3002 \u65b9\u6cd5\u53c2\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\uff0c\u867d\u7136\u4e0d\u4f1a\u5f71\u54cd arguments \u5bf9\u8c61\uff0c\u4f46\u662f\u53ef\u4ee5\u5728\u65b9\u6cd5\u5185\u4f7f\u7528\u89e3\u6784\u7684\u4e34\u65f6\u53d8\u91cf\u3002","title":"\u5bf9\u8c61"},{"location":"front/javascript/javascript/#_3","text":"","title":"\u7ee7\u627f\u65b9\u5f0f"},{"location":"front/javascript/javascript/#_4","text":"\u57fa\u4e8e\u5de5\u5382\u6a21\u5f0f\uff1a \u89e3\u51b3\u521b\u5efa\u591a\u4e2a\u76f8\u4f3c\u5bf9\u8c61\u7684\u95ee\u9898\u3002 \u6ca1\u6709\u89e3\u51b3\u5bf9\u8c61\u6807\u8bc6\u95ee\u9898\u3002 \u6784\u9020\u51fd\u6570 \u6784\u9020\u51fd\u6570\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u6bcf\u4e2a\u51fd\u6570\u53ea\u8981\u4f7f\u7528 new \u8c03\u7528\u5c31\u662f\u6784\u9020\u51fd\u6570\uff0c\u6784\u9020\u51fd\u6570\u4e60\u60ef\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u3002 \u6784\u9020\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u521b\u5efa\u7279\u5b9a\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u6709\u81ea\u5df1\u72ec\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002 \u6784\u9020\u51fd\u6570\u4f1a\u5bfc\u81f4\u5bf9\u8c61\u65b9\u6cd5\u91cd\u590d\u5b9a\u4e49\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u7684\u540c\u540d\u65b9\u6cd5\uff0c\u5176\u5b9e\u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684 Function \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u95ee\u9898\u867d\u7136\u53ef\u4ee5\u901a\u8fc7\u5168\u5c40\u65b9\u6cd5\u5f15\u7528\u6765\u89e3\u51b3\uff0c\u4f46\u662f\u90a3\u6837\u540c\u7c7b\u578b\u7684\u65b9\u6cd5\u65e0\u6cd5\u5f88\u597d\u805a\u5408\u5728\u4e00\u8d77\u3002 \u76d7\u7528\u6784\u9020\u51fd\u6570 function SuperType(){this.colors=[\"red\",\"blue\",\"green\"];} //\u7ee7\u627f SuperType function SubType(){SuperType.call(this);} \u89e3\u51b3\u539f\u578b\u94fe\u4e2d\u539f\u578b\u5f15\u7528\u503c\u5171\u4eab\u95ee\u9898 \u89e3\u51b3\u539f\u578b\u94fe\u4e2d\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u4f20\u53c2\u7684\u95ee\u9898\u3002 \u4f46\u662f\u4e5f\u548c\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\u4e00\u6837\uff0c\u65e0\u6cd5\u89e3\u51b3\u540c\u7c7b\u578b\u5bf9\u8c61\u540c\u540d\u65b9\u6cd5\u91cd\u590d\u5b9a\u4e49\u7684\u95ee\u9898\u3002","title":"\u57fa\u4e8e\u6784\u9020\u51fd\u6570"},{"location":"front/javascript/javascript/#_5","text":"\u539f\u578b\u94fe function SuperType(){this.property=true;} //\u539f\u578b\u65b9\u6cd5 SuperType.protoType.getSuperValue(){return this.property;} function SubType(){this.subProperty=false;} SubType.protoType=new SuperType(); //\u6dfb\u52a0\u5b50\u7c7b\u7684\u65b9\u6cd5 SbuType.protoType.getSubValue=function(){return this.subProperty} let instance=new SubTyep(); console.log(instance.getSuperType());// true \u539f\u578b\u94fe\u662f\u5b9e\u73b0\u7ee7\u627f\u7684\u5f3a\u5927\u5de5\u5177\uff0c\u4f46\u662f\u539f\u578b\u94fe\u4e5f\u6709\u95ee\u9898\uff1a \u539f\u578b\u4e2d\u5305\u542b\u7684\u5f15\u7528\u503c\u4f1a\u5728\u6240\u6709\u5b9e\u4f8b\u95f4\u5171\u4eab\u3002 \u5b50\u7c7b\u578b\u4e0d\u80fd\u5728\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\u7ed9\u7236\u7c7b\u578b\u6784\u9020\u51fd\u6570\u4f20\u9012\u53c2\u6570\u3002 \u539f\u578b\u5f0f\u7ee7\u627f \u5bc4\u751f\u5f0f\u7ee7\u627f","title":"\u57fa\u4e8e\u539f\u578b"},{"location":"front/javascript/javascript/#_6","text":"\u7ec4\u5408\u7ee7\u627f\uff08\u4f2a\u7ecf\u5178\u7ee7\u627f\uff09 function SuperType(name){ this.name=name; this.colors=[\"red\",\"blue\",\"green\"]; } SuperType.protoType.sayName()=function(){conlose.log(this.name);}; //\u5b50\u7c7b\u5148\u4f7f\u7528\u76d7\u7528\u6784\u9020\u51fd\u6570\u5c4f\u853d\u7236\u7c7b\u4e2d\u5c5e\u6027\u3002 function SubType(name,age){ SuperType.call(this,name); this.age=age; } //\u518d\u4f7f\u7528\u539f\u578b\u94fe SubType.protoType=new SuperType(); SubType.protoType.sayAge=function(){conlose.log(this.age);}; \u7ec4\u5408\u7ee7\u627f\u5f25\u8865\u4e86\u539f\u578b\u94fe\u548c\u76d7\u7528\u6784\u9020\u51fd\u6570\u7684\u4e0d\u8db3\uff0c\u662f Javascript \u4e2d\u4f7f\u7528\u6700\u591a\u7684\u7ee7\u627f\u6a21\u5f0f\uff0c\u800c\u4e14\u7ec4\u5408\u7ee7\u627f\u4e5f\u4fdd\u7559 instanceof \u64cd\u4f5c\u7b26\u548c isPrototypeOf() \u65b9\u6cd5\u8bc6\u522b\u5408\u6210\u5bf9\u8c61\u7c7b\u578b\u7684\u80fd\u529b\u3002 \u4f46\u662f\u7ec4\u5408\u7ee7\u627f\u7236\u7c7b\u4e0a\u5c5e\u6027\u662f\u5197\u4f59\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4f1a\u88ab\u5b50\u7c7b\u7684\u540c\u540d\u5c5e\u6027\u6240\u5c4f\u853d\u3002 \u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f \u7ec4\u5408\u7ee7\u627f\u5b58\u5728\u4e00\u5b9a\u7684\u6548\u7387\u95ee\u9898\uff0c\u540c\u6837\u7684\u7236\u7c7b\u6784\u9020\u51fd\u6570\u9700\u8981\u88ab\u8c03\u7528\u4e24\u6b21\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a function inheritPrototype(subType,superType){ let prototype=object(subperType.prototype); prototype.constructor=subType; subType.prototype=prototype; } function SuperType(name){ this.name=name; this.colors=[\"red\",\"blue\",\"green\"]; } SuperType.protoType.sayName()=function(){conlose.log(this.name);}; //\u5b50\u7c7b\u5148\u4f7f\u7528\u76d7\u7528\u6784\u9020\u51fd\u6570\u5c4f\u853d\u7236\u7c7b\u4e2d\u5c5e\u6027\u3002 function SubType(name,age){ SuperType.call(this,name); this.age=age; } //\u8fd9\u4e0a\u9762\u7684\u5168\u90e8\u76f8\u540c inheritPrototype(subType,superType); subType.prototype.sayAge=function(){conlose.log(this.age)}","title":"\u7ec4\u5408\u7ee7\u627f"},{"location":"front/javascript/javascript/#_7","text":"\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa\u5728 ES5 \u4e4b\u524d\u8981\u5b9e\u73b0\u7ee7\u627f\u662f\u4e00\u4ef6\u5f88\u9ebb\u70e6\u7684\u4e8b\u60c5\uff0c\u867d\u7136\u5f88\u591a\u79cd\u7b56\u7565\uff0c\u4f46\u662f\u6bcf\u79cd\u7b56\u7565\u90fd\u6709\u81ea\u5df1\u7684\u95ee\u9898\u3002ES6 \u5f15\u5165\u4e86\u7c7b\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u5728 ECMAScript \u4e2d\u5f0f\u6ca1\u6709\u6b63\u5f0f\u7684\u7c7b\u8fd9\u4e2a\u7c7b\u578b\u7684\uff0c\u7c7b\u5728 ECMAScript \u4e2d\u5c31\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\u3002 \u7c7b\u53ef\u4ee5\u5305\u542b\uff1a\u6784\u9020\u51fd\u6570\u3001\u5b9e\u4f8b\u65b9\u6cd5\u3001\u83b7\u53d6\u51fd\u6570\u3001\u8bbe\u7f6e\u51fd\u6570\u548c\u9759\u6001\u7c7b\u65b9\u6cd5\uff0c\u4f46\u662f\u8fd9\u4e9b\u90fd\u4e0d\u662f\u5fc5\u9700\u7684\u3002","title":"\u7c7b"},{"location":"front/javascript/javascript/#_8","text":"","title":"\u6784\u9020\u51fd\u6570"},{"location":"front/javascript/javascript/#_9","text":"\u5b9e\u4f8b\u7684\u6210\u5458\uff1a\u5728\u6784\u9020\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u5728 this \u4e2d\u7684\u6210\u5458\u3002 \u539f\u578b\u7684\u6210\u5458\uff1a\u5728\u7c7b\u5757\u4e2d\u6dfb\u52a0\u7684\u6210\u5458\u5c31\u662f\u539f\u578b\u7684\u6210\u5458\uff0c\u4f46\u662f\u7c7b\u5757\u4e2d\u4e0d\u80fd\u6dfb\u52a0\u539f\u59cb\u503c\u6216\u8005\u5bf9\u8c61\u4f5c\u4e3a\u6210\u5458\u7684\u6570\u636e\u3002 \u7c7b\u7684\u6210\u5458\uff1a\u5728\u7c7b\u5b9a\u4e49\u5916\u9762\uff0c\u901a\u8fc7\u7c7b\u540d\u6dfb\u52a0\u7684\u6210\u5458\u5c31\u662f\u7c7b\u6210\u5458 \u9759\u6001\u7c7b\u65b9\u6cd5\uff1a\u4e00\u4e2a\u7c7b\u53ea\u80fd\u53f3\u4e00\u4e2a\u9759\u6001\u7c7b\u65b9\u6cd5\uff0c\u9759\u6001\u7c7b\u65b9\u6cd5\u4e2d\u7684 this \u662f\u7c7b\u672c\u8eab\uff0c\u9759\u6001\u7c7b\u65b9\u6cd5\u975e\u5e38\u9002\u5408\u505a\u4e3a\u5de5\u5382\u65b9\u6cd5\u3002","title":"\u5b9e\u4f8b\u3001\u539f\u578b\u548c\u7c7b\u6210\u5458"},{"location":"front/javascript/javascript/#_10","text":"\u7c7b\u7ee7\u627f\u7684\u57fa\u7840\uff1a\u6548\u679c\u548c java \u4e2d\u7684\u4e00\u6837\uff0c\u540c\u65f6\u4e5f\u662f\u5355\u7ee7\u627f\u3002 \u62bd\u8c61\u57fa\u7c7b\uff1a\u5728 ECMAScript \u4e2d\u6ca1\u6709\u652f\u6301\u62bd\u8c61\u57fa\u7c7b\u7684\u8bed\u6cd5\uff0c\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528 new.target \u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd class Vehicle{ constructor(){ //\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u8be5\u7c7b\u5b9e\u4f8b\u5316 if(new.target===Vehicle){ throw new Error('Vehicle cannot be directly instantiated'); } //\u5b50\u7c7b\u5fc5\u9700\u5b9a\u4e49 foo \u6210\u5458 if(this.foo){ throw new Error('Inheriting class must be define foo') } } } \u7c7b\u6df7\u5165","title":"\u7ee7\u627f"},{"location":"front/javascript/javascript/#_11","text":"\u7ea2\u4e66\u4e2d\u8bf4\u4ee3\u7406\u548c C++ \u4e2d\u7684\u6307\u9488\u6709\u70b9\u50cf\uff0c\u4f46\u662f\u6211\u4e2a\u4eba\u89c9\u5f97\u5b83\u548c java \u4e2d\u52a8\u6001\u4ee3\u7406 Proxy \u975e\u5e38\u50cf\uff0c\u4e0d\u8fc7\u6211\u6ca1\u6709\u4ece ECMAScript \u4ee3\u7406\u7684\u5e95\u5c42\u5b9e\u73b0\u4e2d\u533a\u8003\u8651\uff0c\u6240\u4ee5\u4e5f\u4e0d\u77e5\u9053\u6211\u8fd9\u79cd\u60f3\u6cd5\u7684\u5408\u7406\u6027\u6709\u51e0\u5206\u3002","title":"\u4ee3\u7406\u548c\u53cd\u5c04"},{"location":"front/javascript/javascript/#_12","text":"const target={foo:'bar'}; //\u88ab\u4ee3\u7406\u7684\u6e90\u5bf9\u8c61 const handler={//\u6355\u83b7\u5668\uff0c\u975e\u5fc5\u9700\u7684 get() {return 'handler override';} } const proxy=new Proxy(target,handler);","title":"\u521b\u5efa\u4ee3\u7406"},{"location":"front/javascript/javascript/#_13","text":"","title":"\u51fd\u6570"},{"location":"front/javascript/javascript/#_14","text":"\u51fd\u6570\u5c31\u662f\u4e00\u4e2a Function \u5bf9\u8c61\uff0c\u51fd\u6570\u540d\u662f\u6307\u5411\u8fd9\u4e2a Function \u5bf9\u8c61\u7684\u4e00\u4e2a\u6307\u9488\u3002 \u51fd\u6570\u5bf9\u8c61\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a length\uff1a\u53c2\u6570\u5217\u8868\u7684\u957f\u5ea6\u3002 prototype\uff1a\u51fd\u6570\u7684\u539f\u578b\u3002 \u51fd\u6570\u5bf9\u8c61\u6709\u4e24\u4e2a\u65b9\u6cd5\uff1a apply\uff1a\u6307\u5b9a this \u503c\u6765\u6267\u884c\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f Array \u6216\u8005 Arguments \u5bf9\u8c61\u3002 call\uff1a\u6307\u5b9a this \u503c\u6765\u6267\u884c\u51fd\u6570\uff0c\u540e\u9762\u7684\u53c2\u6570\u662f\u5c55\u5f00\u7684\u5217\u8868\u3002","title":"\u51fd\u6570\u662f\u4ec0\u4e48"},{"location":"front/jsdom/jsdom/","text":"\u58eb\u5927\u592b\u5927\u5e08\u5085\u4f46\u662f","title":"JS DOM \u7f16\u7a0b\u827a\u672f"},{"location":"front/node/node/","text":"","title":"node \u4e0e Express \u5f00\u53d1"},{"location":"front/react/react/","text":"","title":"React \u5168\u5bb6\u6876\uff1a\u524d\u7aef\u5f00\u53d1\u4e0e\u5b9e\u4f8b\u8be6\u89e3"},{"location":"front/typescript/typescript/","text":"","title":"typescript"},{"location":"front/webpack/webpack/","text":"","title":"Webpack"},{"location":"ide/eclipse/","text":"\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\u7684\u7f16\u7801 Eclipse \u9ed8\u8ba4\u4f7f\u7528\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u7f16\u7801\uff0cwindows \u4e0a\u662f GBK\uff0c\u5efa\u8bae\u6539\u6210 UTF-8\uff1b \u4fee\u6539 workspace \u7f16\u7801\uff1aWindow-\u300bPreferences-\u300b\u5de6\u8fb9\u9009\u62e9 General/Workspace-\u300b\u53f3\u8fb9 Text file encoding \u9009\u62e9 UTF-8\u3002 \u4fee\u6539 CSS\u3001HTML\u3001JS \u6587\u4ef6\u7684\u7f16\u7801\uff1aWindow-\u300bPreferences-\u300b\u5de6\u8fb9\u9009\u62e9General/Web-\u300b\u5206\u522b\u70b9\u51fb CSS\u3001HTML\u3001JS \u9009\u9879\uff0c\u5728\u5b83\u4eec\u7684\u53f3\u8fb9\u9009\u62e9 UTF-8 \u7f16\u7801\u3002 Eclipse \u4fee\u6539 Context root Eclipse \u4f1a\u9ed8\u8ba4\u4f7f\u7528\u9879\u76ee\u540d\u79f0\u4f5c\u4e3a Web \u5e94\u7528\u7a0b\u5e8f\u7684\u73af\u5883\u8def\u5f84\uff08Context root\uff09\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\uff1a \u901a\u8fc7 eclipse \u4fee\u6539 Context root\uff1a\u53f3\u952e\u70b9\u51fb\u9879\u76ee -\u300bProperties -\u300bWeb Project Settings -\u300b\u53f3\u8fb9 Context root \u8f93\u5165\u6846\u8f93\u5165\u65b0\u7684 Context root. Servlet 4.0 \u5f00\u59cb\uff0c\u53ef\u4ee5\u5728 Web.xml \u4e2d\u4f7f\u7528 <default-context-path> \u6765\u5efa\u8bae\u9ed8\u8ba4\u7684 Context root\uff0c\u7136\u800c\u8003\u8651\u5230\u5df2\u7ecf\u65e2\u6709\u5bb9\u5668\u7684\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u5b9e\u73b0\u5382\u5546\u53ef\u4ee5\u4e0d\u7528\u7406\u4f1a\u8fd9\u4e2a\u8bbe\u5b9a\u3002","title":"Eclipse"},{"location":"ide/eclipse/#_1","text":"Eclipse \u9ed8\u8ba4\u4f7f\u7528\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u7f16\u7801\uff0cwindows \u4e0a\u662f GBK\uff0c\u5efa\u8bae\u6539\u6210 UTF-8\uff1b \u4fee\u6539 workspace \u7f16\u7801\uff1aWindow-\u300bPreferences-\u300b\u5de6\u8fb9\u9009\u62e9 General/Workspace-\u300b\u53f3\u8fb9 Text file encoding \u9009\u62e9 UTF-8\u3002 \u4fee\u6539 CSS\u3001HTML\u3001JS \u6587\u4ef6\u7684\u7f16\u7801\uff1aWindow-\u300bPreferences-\u300b\u5de6\u8fb9\u9009\u62e9General/Web-\u300b\u5206\u522b\u70b9\u51fb CSS\u3001HTML\u3001JS \u9009\u9879\uff0c\u5728\u5b83\u4eec\u7684\u53f3\u8fb9\u9009\u62e9 UTF-8 \u7f16\u7801\u3002","title":"\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\u7684\u7f16\u7801"},{"location":"ide/eclipse/#eclipse-context-root","text":"Eclipse \u4f1a\u9ed8\u8ba4\u4f7f\u7528\u9879\u76ee\u540d\u79f0\u4f5c\u4e3a Web \u5e94\u7528\u7a0b\u5e8f\u7684\u73af\u5883\u8def\u5f84\uff08Context root\uff09\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\uff1a \u901a\u8fc7 eclipse \u4fee\u6539 Context root\uff1a\u53f3\u952e\u70b9\u51fb\u9879\u76ee -\u300bProperties -\u300bWeb Project Settings -\u300b\u53f3\u8fb9 Context root \u8f93\u5165\u6846\u8f93\u5165\u65b0\u7684 Context root. Servlet 4.0 \u5f00\u59cb\uff0c\u53ef\u4ee5\u5728 Web.xml \u4e2d\u4f7f\u7528 <default-context-path> \u6765\u5efa\u8bae\u9ed8\u8ba4\u7684 Context root\uff0c\u7136\u800c\u8003\u8651\u5230\u5df2\u7ecf\u65e2\u6709\u5bb9\u5668\u7684\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u5b9e\u73b0\u5382\u5546\u53ef\u4ee5\u4e0d\u7528\u7406\u4f1a\u8fd9\u4e2a\u8bbe\u5b9a\u3002","title":"Eclipse \u4fee\u6539 Context root"},{"location":"ide/intellij_idea/","text":"","title":"Intellij IDEA"},{"location":"ide/vim/","text":"VIM \u6700\u8fd1\u591a\u7ec3\u7684\u5c0f\u6280\u5de7 \u591a\u4f7f\u7528 f\\F \u6765\u8df3\u8fc7\u6216\u8005\u8fdb\u5165\u62ec\u53f7\uff0c\u6807\u7b7e\u4e4b\u7c7b\u7684\u3002 \u591a\u4f7f\u7528 \uff08 \u548c \uff09 \u6765\u79fb\u52a8\u5230\u4e0b\u4e00\u53e5\uff0c\u591a\u4f7f\u7528 { \u548c } \u6765\u79fb\u52a8\u4e0b\u4e00\u6bb5\u548c\u4e0a\u4e00\u6bb5\u3002 D \u5219\u76f8\u5f53\u4e8e d$\uff0c\u5220\u9664\u5230\u884c\u5c3e \uff0c C \u5219\u76f8\u5f53\u4e8e c$\uff0c\u5220\u9664\u5230\u884c\u5c3e\u7136\u540e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\u3002 I \u5219\u76f8\u5f53\u4e8e ^i\uff0c\u628a\u5149\u6807\u79fb\u5230\u884c\u9996\u975e\u7a7a\u767d\u5b57\u7b26\u4e0a\u7136\u540e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\u3002 S \u76f8\u5f53\u4e8e cc\uff0c\u66ff\u6362\u6574\u884c\u7684\u5185\u5bb9 A \u76f8\u5f53\u4e8e $a\uff0c\u628a\u5149\u6807\u79fb\u5230\u884c\u5c3e\u7136\u540e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\u3002 dw \u548c diw \u548c daw \u7684\u533a\u522b\u3002 di\uff08 \u548c da\uff08\u7684\u533a\u522b\u3002 zz \u5f53\u524d\u884c\u6eda\u52a8\u5230\u5c4f\u5e55\u7684\u4e2d\u90e8\uff08\u7279\u522b\u6709\u7528\uff09\uff0czt \u9876\u90e8\uff0czb \u5e95\u90e8\u3002 ; \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u67e5\u627e\uff08f\u3001t \u7b49\uff09\u64cd\u4f5c , \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u67e5\u627e\u64cd\u4f5c\uff0c\u53cd\u65b9\u5411 n \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u64cd\u4f5c\uff08/ \u548c ?\uff09N \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u64cd\u4f5c\uff08/ \u548c ?\uff09\uff0c\u53cd\u65b9\u5411 \u6b63\u5219\u8868\u8fbe\u5f0f ~ \u5339\u914d\u4e0a\u4e00\u6b21\u66ff\u6362\u7684\u5b57\u7b26\u4e32\uff0c\u5373\u5982\u679c\u4e0a\u4e00\u6b21\u4f60\u628a\u201cfoo\u201d\u66ff\u6362\u6210\u4e86\u201cbar\u201d\uff0c\u90a3 ~ \u5c31\u5339\u914d\u201cbar\u201d\u3002 ( \u548c ) \u62ec\u8d77\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5c06\u5176\u7ec4\u6210\u4e3a\u5355\u4e2a\u5339\u914d\u539f\uff1a\u5982 (foo)\\? \u53ef\u4ee5\u8868\u793a\u5355\u8bcd\u201cfoo\u201d\u51fa\u73b0\u96f6\u6b21\u6216\u4e00\u6b21\u3002( \u548c ) \u8fd8\u6709\u4e00\u4e2a\u9644\u52a0\u4f5c\u7528\uff0c\u662f\u6355\u83b7\u5339\u914d\u7684\u5185\u5bb9\uff0c\u6309 ( \u51fa\u73b0\u7684\u5148\u540e\u987a\u5e8f\uff0c\u53ef\u4ee5\u7528 \\1\u3001\\2 \u5230 \\9 \u6765\u5f15\u7528, \u6574\u4f7f\u7528\u5339\u914d\u5185\u5bb9\u7684\u8bdd\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 \\0 \u6216 & \u3002\u5982\u679c\u4f60\u4e0d\u9700\u8981\u6355\u83b7\u5339\u914d\u5185\u5bb9\u7684\u8bdd\uff0c\u7528 \\%( \u548c ) \u7684\u6027\u80fd\u66f4\u9ad8\u3002 \\ \\< \u5339\u914d\u5355\u8bcd\u7684\u5f00\u5934 \\ > \u5339\u914d\u5355\u8bcd\u7684\u7ed3\u5c3e \\s \u5339\u914d\u7a7a\u767d\u5b57\u7b26 \\S \u5339\u914d\u975e\u7a7a\u767d\u5b57\u7b26 \\ \\c \u5ffd\u7565\u5927\u5c0f\u5199\u8fdb\u884c\u5339\u914d \u88ab\u8a89\u4e3a\u6700\u6709\u7528\u7684 Vim \u63d0\u793a\uff0c\u662f\u628a\u5149\u6807\u79fb\u5230\u5e0c\u671b\u641c\u7d22\u7684\u5173\u952e\u5b57\u4e0a\uff0c\u7136\u540e\u6309\u4e0b * \u952e\u3002Vim \u4f1a\u63d0\u53d6\u5149\u6807\u4e0b\u7684\u5173\u952e\u5b57\uff0c\u5e76\u81ea\u52a8\u6dfb\u52a0 \\< \u548c > \u8fdb\u884c\u641c\u7d22\u3002 *\u3001\\?\u3001+ \u548c {} \u90fd\u5c5e\u4e8e\u6700\u957f\u5339\u914d\uff08\u4e5f\u53eb\u8d2a\u5a6a\u5339\u914d\uff09 \u5728 Vim \u91cc\uff0c\u6700\u77ed\u5339\u914d\u53ea\u6709\u4e00\u79cd\u5f62\u5f0f\uff0c{-n,m}\uff0c\u5176\u610f\u4e49\u548c\u4e4b\u524d\u8bf4\u7684 {n,m} \u57fa\u672c\u76f8\u540c\uff0c\u4f46\u7ed3\u679c\u662f\u8f83\u77ed\u800c\u975e\u8f83\u957f\u7684\u5b57\u7b26\u4e32\u3002 \u4f7f\u7528 / \u641c\u7d22\uff0c\u4fee\u6539 \u914d\u5408 n \u548c .\u5b8c\u6210\u6279\u91cf\u4fee\u6539 \u7b2c\u4e8c\u8fd1\u8981\u7ec3\u4e60\u7684\u4e00\u4e9b\u5c0f\u6280\u5de7 \u591a\u6587\u672c\u4e4b\u95f4\u7c98\u8d34 \u5982\u679c\u662f gvim\uff0c\u53ef\u4ee5\u4f7f\u7528\u9f20\u6807\u53f3\u952e\u7c98\u8d34\uff0c\u6216\u8005\u4f7f\u7528 \\<S-Insert> \u6700\u8fd1\u4e24\u4e2a\u6587\u672c\u4e4b\u95f4\u76f8\u4e92\u5207\u6362 \\<C-^> \u591a\u7a97\u53e3\u7684\u4f7f\u7528 \u4f7f\u7528 vs \u8fdb\u884c\u5782\u76f4\u5206\u9694\uff0c\u4f7f\u7528 sp \u8fdb\u884c\u6c34\u5e73\u5206\u9694 \u4f7f\u7528 \\<C-W> w \u8fdb\u884c\u7a97\u53e3\u4e4b\u95f4\u7684\u8df3\u8f6c\u3002 \\<C-W> n \u6216 :new \u6253\u5f00\u4e00\u4e2a\u65b0\u7a97\u53e3 \\<C-W> n \u6216 :close \u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff1b\u5f53\u524d\u7a97\u53e3\u5982\u679c\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u5219\u65e0\u6548 \\<C-W>q \u6216 :quit \u9000\u51fa\u5f53\u524d\u7a97\u53e3\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u7a97\u53e3\u9000\u51fa\u65f6\u5219\u9000\u51fa Vim \\<C-W>o \u6216 :only \u53ea\u4fdd\u7559\u5f53\u524d\u7a97\u53e3\uff0c\u5173\u95ed\u5176\u4ed6\u6240\u6709\u7a97\u53e3 \u591a\u6807\u7b7e\u9875\u7684\u4f7f\u7528 \u5728\u5df2\u6709\u547d\u4ee4\u884c\u6a21\u5f0f\u547d\u4ee4\u524d\u52a0 tab\u2423 \u53ef\u4ee5\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u5c55\u793a\u547d\u4ee4\u7684\u7ed3\u679c\uff0c\u5982 :tab help \u53ef\u4ee5\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u5e2e\u52a9\uff0c:tab split \u53ef\u4ee5\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u5f53\u524d\u7f13\u51b2\u533a :tabs \u5c55\u793a\u6240\u6709\u6807\u7b7e\u9875\u7684\u5217\u8868 :tabnew \u6216 :tabedit \u53ef\u4ee5\u6253\u5f00\u4e00\u4e2a\u7a7a\u767d\u7684\u65b0\u6807\u7b7e\u9875\uff0c\u540e\u9762\u6709\u6587\u4ef6\u540d\u7684\u8bdd\u5219\u6253\u5f00\u8be5\u6587\u4ef6 :tabclose \u53ef\u4ee5\u5173\u95ed\u5f53\u524d\u6807\u7b7e\u9875\uff08\u5982\u679c\u6807\u7b7e\u9875\u91cc\u53ea\u6709\u4e00\u4e2a\u7a97\u53e3\uff0c\u4f7f\u7528\u7a97\u53e3\u5173\u95ed\u547d\u4ee4 c \u5e94\u8be5\u66f4\u5feb\uff09 :tabnext\u3001gt \u6216 \u53ef\u4ee5\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6807\u7b7e\u9875 :tabNext\u3001:tabprevious \u3001gT \u6216 \u53ef\u4ee5\u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u6807\u7b7e\u9875 :tabfirst \u6216 :tabrewind \u5207\u6362\u5230\u7b2c\u4e00\u4e2a\u6807\u7b7e\u9875 :tablast \u5207\u6362\u5230\u6700\u540e\u4e00\u4e2a\u6807\u7b7e\u9875 \u7b2c\u4e09\u8fd1\u8981\u7ec3\u4e60\u7684\u4e00\u4e9b\u5c0f\u6280\u5de7 \u591a\u6587\u672c\u7c98\u8d34 :args\uff1a\u53ef\u4ee5\u663e\u793a\u201c\u53c2\u6570\u201d\uff0c\u5373\u9700\u8981\u7f16\u8f91\u7684\u591a\u4e2a\u6587\u4ef6\u7684\u5217\u8868: :args \u6587\u4ef6\u540d\uff1a\u4f7f\u7528\u65b0\u7684\u6587\u4ef6\u540d\u66ff\u6362\u53c2\u6570\u5217\u8868 :next\uff08\u53ef\u7f29\u5199\u4e3a :n\uff09\uff1a\u6253\u5f00\u4e0b\u4e00\u4e2a\u6587\u4ef6\uff1b\u5982\u5f53\u524d\u6587\u4ef6\u4fee\u6539\uff08\u672a\u5b58\u76d8\uff09\u5219\u4f1a\u62a5\u9519\u4e2d\u6b62\uff0c\u4f46\u5982\u679c\u547d\u4ee4\u540e\u9762\u52a0 ! \u5219\u4f1a\u653e\u5f03\u4fee\u6539\u5185\u5bb9\uff0c\u5176\u4ed6\u547d\u4ee4\u4e5f\u7c7b\u4f3c :Next\uff08\u7f29\u5199 :N\uff09\u6216 :previous\uff08\u7f29\u5199 :prev\uff09\uff1a\u6253\u5f00\u4e0a\u4e00\u4e2a\u6587\u4ef6 :first \u6216:rewind\uff1a\u56de\u5230\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6587\u4ef6 :last\uff1a\u6253\u5f00\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u6587\u4ef6 \u4f7f\u7528\u8fd9\u4e9b\u547d\u4ee4\uff0c\u6211\u4eec\u7684\u5de5\u4f5c\u6d41\u5f53\u7136\u5c31\u4f1a\u53d1\u751f\u53d8\u5316\u4e86\uff1a \u5728\u7ec8\u7aef\u91cc\u8fdb\u5165\u5230\u76ee\u6807\u76ee\u5f55\u4e0b \u4f7f\u7528 vim .cpp .h \u6216 gvim .cpp .h \u6765\u6253\u5f00\u9700\u8981\u7f16\u8f91\u7684\u6587\u4ef6 \u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f7f\u7528\u4e4b\u524d\u7684\u65b9\u6cd5\u8d34\u5165\u6240\u9700\u7684\u6587\u672c \u4f7f\u7528 V \u8fdb\u5165\u884c\u9009\u62e9\u7684\u53ef\u89c6\u6a21\u5f0f\uff0c\u79fb\u52a8\u5149\u6807\u9009\u4e2d\u6240\u9700\u7684\u6587\u672c\uff0c\u7136\u540e\u4f7f\u7528 y \u590d\u5236\u9009\u4e2d\u7684\u5404\u884c \u6267\u884c\u547d\u4ee4 :set autowrite\uff0c\u544a\u8bc9 Vim \u5728\u5207\u6362\u6587\u4ef6\u65f6\u81ea\u52a8\u5b58\u76d8 \u6267\u884c\u547d\u4ee4 :n|normal ggP\uff0c\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6587\u4ef6\u5e76\u6267\u884c\u6b63\u5e38\u6a21\u5f0f\u547d\u4ee4 ggP\uff0c\u8df3\u8f6c\u5230\u6587\u4ef6\u5f00\u5934\u5e76\u8d34\u5165\u6587\u672c\u786e\u8ba4 \u4fee\u6539\u65e0\u8bef\u540e\uff0c\u952e\u5165 :\u3001\u4e0a\u7bad\u5934\u548c\u56de\u8f66\uff0c\u91cd\u590d\u6267\u884c\u4e0a\u9762\u7684\u547d\u4ee4 \u5f85 Vim \u62a5\u9519\u8bf4\u5df2\u7ecf\u5728\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u91cc\uff0c\u4f7f\u7528 :w \u5b58\u76d8\uff0c\u6216 :wq\uff08\u6291\u6216\u66f4\u5feb\u7684 ZZ\uff09\u5b58\u76d8\u9000\u51fa NERDTree \u7684\u4f7f\u7528 \u4ee5\u540e\u53ef\u80fd\u4f1a\u7ec3\u7684\u5c0f\u6280\u5de7 \u4f7f\u7528 vim \u547d\u4ee4 + G \u547d\u4ee4\u8df3\u8f6c\u5230\u6587\u672c\u7684\u6307\u5b9a\u884c\uff0c\u6bd4\u5982\u8c03\u8bd5\u7684\u65f6\u5019\u3002\uff08\u7b2c\u4e09\u7ae0\uff09 \u4e00\u4e9b\u811a\u672c \u542f\u7528\u9f20\u6807\u652f\u6301 if has('mouse') if has('gui_running') || (&term =~ 'xterm' && !has('mac')) set mouse=a else set mouse=nvi endif endif \u8bbe\u7f6e\u5b57\u4f53 if has('gui_running') set guifont=Courier_New:h10 endif vim \u8f6f\u4ef6\u5305\u7ba1\u7406 if exists('g:loaded_minpac') \" Minpac is loaded. call minpac#init() call minpac#add('k-takata/minpac', {'type': 'opt'}) \" Other plugins call minpac#add('tpope/vim-eunuch') call minpac#add('yegappan/mru') endif if has('eval') \" Minpac commands command! PackUpdate packadd minpac | source $MYVIMRC | call minpac#update() command! PackClean packadd minpac | source $MYVIMRC | call minpac#clean() command! PackStatus packadd minpac | source $MYVIMRC | call minpac#status() endif \u6253\u5f00\u4e00\u4e2a\u5df2\u7ecf\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u81ea\u52a8\u628a\u65e7\u7684\u7a97\u53e3\u5207\u6362\u5230\u6700\u524d\u9762 if v:version >= 800 packadd! editexistingendif","title":"VIM"},{"location":"ide/vim/#vim","text":"","title":"VIM"},{"location":"ide/vim/#_1","text":"\u591a\u4f7f\u7528 f\\F \u6765\u8df3\u8fc7\u6216\u8005\u8fdb\u5165\u62ec\u53f7\uff0c\u6807\u7b7e\u4e4b\u7c7b\u7684\u3002 \u591a\u4f7f\u7528 \uff08 \u548c \uff09 \u6765\u79fb\u52a8\u5230\u4e0b\u4e00\u53e5\uff0c\u591a\u4f7f\u7528 { \u548c } \u6765\u79fb\u52a8\u4e0b\u4e00\u6bb5\u548c\u4e0a\u4e00\u6bb5\u3002 D \u5219\u76f8\u5f53\u4e8e d$\uff0c\u5220\u9664\u5230\u884c\u5c3e \uff0c C \u5219\u76f8\u5f53\u4e8e c$\uff0c\u5220\u9664\u5230\u884c\u5c3e\u7136\u540e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\u3002 I \u5219\u76f8\u5f53\u4e8e ^i\uff0c\u628a\u5149\u6807\u79fb\u5230\u884c\u9996\u975e\u7a7a\u767d\u5b57\u7b26\u4e0a\u7136\u540e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\u3002 S \u76f8\u5f53\u4e8e cc\uff0c\u66ff\u6362\u6574\u884c\u7684\u5185\u5bb9 A \u76f8\u5f53\u4e8e $a\uff0c\u628a\u5149\u6807\u79fb\u5230\u884c\u5c3e\u7136\u540e\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\u3002 dw \u548c diw \u548c daw \u7684\u533a\u522b\u3002 di\uff08 \u548c da\uff08\u7684\u533a\u522b\u3002 zz \u5f53\u524d\u884c\u6eda\u52a8\u5230\u5c4f\u5e55\u7684\u4e2d\u90e8\uff08\u7279\u522b\u6709\u7528\uff09\uff0czt \u9876\u90e8\uff0czb \u5e95\u90e8\u3002 ; \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u67e5\u627e\uff08f\u3001t \u7b49\uff09\u64cd\u4f5c , \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u67e5\u627e\u64cd\u4f5c\uff0c\u53cd\u65b9\u5411 n \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u64cd\u4f5c\uff08/ \u548c ?\uff09N \u91cd\u590d\u6700\u8fd1\u7684\u5b57\u7b26\u4e32\u67e5\u627e\u64cd\u4f5c\uff08/ \u548c ?\uff09\uff0c\u53cd\u65b9\u5411 \u6b63\u5219\u8868\u8fbe\u5f0f ~ \u5339\u914d\u4e0a\u4e00\u6b21\u66ff\u6362\u7684\u5b57\u7b26\u4e32\uff0c\u5373\u5982\u679c\u4e0a\u4e00\u6b21\u4f60\u628a\u201cfoo\u201d\u66ff\u6362\u6210\u4e86\u201cbar\u201d\uff0c\u90a3 ~ \u5c31\u5339\u914d\u201cbar\u201d\u3002 ( \u548c ) \u62ec\u8d77\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5c06\u5176\u7ec4\u6210\u4e3a\u5355\u4e2a\u5339\u914d\u539f\uff1a\u5982 (foo)\\? \u53ef\u4ee5\u8868\u793a\u5355\u8bcd\u201cfoo\u201d\u51fa\u73b0\u96f6\u6b21\u6216\u4e00\u6b21\u3002( \u548c ) \u8fd8\u6709\u4e00\u4e2a\u9644\u52a0\u4f5c\u7528\uff0c\u662f\u6355\u83b7\u5339\u914d\u7684\u5185\u5bb9\uff0c\u6309 ( \u51fa\u73b0\u7684\u5148\u540e\u987a\u5e8f\uff0c\u53ef\u4ee5\u7528 \\1\u3001\\2 \u5230 \\9 \u6765\u5f15\u7528, \u6574\u4f7f\u7528\u5339\u914d\u5185\u5bb9\u7684\u8bdd\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 \\0 \u6216 & \u3002\u5982\u679c\u4f60\u4e0d\u9700\u8981\u6355\u83b7\u5339\u914d\u5185\u5bb9\u7684\u8bdd\uff0c\u7528 \\%( \u548c ) \u7684\u6027\u80fd\u66f4\u9ad8\u3002 \\ \\< \u5339\u914d\u5355\u8bcd\u7684\u5f00\u5934 \\ > \u5339\u914d\u5355\u8bcd\u7684\u7ed3\u5c3e \\s \u5339\u914d\u7a7a\u767d\u5b57\u7b26 \\S \u5339\u914d\u975e\u7a7a\u767d\u5b57\u7b26 \\ \\c \u5ffd\u7565\u5927\u5c0f\u5199\u8fdb\u884c\u5339\u914d \u88ab\u8a89\u4e3a\u6700\u6709\u7528\u7684 Vim \u63d0\u793a\uff0c\u662f\u628a\u5149\u6807\u79fb\u5230\u5e0c\u671b\u641c\u7d22\u7684\u5173\u952e\u5b57\u4e0a\uff0c\u7136\u540e\u6309\u4e0b * \u952e\u3002Vim \u4f1a\u63d0\u53d6\u5149\u6807\u4e0b\u7684\u5173\u952e\u5b57\uff0c\u5e76\u81ea\u52a8\u6dfb\u52a0 \\< \u548c > \u8fdb\u884c\u641c\u7d22\u3002 *\u3001\\?\u3001+ \u548c {} \u90fd\u5c5e\u4e8e\u6700\u957f\u5339\u914d\uff08\u4e5f\u53eb\u8d2a\u5a6a\u5339\u914d\uff09 \u5728 Vim \u91cc\uff0c\u6700\u77ed\u5339\u914d\u53ea\u6709\u4e00\u79cd\u5f62\u5f0f\uff0c{-n,m}\uff0c\u5176\u610f\u4e49\u548c\u4e4b\u524d\u8bf4\u7684 {n,m} \u57fa\u672c\u76f8\u540c\uff0c\u4f46\u7ed3\u679c\u662f\u8f83\u77ed\u800c\u975e\u8f83\u957f\u7684\u5b57\u7b26\u4e32\u3002 \u4f7f\u7528 / \u641c\u7d22\uff0c\u4fee\u6539 \u914d\u5408 n \u548c .\u5b8c\u6210\u6279\u91cf\u4fee\u6539","title":"\u6700\u8fd1\u591a\u7ec3\u7684\u5c0f\u6280\u5de7"},{"location":"ide/vim/#_2","text":"\u591a\u6587\u672c\u4e4b\u95f4\u7c98\u8d34 \u5982\u679c\u662f gvim\uff0c\u53ef\u4ee5\u4f7f\u7528\u9f20\u6807\u53f3\u952e\u7c98\u8d34\uff0c\u6216\u8005\u4f7f\u7528 \\<S-Insert> \u6700\u8fd1\u4e24\u4e2a\u6587\u672c\u4e4b\u95f4\u76f8\u4e92\u5207\u6362 \\<C-^> \u591a\u7a97\u53e3\u7684\u4f7f\u7528 \u4f7f\u7528 vs \u8fdb\u884c\u5782\u76f4\u5206\u9694\uff0c\u4f7f\u7528 sp \u8fdb\u884c\u6c34\u5e73\u5206\u9694 \u4f7f\u7528 \\<C-W> w \u8fdb\u884c\u7a97\u53e3\u4e4b\u95f4\u7684\u8df3\u8f6c\u3002 \\<C-W> n \u6216 :new \u6253\u5f00\u4e00\u4e2a\u65b0\u7a97\u53e3 \\<C-W> n \u6216 :close \u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff1b\u5f53\u524d\u7a97\u53e3\u5982\u679c\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u5219\u65e0\u6548 \\<C-W>q \u6216 :quit \u9000\u51fa\u5f53\u524d\u7a97\u53e3\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u7a97\u53e3\u9000\u51fa\u65f6\u5219\u9000\u51fa Vim \\<C-W>o \u6216 :only \u53ea\u4fdd\u7559\u5f53\u524d\u7a97\u53e3\uff0c\u5173\u95ed\u5176\u4ed6\u6240\u6709\u7a97\u53e3 \u591a\u6807\u7b7e\u9875\u7684\u4f7f\u7528 \u5728\u5df2\u6709\u547d\u4ee4\u884c\u6a21\u5f0f\u547d\u4ee4\u524d\u52a0 tab\u2423 \u53ef\u4ee5\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u5c55\u793a\u547d\u4ee4\u7684\u7ed3\u679c\uff0c\u5982 :tab help \u53ef\u4ee5\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u5e2e\u52a9\uff0c:tab split \u53ef\u4ee5\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00\u5f53\u524d\u7f13\u51b2\u533a :tabs \u5c55\u793a\u6240\u6709\u6807\u7b7e\u9875\u7684\u5217\u8868 :tabnew \u6216 :tabedit \u53ef\u4ee5\u6253\u5f00\u4e00\u4e2a\u7a7a\u767d\u7684\u65b0\u6807\u7b7e\u9875\uff0c\u540e\u9762\u6709\u6587\u4ef6\u540d\u7684\u8bdd\u5219\u6253\u5f00\u8be5\u6587\u4ef6 :tabclose \u53ef\u4ee5\u5173\u95ed\u5f53\u524d\u6807\u7b7e\u9875\uff08\u5982\u679c\u6807\u7b7e\u9875\u91cc\u53ea\u6709\u4e00\u4e2a\u7a97\u53e3\uff0c\u4f7f\u7528\u7a97\u53e3\u5173\u95ed\u547d\u4ee4 c \u5e94\u8be5\u66f4\u5feb\uff09 :tabnext\u3001gt \u6216 \u53ef\u4ee5\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6807\u7b7e\u9875 :tabNext\u3001:tabprevious \u3001gT \u6216 \u53ef\u4ee5\u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u6807\u7b7e\u9875 :tabfirst \u6216 :tabrewind \u5207\u6362\u5230\u7b2c\u4e00\u4e2a\u6807\u7b7e\u9875 :tablast \u5207\u6362\u5230\u6700\u540e\u4e00\u4e2a\u6807\u7b7e\u9875","title":"\u7b2c\u4e8c\u8fd1\u8981\u7ec3\u4e60\u7684\u4e00\u4e9b\u5c0f\u6280\u5de7"},{"location":"ide/vim/#_3","text":"","title":"\u7b2c\u4e09\u8fd1\u8981\u7ec3\u4e60\u7684\u4e00\u4e9b\u5c0f\u6280\u5de7"},{"location":"ide/vim/#_4","text":":args\uff1a\u53ef\u4ee5\u663e\u793a\u201c\u53c2\u6570\u201d\uff0c\u5373\u9700\u8981\u7f16\u8f91\u7684\u591a\u4e2a\u6587\u4ef6\u7684\u5217\u8868: :args \u6587\u4ef6\u540d\uff1a\u4f7f\u7528\u65b0\u7684\u6587\u4ef6\u540d\u66ff\u6362\u53c2\u6570\u5217\u8868 :next\uff08\u53ef\u7f29\u5199\u4e3a :n\uff09\uff1a\u6253\u5f00\u4e0b\u4e00\u4e2a\u6587\u4ef6\uff1b\u5982\u5f53\u524d\u6587\u4ef6\u4fee\u6539\uff08\u672a\u5b58\u76d8\uff09\u5219\u4f1a\u62a5\u9519\u4e2d\u6b62\uff0c\u4f46\u5982\u679c\u547d\u4ee4\u540e\u9762\u52a0 ! \u5219\u4f1a\u653e\u5f03\u4fee\u6539\u5185\u5bb9\uff0c\u5176\u4ed6\u547d\u4ee4\u4e5f\u7c7b\u4f3c :Next\uff08\u7f29\u5199 :N\uff09\u6216 :previous\uff08\u7f29\u5199 :prev\uff09\uff1a\u6253\u5f00\u4e0a\u4e00\u4e2a\u6587\u4ef6 :first \u6216:rewind\uff1a\u56de\u5230\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6587\u4ef6 :last\uff1a\u6253\u5f00\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u6587\u4ef6 \u4f7f\u7528\u8fd9\u4e9b\u547d\u4ee4\uff0c\u6211\u4eec\u7684\u5de5\u4f5c\u6d41\u5f53\u7136\u5c31\u4f1a\u53d1\u751f\u53d8\u5316\u4e86\uff1a \u5728\u7ec8\u7aef\u91cc\u8fdb\u5165\u5230\u76ee\u6807\u76ee\u5f55\u4e0b \u4f7f\u7528 vim .cpp .h \u6216 gvim .cpp .h \u6765\u6253\u5f00\u9700\u8981\u7f16\u8f91\u7684\u6587\u4ef6 \u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f7f\u7528\u4e4b\u524d\u7684\u65b9\u6cd5\u8d34\u5165\u6240\u9700\u7684\u6587\u672c \u4f7f\u7528 V \u8fdb\u5165\u884c\u9009\u62e9\u7684\u53ef\u89c6\u6a21\u5f0f\uff0c\u79fb\u52a8\u5149\u6807\u9009\u4e2d\u6240\u9700\u7684\u6587\u672c\uff0c\u7136\u540e\u4f7f\u7528 y \u590d\u5236\u9009\u4e2d\u7684\u5404\u884c \u6267\u884c\u547d\u4ee4 :set autowrite\uff0c\u544a\u8bc9 Vim \u5728\u5207\u6362\u6587\u4ef6\u65f6\u81ea\u52a8\u5b58\u76d8 \u6267\u884c\u547d\u4ee4 :n|normal ggP\uff0c\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6587\u4ef6\u5e76\u6267\u884c\u6b63\u5e38\u6a21\u5f0f\u547d\u4ee4 ggP\uff0c\u8df3\u8f6c\u5230\u6587\u4ef6\u5f00\u5934\u5e76\u8d34\u5165\u6587\u672c\u786e\u8ba4 \u4fee\u6539\u65e0\u8bef\u540e\uff0c\u952e\u5165 :\u3001\u4e0a\u7bad\u5934\u548c\u56de\u8f66\uff0c\u91cd\u590d\u6267\u884c\u4e0a\u9762\u7684\u547d\u4ee4 \u5f85 Vim \u62a5\u9519\u8bf4\u5df2\u7ecf\u5728\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u91cc\uff0c\u4f7f\u7528 :w \u5b58\u76d8\uff0c\u6216 :wq\uff08\u6291\u6216\u66f4\u5feb\u7684 ZZ\uff09\u5b58\u76d8\u9000\u51fa NERDTree \u7684\u4f7f\u7528","title":"\u591a\u6587\u672c\u7c98\u8d34"},{"location":"ide/vim/#_5","text":"\u4f7f\u7528 vim \u547d\u4ee4 + G \u547d\u4ee4\u8df3\u8f6c\u5230\u6587\u672c\u7684\u6307\u5b9a\u884c\uff0c\u6bd4\u5982\u8c03\u8bd5\u7684\u65f6\u5019\u3002\uff08\u7b2c\u4e09\u7ae0\uff09","title":"\u4ee5\u540e\u53ef\u80fd\u4f1a\u7ec3\u7684\u5c0f\u6280\u5de7"},{"location":"ide/vim/#_6","text":"","title":"\u4e00\u4e9b\u811a\u672c"},{"location":"ide/vim/#_7","text":"if has('mouse') if has('gui_running') || (&term =~ 'xterm' && !has('mac')) set mouse=a else set mouse=nvi endif endif","title":"\u542f\u7528\u9f20\u6807\u652f\u6301"},{"location":"ide/vim/#_8","text":"if has('gui_running') set guifont=Courier_New:h10 endif","title":"\u8bbe\u7f6e\u5b57\u4f53"},{"location":"ide/vim/#vim_1","text":"if exists('g:loaded_minpac') \" Minpac is loaded. call minpac#init() call minpac#add('k-takata/minpac', {'type': 'opt'}) \" Other plugins call minpac#add('tpope/vim-eunuch') call minpac#add('yegappan/mru') endif if has('eval') \" Minpac commands command! PackUpdate packadd minpac | source $MYVIMRC | call minpac#update() command! PackClean packadd minpac | source $MYVIMRC | call minpac#clean() command! PackStatus packadd minpac | source $MYVIMRC | call minpac#status() endif","title":"vim \u8f6f\u4ef6\u5305\u7ba1\u7406"},{"location":"ide/vim/#_9","text":"if v:version >= 800 packadd! editexistingendif","title":"\u6253\u5f00\u4e00\u4e2a\u5df2\u7ecf\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u81ea\u52a8\u628a\u65e7\u7684\u7a97\u53e3\u5207\u6362\u5230\u6700\u524d\u9762"},{"location":"ide/vs_code/","text":"","title":"VS Code"},{"location":"javaee/JspAndServlet/base/","text":"\u4e00\u4e9b Java EE \u7684\u57fa\u7840 \u8fd9\u91cc\u4e3b\u8981\u8bb0\u5f55\u4e00\u4e9b\u5e38\u89c1\u7684 Java EE \u7684\u77e5\u8bc6\u70b9\uff0c\u5f53\u7136\u4e00\u4e9b\u592a\u8fc7\u5e38\u8bc6\u7684\u4e1c\u897f\u4e0d\u4f1a\u8bb0\u5f55\u3002 URI\u3001URL \u548c URN URL\uff1aUniform Resource Locator \u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26\uff0c\u7528\u4e8e\u8bf4\u660e\u4e92\u8054\u7f51\u4e0a\u7684\u8d44\u6e90\u5982\u4f55\u53d6\u5f97\uff0c\u662f\u4e09\u4e2a\u6807\u51c6\u91cc\u9762\u6700\u65e9\u51fa\u73b0\uff0c\u53c2\u8003\u65e9\u671f\u7684 RFC 1738 \u89c4\u8303\u6765\u770b\uff0cURL \u7684\u4e3b\u8981\u8bed\u6cd5\u5982\u4e0b\uff1a <scheme>:<scheme-specific-part> \u534f\u8bae\uff08scheme\uff09\u6307\u5b9a\u4e86\u4ee5\u4f55\u79cd\u65b9\u5f0f\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u534f\u8bae\u540d\u7684\u4f8b\u5b50\uff1a FTP\uff1a\u6587\u672c\u4f20\u8f93\u534f\u8bae HTTP\uff1a\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae Mailto\uff1a\u7535\u5b50\u90ae\u4ef6 File\uff1a\u7279\u5b9a\u4e3b\u673a\u6587\u4ef6\u540d scheme-specific-part \u90e8\u5206\u683c\u5f0f\u6839\u636e\u5177\u4f53\u7684\u534f\u8bae\u800c\u5b9a\uff0c\u901a\u5e38\u4f1a\u662f\uff1a<\u7528\u6237>:<\u5bc6\u7801>@<\u4e3b\u673a\u540d>:<\u7aef\u53e3>/<\u8def\u5f84> URN\uff1aUniform Resource Name \u7edf\u4e00\u8d44\u6e90\u540d\u79f0\uff0c\u4ee3\u8868\u7740\u67d0\u4e2a\u8d44\u6e90\u72ec\u4e00\u65e0\u4e8c\u7684\u8d44\u6e90\u540d\u79f0\uff0c\u5c31\u65e9\u671f\u89c4\u8303 RFC 2141 \u6765\u770b\uff0cURN \u7684\u4e3b\u8981\u8bed\u6cd5\u683c\u5f0f\uff1a <URN> ::= \"urn:\" <NID> \":\" <NSS> \u4f8b\u5982\uff1a\u300ajava JDK 9 \u5b66\u4e60\u7b14\u8bb0\u300b \u7684\u56fd\u9645\u6807\u51c6\u4e66\u53f7\uff08ISBN\uff09\u82e5\u7528 URN \u6765\u8868\u793a\u7684\u8bdd\uff0c\u5e94\u4e3a `urn:isbn:978-7-302-50118-3\u3002 URI\uff1aUniform Resource Identifier \u7edf\u4e00\u8d44\u6e90\u6807\u8bc6\u7b26\uff0c\u7531\u4e8e URL \u548c URN \u90fd\u662f\u7528\u6765\u8868\u793a\u67d0\u4e2a\u8d44\u6e90\uff0c\u540e\u6765\u5c31\u5236\u5b9a\u4e86 URI \u6807\u51c6\uff0c\u800c URL \u548c URN \u5c31\u6210\u4e3a URI \u7684\u4e24\u4e2a\u5b50\u96c6\u3002\u6839\u636e RFC 3986 \u7684\u89c4\u8303\u6765\u770b\uff0cURI \u7684\u4e3b\u8981\u7684\u8bed\u6cd5\u683c\u5f0f\uff1a URI = scheme \":\" hier-part [\"?\" query ] [\"#\" fragment ] hier-part = \"//\" authority path-abempty / path-absolute / path-rootless / path-empty \u5728\u5236\u5b9a URI \u89c4\u5219\u4e4b\u540e\uff0c\u5c31\u7b97\u662f\u6307 WEB \u7f51\u7ad9\u4e0a\u7684\u8d44\u6e90\uff0c\u4e5f\u503e\u5411\u4e8e\u4f7f\u7528 URI \u6765\u8868\u793a\u3002 \u53c2\u8003\u300aJSP & Servlet \u5b66\u4e60\u7b14\u8bb0\u300b1.1.2 \u7ae0\u8282\u5185\u5bb9\u3002 \u6709\u5173 URI \u7f16\u7801 URI \u89c4\u8303\u4e2d\u5b9a\u4e49\u4e86\u4fdd\u7559\u5b57\uff08\u4f8b\u5982\uff1a \":\",\"/\",\"?\",\"&\" \u7b49\uff09\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e0a\u5b58\u5728\u4fdd\u7559\u5b57\uff0c\u5fc5\u987b\u4ee5 %+\u5341\u516d\u8fdb\u5236\u6570\u503c \u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362\u3002 \u975e ASCII \u7801\u5b57\u7b26\uff0c\u6bd4\u5982\u4e2d\u6587\u7684 UTF-8 \u7f16\u7801\uff0c\u4e5f\u9700\u8981\u901a\u8fc7\u4e0a\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362\u3002\u4f8b\u5982\uff1a\u201d\u6797\u201c\u8fd9\u4e2a\u5b57\u7684 UTF-8 \u7684\u5341\u516d\u8fdb\u5236\u662f E6 9E 97\uff0c\u6240\u4ee5\u9700\u8981\u8f6c\u7801\u4e3a %E6%9E%97\u3002 \u53c2\u8003\u300aJSP & Servlet \u5b66\u4e60\u7b14\u8bb0\u300b1.1.5 \u7ae0\u8282\u5185\u5bb9\u3002","title":"java ee \u57fa\u7840"},{"location":"javaee/JspAndServlet/base/#java-ee","text":"\u8fd9\u91cc\u4e3b\u8981\u8bb0\u5f55\u4e00\u4e9b\u5e38\u89c1\u7684 Java EE \u7684\u77e5\u8bc6\u70b9\uff0c\u5f53\u7136\u4e00\u4e9b\u592a\u8fc7\u5e38\u8bc6\u7684\u4e1c\u897f\u4e0d\u4f1a\u8bb0\u5f55\u3002","title":"\u4e00\u4e9b Java EE \u7684\u57fa\u7840"},{"location":"javaee/JspAndServlet/base/#uriurl-urn","text":"","title":"URI\u3001URL \u548c URN"},{"location":"javaee/JspAndServlet/base/#urluniform-resource-locator","text":"\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26\uff0c\u7528\u4e8e\u8bf4\u660e\u4e92\u8054\u7f51\u4e0a\u7684\u8d44\u6e90\u5982\u4f55\u53d6\u5f97\uff0c\u662f\u4e09\u4e2a\u6807\u51c6\u91cc\u9762\u6700\u65e9\u51fa\u73b0\uff0c\u53c2\u8003\u65e9\u671f\u7684 RFC 1738 \u89c4\u8303\u6765\u770b\uff0cURL \u7684\u4e3b\u8981\u8bed\u6cd5\u5982\u4e0b\uff1a <scheme>:<scheme-specific-part> \u534f\u8bae\uff08scheme\uff09\u6307\u5b9a\u4e86\u4ee5\u4f55\u79cd\u65b9\u5f0f\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u534f\u8bae\u540d\u7684\u4f8b\u5b50\uff1a FTP\uff1a\u6587\u672c\u4f20\u8f93\u534f\u8bae HTTP\uff1a\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae Mailto\uff1a\u7535\u5b50\u90ae\u4ef6 File\uff1a\u7279\u5b9a\u4e3b\u673a\u6587\u4ef6\u540d scheme-specific-part \u90e8\u5206\u683c\u5f0f\u6839\u636e\u5177\u4f53\u7684\u534f\u8bae\u800c\u5b9a\uff0c\u901a\u5e38\u4f1a\u662f\uff1a<\u7528\u6237>:<\u5bc6\u7801>@<\u4e3b\u673a\u540d>:<\u7aef\u53e3>/<\u8def\u5f84>","title":"URL\uff1aUniform Resource Locator"},{"location":"javaee/JspAndServlet/base/#urnuniform-resource-name","text":"\u7edf\u4e00\u8d44\u6e90\u540d\u79f0\uff0c\u4ee3\u8868\u7740\u67d0\u4e2a\u8d44\u6e90\u72ec\u4e00\u65e0\u4e8c\u7684\u8d44\u6e90\u540d\u79f0\uff0c\u5c31\u65e9\u671f\u89c4\u8303 RFC 2141 \u6765\u770b\uff0cURN \u7684\u4e3b\u8981\u8bed\u6cd5\u683c\u5f0f\uff1a <URN> ::= \"urn:\" <NID> \":\" <NSS> \u4f8b\u5982\uff1a\u300ajava JDK 9 \u5b66\u4e60\u7b14\u8bb0\u300b \u7684\u56fd\u9645\u6807\u51c6\u4e66\u53f7\uff08ISBN\uff09\u82e5\u7528 URN \u6765\u8868\u793a\u7684\u8bdd\uff0c\u5e94\u4e3a `urn:isbn:978-7-302-50118-3\u3002","title":"URN\uff1aUniform Resource Name"},{"location":"javaee/JspAndServlet/base/#uriuniform-resource-identifier","text":"\u7edf\u4e00\u8d44\u6e90\u6807\u8bc6\u7b26\uff0c\u7531\u4e8e URL \u548c URN \u90fd\u662f\u7528\u6765\u8868\u793a\u67d0\u4e2a\u8d44\u6e90\uff0c\u540e\u6765\u5c31\u5236\u5b9a\u4e86 URI \u6807\u51c6\uff0c\u800c URL \u548c URN \u5c31\u6210\u4e3a URI \u7684\u4e24\u4e2a\u5b50\u96c6\u3002\u6839\u636e RFC 3986 \u7684\u89c4\u8303\u6765\u770b\uff0cURI \u7684\u4e3b\u8981\u7684\u8bed\u6cd5\u683c\u5f0f\uff1a URI = scheme \":\" hier-part [\"?\" query ] [\"#\" fragment ] hier-part = \"//\" authority path-abempty / path-absolute / path-rootless / path-empty \u5728\u5236\u5b9a URI \u89c4\u5219\u4e4b\u540e\uff0c\u5c31\u7b97\u662f\u6307 WEB \u7f51\u7ad9\u4e0a\u7684\u8d44\u6e90\uff0c\u4e5f\u503e\u5411\u4e8e\u4f7f\u7528 URI \u6765\u8868\u793a\u3002 \u53c2\u8003\u300aJSP & Servlet \u5b66\u4e60\u7b14\u8bb0\u300b1.1.2 \u7ae0\u8282\u5185\u5bb9\u3002","title":"URI\uff1aUniform Resource Identifier"},{"location":"javaee/JspAndServlet/base/#uri","text":"URI \u89c4\u8303\u4e2d\u5b9a\u4e49\u4e86\u4fdd\u7559\u5b57\uff08\u4f8b\u5982\uff1a \":\",\"/\",\"?\",\"&\" \u7b49\uff09\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e0a\u5b58\u5728\u4fdd\u7559\u5b57\uff0c\u5fc5\u987b\u4ee5 %+\u5341\u516d\u8fdb\u5236\u6570\u503c \u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362\u3002 \u975e ASCII \u7801\u5b57\u7b26\uff0c\u6bd4\u5982\u4e2d\u6587\u7684 UTF-8 \u7f16\u7801\uff0c\u4e5f\u9700\u8981\u901a\u8fc7\u4e0a\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362\u3002\u4f8b\u5982\uff1a\u201d\u6797\u201c\u8fd9\u4e2a\u5b57\u7684 UTF-8 \u7684\u5341\u516d\u8fdb\u5236\u662f E6 9E 97\uff0c\u6240\u4ee5\u9700\u8981\u8f6c\u7801\u4e3a %E6%9E%97\u3002 \u53c2\u8003\u300aJSP & Servlet \u5b66\u4e60\u7b14\u8bb0\u300b1.1.5 \u7ae0\u8282\u5185\u5bb9\u3002","title":"\u6709\u5173 URI \u7f16\u7801"},{"location":"javaee/JspAndServlet/jsp/","text":"JSP \u57fa\u7840 \u76f4\u63a5\u5728 Servlet \u4e2d\u4f7f\u7528 printWriter \u8f93\u51fa Html \u9875\u9762\u662f\u5728\u662f\u592a\u75db\u82e6\u4e86\uff0c\u56e0\u6b64\u6709\u4e86 JSP\u3002JSP \u4e2d\u53ef\u4ee5\u76f4\u63a5\u7f16\u5199 HTML\uff0c\u4f7f\u7528\u4e86\u6307\u793a\u3001\u58f0\u660e\u3001\u811a\u672c\uff08Scriptlet\uff09\u7b49\u8bb8\u591a\u5143\u7d20\u6765\u5806\u780c\u5404\u79cd\u529f\u80fd\uff0c\u4f46\u662f JSP \u672c\u8d28\u8fd8\u662f\u4f1a\u88ab\u7f16\u8bd1\u6210 Servlet\uff0c\u4f60\u6240\u7f16\u5199\u7684\u9875\u9762\u5185\u5bb9\u6700\u540e\u90fd\u4f1a\u5728 Servlet \u7684 service \u65b9\u6cd5\u4e2d\u88ab printWriter \u8f93\u51fa\u5230\u6d4f\u89c8\u5668\u3002 JSP \u7684\u751f\u547d\u5468\u671f JSP \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a Servlet\uff0c\u56e0\u6b64 Servlet \u6709\u7684\u751f\u547d\u5468\u671f JSP \u4e5f\u4f1a\u6709\uff0c\u4e0d\u8fc7 JSP \u5b58\u5728\u4e00\u4e2a\u7531 JSP \u6587\u4ef6\u5230 Servlet \u5b9e\u4f8b\u7684\u8fc7\u7a0b\uff0c\u5982\u679c JSP \u9875\u9762\u7b2c\u4e00\u6b21\u88ab\u8bf7\u6c42\uff1a \u65e2\u7136\u662f Servlet \uff0c\u90a3\u4e48 JSP \u5728\u88ab\u52a0\u8f7d\u540e\uff0c\u540c\u6837\u4f1a\u7ecf\u5386 init\u3001service \u548c destroy \u4e09\u4e2a\u5468\u671f\uff0c\u4e0d\u8fc7\u5982\u679c Web \u5bb9\u5668\u662f Tomcat \uff0cJSP \u5728\u88ab\u8f6c\u8bd1\u6210\u7684 Servlet \u662f\u7ee7\u627f\u81ea HttpJspBase \u7c7b\uff0c\u8be5\u7c7b\u5df2\u7ecf\u91cd\u5199\u4e86 init\u3001service \u548c destroy \u65b9\u6cd5\uff0c\u540c\u65f6\u5b9a\u4e49\u4e86\u4e09\u4e2a\u7a7a\u65b9\u6cd5\u3002 public final void init(ServletConfig config){ super.init(config); jspInit();// \u8fd9\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0 _jspInit(); } public final void destory(){ jspDestroy();// \u8fd9\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0 _jspDestroy(); } public final void service(HttpServletRequest request,HttpServletResponse response){ _jspService(request,response); } _jspInit\u3001_jspDestroy \u548c _jspService \u4e09\u4e2a\u5e26\u4e0b\u5212\u7ebf\u7684\u65b9\u6cd5\uff0c\u8868\u793a\u662f\u7531\u5bb9\u5668\u81ea\u5df1\u7ef4\u62a4\uff0c\u4e0d\u5e94\u8be5\u91cd\u5199\u5b9a\u4e49\u8fd9\u4e9b\u65b9\u6cd5\u3002 \u5982\u679c\u60f3\u5728\u5b9e\u4f8b\u5316\u540e\u548c\u9500\u6bc1\u524d\u6269\u5c55\uff0c\u53ef\u4ee5\u91cd\u5199 jspInit \u548c jspDestroy \u65b9\u6cd5\u3002 \u7f16\u5199 JSP \u7f16\u5199 JSP \u5c31\u662f\u5728\u7f16\u5199 Servlet \u7684 service \u65b9\u6cd5\uff0c\u9664\u4e86\u7528 <%!%> \u5305\u88f9\u7684\u5185\u5bb9\u5916\uff0c\u5176\u4ed6\u9875\u9762\u5185\u5bb9\u90fd\u4f1a\u88ab\u7f16\u8bd1\u6210 service \u65b9\u6cd5\u7684\u5185\u5bb9\uff0c\u5982\u679c\u662f tomcat \u7684\u8bdd\uff0c\u5219\u5177\u4f53\u70b9\u5c31\u662f\u5728\u5199 _jspService(request,response) \u65b9\u6cd5\u3002 \u6307\u793a\u5143\u7d20 \u6307\u793a\u5143\u7d20\u662f\u7528\u6765\u8bf4\u660e JSP \u8f6c\u8bd1\u6210 Servlet \u6e90\u7801\u7684\u65f6\u5019\uff0c\u6240\u9700\u8981\u9075\u5faa\u7684\u4e00\u4e9b\u89c4\u8303\u3002\u5728 JSP \u4e2d\u6709\u4e09\u79cd\u5e38\u7528\u7684\u6307\u793a\u7c7b\u578b\uff1apage\u3001include \u548c taglib\u3002 page page \u6709\u4e00\u4e9b\u53ef\u4ee5\u8bbe\u7f6e\u7684\u5c5e\u6027\uff0c\u4f46\u662f\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u4e09\u4e2a\u6700\u5e38\u7528\u7684\uff1a import\uff1a\u5f15\u5165\u4f9d\u8d56\u5305\uff0c\u7b49\u540c\u4e8e java \u6587\u4ef6\u7684 import\u3002 contentType\uff1a\u5185\u5bb9 MIME\u3002 pageEncoding\uff1a\u7f16\u7801\u3002 \u5b83\u4eec\u53ef\u4ee5\u4e00\u8d77\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5206\u5f00\u5199\uff1a <%@page import=\"java.time.LocalDateTime\" contentType=\"text/html\" pageEncoding=\"UTF-8\" %> <%@page import=\"java.util.*\"%> include \u9759\u6001\u5305\u542b\u53e6\u5916\u4e00\u4e2a\u9875\u9762\u5185\u5bb9\u3002 <%@include file=\"/WEB-INF/jspf/footer.jsp\"%> taglib \u5f15\u5165\u5176\u4ed6\u6807\u7b7e\u5e93\u3002 <%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %> \u6807\u7b7e\u5e93\u7684\u5177\u4f53\u4f7f\u7528 \u8bf7\u53c2\u8003 \u58f0\u660e\u3001Scriptlet\u548c\u8868\u8fbe\u5f0f \u58f0\u660e\u7c7b\u53d8\u91cf\u6216\u8005\u65b9\u6cd5 \u683c\u5f0f\uff1a<%!\u7c7b\u6210\u5458\u53d8\u91cf\u58f0\u660e\u6216\u8005\u65b9\u6cd5\u58f0\u660e%> \u793a\u4f8b\uff1a <%! String username=\"ruby\"; String password=\"123456\"; public boolean checkUser(String username,String password){ .... } %> <!-- \u91cd\u5199 jspInit --> <%! @Override public void jspInit(){...} %> \u7531\u4e8e\u58f0\u660e\u7684\u7c7b\u53d8\u91cf\uff0c\u4e0d\u662f service \u65b9\u6cd5\u5185\u7684\u53d8\u91cf\uff0c\u56e0\u6b64\u9700\u8981\u6ce8\u610f\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u56e0\u4e3a\u5b83\u4eec\u4f1a\u88ab\u591a\u4e2a\u8bf7\u6c42\u5171\u4eab\u3002 Scriptlet \u5728 jsp \u4e2d \u63d2\u5165 java \u4ee3\u7801\u7247\u6bb5\uff0c\u8fd9\u4e9b\u7247\u6bb5\u90fd\u4f1a\u88ab\u7f16\u8bd1\u5230 service \u65b9\u6cd5\u4e2d\uff0c\u56e0\u6b64\u5b83\u7684\u4f5c\u7528\u8303\u56f4\u5c31\u662f\u5355\u6b21\u8bf7\u6c42\u3002 \u683c\u5f0f\uff1a<%java \u4ee3\u7801%> \u793a\u4f8b\uff1a <% String username=request.getParameter(\"username\"); String password=request.getparameter(\"password\"); %> \u5728\u7f16\u5199 JSP \u9875\u9762\u7684\u65f6\u5019\u4e00\u822c\u662f\u4e0d\u5efa\u8bae\u5b58\u5728 Scriptlet\uff0c\u56e0\u4e3a\u540c\u65f6\u5b58\u5728\u524d\u7aef\u9875\u9762\u4ee3\u7801\u548c java \u4ee3\u7801\u4f1a\u8ba9\u6574\u4e2a JSP \u6587\u4ef6\u53d8\u5f97\u6df7\u4e71\uff0c\u4e0d\u6613\u7ef4\u62a4\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5206\u5de5\uff0cJSP \u5c3d\u91cf\u53ea\u4fdd\u6301\u6709\u524d\u7aef\u9875\u9762\u4ee3\u7801\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u4e13\u4e1a\u7684\u524d\u7aef\u4eba\u5458\u8fdb\u884c\u7ef4\u62a4\u3002\u5982\u679c\u60f3\u7981\u7528 Scriptlet\uff0c\u53ef\u4ee5\u5728 Web.xml \u4e2d\u7ef4\u62a4\uff1a <jsp-config> <jsp-property-group>*.jsp</jsp-property-group> <scripting-invalid>true</scripting-invalid> </jsp-config> \u8868\u8fbe\u5f0f \u8868\u8fbe\u5f0f\u5f88\u5bb9\u6613\u7406\u89e3\uff1a <%= LocalDateTime.now() %> \u6700\u7ec8\u4f1a\u88ab\u7f16\u8bd1\u6210\uff1a out.println(LocalDateTime.now()); \u6ce8\u91ca <% //\u6ce8\u91ca\uff0c\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6ce8\u91ca\u4f1a\u4fdd\u7559\u5728\u7f16\u8bd1\u540e\u7684 Servlet \u6e90\u4ee3\u7801\u4e2d /*\u591a\u6c57\u6ce8\u91ca*/ %> <!--\u7f51\u9875\u6ce8\u91ca\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u7aef\u770b\u89c1\u6ce8\u91ca --> <%-- jsp \u6ce8\u91ca \u8fd9\u79cd\u65b9\u5f0f\u65e2\u4e0d\u4f1a\u7559\u7740\u7f16\u8bd1\u540e Servlet \u6e90\u7801\u4e2d\uff0c\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5728\u6d4f\u89c8\u5668\u4e2d--%> \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u662f\u4e0a\u9762\u7684\u6548\u679c\uff0c\u60f3\u5fc5\u7406\u89e3\u4e86 JSP \u5373\u662f Servlet\uff0c\u5c24\u5176\u662f JSP \u4e0e service \u65b9\u6cd5\u7684\u8054\u7cfb\u540e\uff0c\u5e94\u8be5\u5f88\u5bb9\u6613\u7406\u89e3\u3002 \u9690\u5f0f\u5bf9\u8c61 \u9690\u5f0f\u5bf9\u8c61 \u8bf4\u660e out \u5bf9\u5e94 JspWriter\uff0c\u5176\u5185\u90e8\u5c01\u88c5\u4e86\u4e00\u4e2a PrintWriter \u5bf9\u8c61 request \u5bf9\u5e94 HttpServletRequest \u5bf9\u8c61 response \u5bf9\u5e94 HttpServletResponse \u5bf9\u8c61 config \u5bf9\u5e94 ServletConfig \u5bf9\u8c61 application \u5bf9\u5e94 ServletContext \u5bf9\u8c61 session \u5bf9\u5e94 HttpSesssion \u5bf9\u8c61 pageContext \u5bf9\u5e94 PageContext \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86 JSP \u9875\u9762\u8d44\u6e90\u7684\u5c01\u88c5\uff0c\u5e76\u53ef\u8bbe\u7f6e\u9875\u9762\u8303\u56f4\u5c5e\u6027 exception \u5bf9\u5e94 Trowable \u5bf9\u8c61\uff0c\u4ee3\u7801 JSP \u9875\u9762\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u53ea\u51fa\u73b0\u5728\u9519\u8bef\u9875\u9762\uff08isErrorPage \u8bbe\u7f6e\u4e3a true \u7684\u9875\u9762\uff09 page \u5bf9\u5e94 this pageContext pageContext \u53ef\u4ee5\u8bbe\u7f6e\u56db\u79cd\u8303\u56f4\u5c5e\u6027\uff0cpageContext\u3001request\u3001session\u3001application\uff1a getAttribute(String name,int scope); setAttribute(String name, Object value, int scope); removeAttribute(String name, int scope); \u5176\u4e2d scope \u5e38\u6570\u6709\uff1a PageContext.PAGE_SCOPE\uff1apageContext pageContext.REQUEST_SCOPE\uff1arequest pageContext.SESSION_SCOPE\uff1asession pageContext.APPLICATION_SCOPE\uff1aapplication // \u8be5\u65b9\u6cd5\u53ef\u4ee5\u4e0d\u5236\u5b9a scope\uff0c\u4f1a\u4f9d\u6b21\u4ece pageContext\u3001request\u3001session \u548c application \u4e2d\u67e5\u627e\u5c5e\u6027\uff0c\u627e\u5230\u7acb\u9a6c\u8fd4\u56de\u3002 pageContext.findAttribute(String name); \u9519\u8bef\u5904\u7406 \u6807\u51c6\u6807\u7b7e \u8868\u8fbe\u5f0f\u8bed\u8a00\uff08EL\uff09 JSP \u4e2d\u53ef\u4ee5\u4f7f\u7528 EL \u8868\u8fbe\u5f0f\u83b7\u53d6\u5c5e\u6027\u3001\u8bf7\u6c42\u53c2\u6570\u3001\u8bf7\u6c42\u5934\u4e0e Cookie \u7b49\u4fe1\u606f\uff0c\u6216\u8005\u8fdb\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u8fd0\u7b97\u6216\u8005\u5224\u65ad\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11 Scriptlet \u7684\u4f7f\u7528\uff0c\u4f8b\u5982\uff1a <% String a=request.getParameter(\"a\"); String b=request.getParameter(\"b\"); out.println(\"<body>\") out.println(String.format(\"%s+%s=%d\",a,b,Integer.parseInt(a)+Integer.parseInt(b))); out.println(\"</body>\"); %> <!-- \u4f7f\u7528 EL \u8868\u8fbe\u5f0f --> <body> ${param.a}+${param.b}=${param.a+param.b} </body> \u4f7f\u7528 EL \u8868\u8fbe\u5f0f\u53d6\u5f97\u5c5e\u6027 \u5b58\u53d6\u5c5e\u6027\u8303\u56f4 \u5728 EL \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 EL \u9690\u5f0f\u5bf9\u8c61\u6307\u5b9a\u8303\u56f4\u6765\u5b58\u50a8\u5c5e\u6027\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u8303\u56f4\uff0c\u5219\u9ed8\u8ba4\u4ee5 page\u3001request\u3001session\u3001application \u7684\u987a\u5e8f\u6765\u5bfb\u627e\u6307\u5b9a\u7684\u5c5e\u6027\u3002 \u83b7\u53d6\u5c5e\u6027\u65b9\u5f0f \u4f7f\u7528 \u201d.\u201c \u8fd0\u7b97\u7b26\uff0c\u5de6\u8fb9\u53ef\u4ee5\u662f JavaBean \u6216\u8005 Map \u5bf9\u8c61\u3002 \u4f7f\u7528 \u201d[]\u201c\u8fd0\u7b97\u7b26\uff0c\u5de6\u8fb9\u53ef\u4ee5\u662f JavaBean\u3001Map\u3001\u6570\u7ec4\u6216\u8005 List \u5bf9\u8c61\u3002 \u83b7\u53d6 JavaBean \u5982\u4e0b\u5b58\u5165\u4e00\u4e2a\u5c5e\u6027\uff1a requst.setAttribute(\"user\",user); \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6 user \u7684 name \u5b57\u6bb5\uff1a ${user.name} ${user[\"name\"]} \u83b7\u53d6 Map \u5982\u4e0b\u5b58\u5165\u4e00\u4e2a\u5c5e\u6027\uff1a <% Map<String,String> map=new HashMap<>(); map.put(\"username\",\"cocoadel\"); map.put(\"role\",\"admin\"); request.setAttribute(\"login\",map); %> \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6 map \u4e2d\u7684\u503c\uff1a ${login.username} ${lonin[\"role\"]} \u5982\u679c\u662f map \u7684\u8bdd\uff0c\u66f4\u52a0\u5efa\u8bae\u662f\u7528 \u201d[]\u201c \u8fd0\u7b97\u7b26\uff0c\u56e0\u4e3a\u5982\u679c key \u5b58\u5728\u7a7a\u683c\u7b26\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u6b63\u786e\u53d6\u5f97\u503c\u3002 \u83b7\u53d6\u6570\u7ec4\u6216\u8005 List \u5143\u7d20 \u5982\u4e0b\u5b58\u5165\u4e00\u4e2a\u5c5e\u6027 <% List<String> names=new ArrayList<>(); names.add(\"cocoadel\"); names.add(\"ruby\"); request.setAttribute(\"names\",names); request.setAttribute(\"index\",1); %> \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6 List \u5143\u7d20\uff1a ${names[0]}// cocoadel ${names[1]}// ruby ${names[param.index]}// ruby \"[x]\" x\u5982\u679c\u4e0d\u542b\u6709 \u201d\u201c\uff0c\u5219\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u4f1a\u628a\u8868\u8fbe\u5f0f\u8f6c\u6362\u6210\u503c\uff0c\u518d\u4f7f\u7528\u503c\u4f5c\u4e3a\u7d22\u5f15\uff0c\u5982\u679c\u542b\u6709\u201d\u201c\uff0c\u5219\u8868\u793a\u8fd9\u662f\u4e00\u4e2a key\u3002 EL \u9690\u5f0f\u5bf9\u8c61 EL\u8fd0\u7b97\u7b26 ### \u81ea\u5b9a\u4e49 EL \u51fd\u6570 ### EL 3.0 **\u8bbe\u7f6e\u8303\u56f4\u5c5e\u6027** ${a=\"10\"} //\u7b49\u540c <% pageContext.setAttribute(\"a\",\"10\");%> **\u591a\u8bed\u53e5\u6267\u884c\uff0c\u4f7f\u7528 \u201c;\u201d \u5206\u9694\uff0c\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u662f EL \u8868\u8fbe\u5f0f\u7684\u503c\u3002** ${a=\"10\";b=\"20\";0}//\u8be5\u4ee3\u7801\u4e09\u4e2a\u8bed\u53e5\u4f1a\u5206\u522b\u6267\u884c\uff0c\u6700\u540e\u8868\u8fbe\u5f0f\u7684\u503c\u662f 0 **\u521b\u5efa\u5bf9\u8c61** ${scores=[100,95,88,75]}//\u521b\u5efa List ${names={\"ruby\",\"wiess\",\"yang\",\"blcak\"}} // \u521b\u5efa Set ${passwords={\"Admin\":\"123456\",\"Manager\":\"3234423\"}} // \u521b\u5efa Map ${String(\"cocoadel\")} //\u8c03\u7528\u6784\u9020\u65b9\u6cd5\u521b\u5efa\u5bf9\u8c61 **\u8c03\u7528\u9759\u6001\u7c7b\u548c\u9759\u6001\u65b9\u6cd5** java.lang \u4e2d\u7684\u7c7b\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u5176\u9759\u6001\u65b9\u6cd5\u6216\u8005\u9759\u6001\u6210\u5458\uff1a ${Integer.parseInt(\"123\")} ${Math.max(a,b)} \u5176\u4ed6\u7c7b\u53ef\u4ee5\u901a\u8fc7 `pageContext.getELContext().getImportHandler().importClass(className)` \u6765\u8ffd\u52a0\uff1a ${pageContext.getElContext().getImportHandler().importClass(\"java.time.LocalTime\")} ${LocalTime.now()} **\u652f\u6301 Lambda \u8868\u8fbe\u5f0f** ${plus=(x,y)-> x+y} ${names.stream().filter(name->name.length()>=3).toList()}","title":"JSP"},{"location":"javaee/JspAndServlet/jsp/#jsp","text":"\u76f4\u63a5\u5728 Servlet \u4e2d\u4f7f\u7528 printWriter \u8f93\u51fa Html \u9875\u9762\u662f\u5728\u662f\u592a\u75db\u82e6\u4e86\uff0c\u56e0\u6b64\u6709\u4e86 JSP\u3002JSP \u4e2d\u53ef\u4ee5\u76f4\u63a5\u7f16\u5199 HTML\uff0c\u4f7f\u7528\u4e86\u6307\u793a\u3001\u58f0\u660e\u3001\u811a\u672c\uff08Scriptlet\uff09\u7b49\u8bb8\u591a\u5143\u7d20\u6765\u5806\u780c\u5404\u79cd\u529f\u80fd\uff0c\u4f46\u662f JSP \u672c\u8d28\u8fd8\u662f\u4f1a\u88ab\u7f16\u8bd1\u6210 Servlet\uff0c\u4f60\u6240\u7f16\u5199\u7684\u9875\u9762\u5185\u5bb9\u6700\u540e\u90fd\u4f1a\u5728 Servlet \u7684 service \u65b9\u6cd5\u4e2d\u88ab printWriter \u8f93\u51fa\u5230\u6d4f\u89c8\u5668\u3002","title":"JSP \u57fa\u7840"},{"location":"javaee/JspAndServlet/jsp/#jsp_1","text":"JSP \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a Servlet\uff0c\u56e0\u6b64 Servlet \u6709\u7684\u751f\u547d\u5468\u671f JSP \u4e5f\u4f1a\u6709\uff0c\u4e0d\u8fc7 JSP \u5b58\u5728\u4e00\u4e2a\u7531 JSP \u6587\u4ef6\u5230 Servlet \u5b9e\u4f8b\u7684\u8fc7\u7a0b\uff0c\u5982\u679c JSP \u9875\u9762\u7b2c\u4e00\u6b21\u88ab\u8bf7\u6c42\uff1a \u65e2\u7136\u662f Servlet \uff0c\u90a3\u4e48 JSP \u5728\u88ab\u52a0\u8f7d\u540e\uff0c\u540c\u6837\u4f1a\u7ecf\u5386 init\u3001service \u548c destroy \u4e09\u4e2a\u5468\u671f\uff0c\u4e0d\u8fc7\u5982\u679c Web \u5bb9\u5668\u662f Tomcat \uff0cJSP \u5728\u88ab\u8f6c\u8bd1\u6210\u7684 Servlet \u662f\u7ee7\u627f\u81ea HttpJspBase \u7c7b\uff0c\u8be5\u7c7b\u5df2\u7ecf\u91cd\u5199\u4e86 init\u3001service \u548c destroy \u65b9\u6cd5\uff0c\u540c\u65f6\u5b9a\u4e49\u4e86\u4e09\u4e2a\u7a7a\u65b9\u6cd5\u3002 public final void init(ServletConfig config){ super.init(config); jspInit();// \u8fd9\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0 _jspInit(); } public final void destory(){ jspDestroy();// \u8fd9\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0 _jspDestroy(); } public final void service(HttpServletRequest request,HttpServletResponse response){ _jspService(request,response); } _jspInit\u3001_jspDestroy \u548c _jspService \u4e09\u4e2a\u5e26\u4e0b\u5212\u7ebf\u7684\u65b9\u6cd5\uff0c\u8868\u793a\u662f\u7531\u5bb9\u5668\u81ea\u5df1\u7ef4\u62a4\uff0c\u4e0d\u5e94\u8be5\u91cd\u5199\u5b9a\u4e49\u8fd9\u4e9b\u65b9\u6cd5\u3002 \u5982\u679c\u60f3\u5728\u5b9e\u4f8b\u5316\u540e\u548c\u9500\u6bc1\u524d\u6269\u5c55\uff0c\u53ef\u4ee5\u91cd\u5199 jspInit \u548c jspDestroy \u65b9\u6cd5\u3002","title":"JSP \u7684\u751f\u547d\u5468\u671f"},{"location":"javaee/JspAndServlet/jsp/#jsp_2","text":"\u7f16\u5199 JSP \u5c31\u662f\u5728\u7f16\u5199 Servlet \u7684 service \u65b9\u6cd5\uff0c\u9664\u4e86\u7528 <%!%> \u5305\u88f9\u7684\u5185\u5bb9\u5916\uff0c\u5176\u4ed6\u9875\u9762\u5185\u5bb9\u90fd\u4f1a\u88ab\u7f16\u8bd1\u6210 service \u65b9\u6cd5\u7684\u5185\u5bb9\uff0c\u5982\u679c\u662f tomcat \u7684\u8bdd\uff0c\u5219\u5177\u4f53\u70b9\u5c31\u662f\u5728\u5199 _jspService(request,response) \u65b9\u6cd5\u3002","title":"\u7f16\u5199 JSP"},{"location":"javaee/JspAndServlet/jsp/#_1","text":"\u6307\u793a\u5143\u7d20\u662f\u7528\u6765\u8bf4\u660e JSP \u8f6c\u8bd1\u6210 Servlet \u6e90\u7801\u7684\u65f6\u5019\uff0c\u6240\u9700\u8981\u9075\u5faa\u7684\u4e00\u4e9b\u89c4\u8303\u3002\u5728 JSP \u4e2d\u6709\u4e09\u79cd\u5e38\u7528\u7684\u6307\u793a\u7c7b\u578b\uff1apage\u3001include \u548c taglib\u3002","title":"\u6307\u793a\u5143\u7d20"},{"location":"javaee/JspAndServlet/jsp/#page","text":"page \u6709\u4e00\u4e9b\u53ef\u4ee5\u8bbe\u7f6e\u7684\u5c5e\u6027\uff0c\u4f46\u662f\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u4e09\u4e2a\u6700\u5e38\u7528\u7684\uff1a import\uff1a\u5f15\u5165\u4f9d\u8d56\u5305\uff0c\u7b49\u540c\u4e8e java \u6587\u4ef6\u7684 import\u3002 contentType\uff1a\u5185\u5bb9 MIME\u3002 pageEncoding\uff1a\u7f16\u7801\u3002 \u5b83\u4eec\u53ef\u4ee5\u4e00\u8d77\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5206\u5f00\u5199\uff1a <%@page import=\"java.time.LocalDateTime\" contentType=\"text/html\" pageEncoding=\"UTF-8\" %> <%@page import=\"java.util.*\"%>","title":"page"},{"location":"javaee/JspAndServlet/jsp/#include","text":"\u9759\u6001\u5305\u542b\u53e6\u5916\u4e00\u4e2a\u9875\u9762\u5185\u5bb9\u3002 <%@include file=\"/WEB-INF/jspf/footer.jsp\"%>","title":"include"},{"location":"javaee/JspAndServlet/jsp/#taglib","text":"\u5f15\u5165\u5176\u4ed6\u6807\u7b7e\u5e93\u3002 <%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %> \u6807\u7b7e\u5e93\u7684\u5177\u4f53\u4f7f\u7528 \u8bf7\u53c2\u8003","title":"taglib"},{"location":"javaee/JspAndServlet/jsp/#scriptlet","text":"","title":"\u58f0\u660e\u3001Scriptlet\u548c\u8868\u8fbe\u5f0f"},{"location":"javaee/JspAndServlet/jsp/#_2","text":"\u683c\u5f0f\uff1a<%!\u7c7b\u6210\u5458\u53d8\u91cf\u58f0\u660e\u6216\u8005\u65b9\u6cd5\u58f0\u660e%> \u793a\u4f8b\uff1a <%! String username=\"ruby\"; String password=\"123456\"; public boolean checkUser(String username,String password){ .... } %> <!-- \u91cd\u5199 jspInit --> <%! @Override public void jspInit(){...} %> \u7531\u4e8e\u58f0\u660e\u7684\u7c7b\u53d8\u91cf\uff0c\u4e0d\u662f service \u65b9\u6cd5\u5185\u7684\u53d8\u91cf\uff0c\u56e0\u6b64\u9700\u8981\u6ce8\u610f\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u56e0\u4e3a\u5b83\u4eec\u4f1a\u88ab\u591a\u4e2a\u8bf7\u6c42\u5171\u4eab\u3002","title":"\u58f0\u660e\u7c7b\u53d8\u91cf\u6216\u8005\u65b9\u6cd5"},{"location":"javaee/JspAndServlet/jsp/#scriptlet_1","text":"\u5728 jsp \u4e2d \u63d2\u5165 java \u4ee3\u7801\u7247\u6bb5\uff0c\u8fd9\u4e9b\u7247\u6bb5\u90fd\u4f1a\u88ab\u7f16\u8bd1\u5230 service \u65b9\u6cd5\u4e2d\uff0c\u56e0\u6b64\u5b83\u7684\u4f5c\u7528\u8303\u56f4\u5c31\u662f\u5355\u6b21\u8bf7\u6c42\u3002 \u683c\u5f0f\uff1a<%java \u4ee3\u7801%> \u793a\u4f8b\uff1a <% String username=request.getParameter(\"username\"); String password=request.getparameter(\"password\"); %> \u5728\u7f16\u5199 JSP \u9875\u9762\u7684\u65f6\u5019\u4e00\u822c\u662f\u4e0d\u5efa\u8bae\u5b58\u5728 Scriptlet\uff0c\u56e0\u4e3a\u540c\u65f6\u5b58\u5728\u524d\u7aef\u9875\u9762\u4ee3\u7801\u548c java \u4ee3\u7801\u4f1a\u8ba9\u6574\u4e2a JSP \u6587\u4ef6\u53d8\u5f97\u6df7\u4e71\uff0c\u4e0d\u6613\u7ef4\u62a4\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5206\u5de5\uff0cJSP \u5c3d\u91cf\u53ea\u4fdd\u6301\u6709\u524d\u7aef\u9875\u9762\u4ee3\u7801\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u4e13\u4e1a\u7684\u524d\u7aef\u4eba\u5458\u8fdb\u884c\u7ef4\u62a4\u3002\u5982\u679c\u60f3\u7981\u7528 Scriptlet\uff0c\u53ef\u4ee5\u5728 Web.xml \u4e2d\u7ef4\u62a4\uff1a <jsp-config> <jsp-property-group>*.jsp</jsp-property-group> <scripting-invalid>true</scripting-invalid> </jsp-config>","title":"Scriptlet"},{"location":"javaee/JspAndServlet/jsp/#_3","text":"\u8868\u8fbe\u5f0f\u5f88\u5bb9\u6613\u7406\u89e3\uff1a <%= LocalDateTime.now() %> \u6700\u7ec8\u4f1a\u88ab\u7f16\u8bd1\u6210\uff1a out.println(LocalDateTime.now());","title":"\u8868\u8fbe\u5f0f"},{"location":"javaee/JspAndServlet/jsp/#_4","text":"<% //\u6ce8\u91ca\uff0c\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6ce8\u91ca\u4f1a\u4fdd\u7559\u5728\u7f16\u8bd1\u540e\u7684 Servlet \u6e90\u4ee3\u7801\u4e2d /*\u591a\u6c57\u6ce8\u91ca*/ %> <!--\u7f51\u9875\u6ce8\u91ca\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u7aef\u770b\u89c1\u6ce8\u91ca --> <%-- jsp \u6ce8\u91ca \u8fd9\u79cd\u65b9\u5f0f\u65e2\u4e0d\u4f1a\u7559\u7740\u7f16\u8bd1\u540e Servlet \u6e90\u7801\u4e2d\uff0c\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5728\u6d4f\u89c8\u5668\u4e2d--%> \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u662f\u4e0a\u9762\u7684\u6548\u679c\uff0c\u60f3\u5fc5\u7406\u89e3\u4e86 JSP \u5373\u662f Servlet\uff0c\u5c24\u5176\u662f JSP \u4e0e service \u65b9\u6cd5\u7684\u8054\u7cfb\u540e\uff0c\u5e94\u8be5\u5f88\u5bb9\u6613\u7406\u89e3\u3002","title":"\u6ce8\u91ca"},{"location":"javaee/JspAndServlet/jsp/#_5","text":"\u9690\u5f0f\u5bf9\u8c61 \u8bf4\u660e out \u5bf9\u5e94 JspWriter\uff0c\u5176\u5185\u90e8\u5c01\u88c5\u4e86\u4e00\u4e2a PrintWriter \u5bf9\u8c61 request \u5bf9\u5e94 HttpServletRequest \u5bf9\u8c61 response \u5bf9\u5e94 HttpServletResponse \u5bf9\u8c61 config \u5bf9\u5e94 ServletConfig \u5bf9\u8c61 application \u5bf9\u5e94 ServletContext \u5bf9\u8c61 session \u5bf9\u5e94 HttpSesssion \u5bf9\u8c61 pageContext \u5bf9\u5e94 PageContext \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86 JSP \u9875\u9762\u8d44\u6e90\u7684\u5c01\u88c5\uff0c\u5e76\u53ef\u8bbe\u7f6e\u9875\u9762\u8303\u56f4\u5c5e\u6027 exception \u5bf9\u5e94 Trowable \u5bf9\u8c61\uff0c\u4ee3\u7801 JSP \u9875\u9762\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u53ea\u51fa\u73b0\u5728\u9519\u8bef\u9875\u9762\uff08isErrorPage \u8bbe\u7f6e\u4e3a true \u7684\u9875\u9762\uff09 page \u5bf9\u5e94 this","title":"\u9690\u5f0f\u5bf9\u8c61"},{"location":"javaee/JspAndServlet/jsp/#pagecontext","text":"pageContext \u53ef\u4ee5\u8bbe\u7f6e\u56db\u79cd\u8303\u56f4\u5c5e\u6027\uff0cpageContext\u3001request\u3001session\u3001application\uff1a getAttribute(String name,int scope); setAttribute(String name, Object value, int scope); removeAttribute(String name, int scope); \u5176\u4e2d scope \u5e38\u6570\u6709\uff1a PageContext.PAGE_SCOPE\uff1apageContext pageContext.REQUEST_SCOPE\uff1arequest pageContext.SESSION_SCOPE\uff1asession pageContext.APPLICATION_SCOPE\uff1aapplication // \u8be5\u65b9\u6cd5\u53ef\u4ee5\u4e0d\u5236\u5b9a scope\uff0c\u4f1a\u4f9d\u6b21\u4ece pageContext\u3001request\u3001session \u548c application \u4e2d\u67e5\u627e\u5c5e\u6027\uff0c\u627e\u5230\u7acb\u9a6c\u8fd4\u56de\u3002 pageContext.findAttribute(String name);","title":"pageContext"},{"location":"javaee/JspAndServlet/jsp/#_6","text":"","title":"\u9519\u8bef\u5904\u7406"},{"location":"javaee/JspAndServlet/jsp/#_7","text":"","title":"\u6807\u51c6\u6807\u7b7e"},{"location":"javaee/JspAndServlet/jsp/#el","text":"JSP \u4e2d\u53ef\u4ee5\u4f7f\u7528 EL \u8868\u8fbe\u5f0f\u83b7\u53d6\u5c5e\u6027\u3001\u8bf7\u6c42\u53c2\u6570\u3001\u8bf7\u6c42\u5934\u4e0e Cookie \u7b49\u4fe1\u606f\uff0c\u6216\u8005\u8fdb\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u8fd0\u7b97\u6216\u8005\u5224\u65ad\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11 Scriptlet \u7684\u4f7f\u7528\uff0c\u4f8b\u5982\uff1a <% String a=request.getParameter(\"a\"); String b=request.getParameter(\"b\"); out.println(\"<body>\") out.println(String.format(\"%s+%s=%d\",a,b,Integer.parseInt(a)+Integer.parseInt(b))); out.println(\"</body>\"); %> <!-- \u4f7f\u7528 EL \u8868\u8fbe\u5f0f --> <body> ${param.a}+${param.b}=${param.a+param.b} </body>","title":"\u8868\u8fbe\u5f0f\u8bed\u8a00\uff08EL\uff09"},{"location":"javaee/JspAndServlet/jsp/#el_1","text":"","title":"\u4f7f\u7528 EL \u8868\u8fbe\u5f0f\u53d6\u5f97\u5c5e\u6027"},{"location":"javaee/JspAndServlet/jsp/#_8","text":"\u5728 EL \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 EL \u9690\u5f0f\u5bf9\u8c61\u6307\u5b9a\u8303\u56f4\u6765\u5b58\u50a8\u5c5e\u6027\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u8303\u56f4\uff0c\u5219\u9ed8\u8ba4\u4ee5 page\u3001request\u3001session\u3001application \u7684\u987a\u5e8f\u6765\u5bfb\u627e\u6307\u5b9a\u7684\u5c5e\u6027\u3002","title":"\u5b58\u53d6\u5c5e\u6027\u8303\u56f4"},{"location":"javaee/JspAndServlet/jsp/#_9","text":"\u4f7f\u7528 \u201d.\u201c \u8fd0\u7b97\u7b26\uff0c\u5de6\u8fb9\u53ef\u4ee5\u662f JavaBean \u6216\u8005 Map \u5bf9\u8c61\u3002 \u4f7f\u7528 \u201d[]\u201c\u8fd0\u7b97\u7b26\uff0c\u5de6\u8fb9\u53ef\u4ee5\u662f JavaBean\u3001Map\u3001\u6570\u7ec4\u6216\u8005 List \u5bf9\u8c61\u3002 \u83b7\u53d6 JavaBean \u5982\u4e0b\u5b58\u5165\u4e00\u4e2a\u5c5e\u6027\uff1a requst.setAttribute(\"user\",user); \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6 user \u7684 name \u5b57\u6bb5\uff1a ${user.name} ${user[\"name\"]} \u83b7\u53d6 Map \u5982\u4e0b\u5b58\u5165\u4e00\u4e2a\u5c5e\u6027\uff1a <% Map<String,String> map=new HashMap<>(); map.put(\"username\",\"cocoadel\"); map.put(\"role\",\"admin\"); request.setAttribute(\"login\",map); %> \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6 map \u4e2d\u7684\u503c\uff1a ${login.username} ${lonin[\"role\"]} \u5982\u679c\u662f map \u7684\u8bdd\uff0c\u66f4\u52a0\u5efa\u8bae\u662f\u7528 \u201d[]\u201c \u8fd0\u7b97\u7b26\uff0c\u56e0\u4e3a\u5982\u679c key \u5b58\u5728\u7a7a\u683c\u7b26\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u6b63\u786e\u53d6\u5f97\u503c\u3002 \u83b7\u53d6\u6570\u7ec4\u6216\u8005 List \u5143\u7d20 \u5982\u4e0b\u5b58\u5165\u4e00\u4e2a\u5c5e\u6027 <% List<String> names=new ArrayList<>(); names.add(\"cocoadel\"); names.add(\"ruby\"); request.setAttribute(\"names\",names); request.setAttribute(\"index\",1); %> \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6 List \u5143\u7d20\uff1a ${names[0]}// cocoadel ${names[1]}// ruby ${names[param.index]}// ruby \"[x]\" x\u5982\u679c\u4e0d\u542b\u6709 \u201d\u201c\uff0c\u5219\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u4f1a\u628a\u8868\u8fbe\u5f0f\u8f6c\u6362\u6210\u503c\uff0c\u518d\u4f7f\u7528\u503c\u4f5c\u4e3a\u7d22\u5f15\uff0c\u5982\u679c\u542b\u6709\u201d\u201c\uff0c\u5219\u8868\u793a\u8fd9\u662f\u4e00\u4e2a key\u3002","title":"\u83b7\u53d6\u5c5e\u6027\u65b9\u5f0f"},{"location":"javaee/JspAndServlet/jsp/#el_2","text":"","title":"EL \u9690\u5f0f\u5bf9\u8c61"},{"location":"javaee/JspAndServlet/jsp/#el_3","text":"### \u81ea\u5b9a\u4e49 EL \u51fd\u6570 ### EL 3.0 **\u8bbe\u7f6e\u8303\u56f4\u5c5e\u6027** ${a=\"10\"} //\u7b49\u540c <% pageContext.setAttribute(\"a\",\"10\");%> **\u591a\u8bed\u53e5\u6267\u884c\uff0c\u4f7f\u7528 \u201c;\u201d \u5206\u9694\uff0c\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u662f EL \u8868\u8fbe\u5f0f\u7684\u503c\u3002** ${a=\"10\";b=\"20\";0}//\u8be5\u4ee3\u7801\u4e09\u4e2a\u8bed\u53e5\u4f1a\u5206\u522b\u6267\u884c\uff0c\u6700\u540e\u8868\u8fbe\u5f0f\u7684\u503c\u662f 0 **\u521b\u5efa\u5bf9\u8c61** ${scores=[100,95,88,75]}//\u521b\u5efa List ${names={\"ruby\",\"wiess\",\"yang\",\"blcak\"}} // \u521b\u5efa Set ${passwords={\"Admin\":\"123456\",\"Manager\":\"3234423\"}} // \u521b\u5efa Map ${String(\"cocoadel\")} //\u8c03\u7528\u6784\u9020\u65b9\u6cd5\u521b\u5efa\u5bf9\u8c61 **\u8c03\u7528\u9759\u6001\u7c7b\u548c\u9759\u6001\u65b9\u6cd5** java.lang \u4e2d\u7684\u7c7b\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u5176\u9759\u6001\u65b9\u6cd5\u6216\u8005\u9759\u6001\u6210\u5458\uff1a ${Integer.parseInt(\"123\")} ${Math.max(a,b)} \u5176\u4ed6\u7c7b\u53ef\u4ee5\u901a\u8fc7 `pageContext.getELContext().getImportHandler().importClass(className)` \u6765\u8ffd\u52a0\uff1a ${pageContext.getElContext().getImportHandler().importClass(\"java.time.LocalTime\")} ${LocalTime.now()} **\u652f\u6301 Lambda \u8868\u8fbe\u5f0f** ${plus=(x,y)-> x+y} ${names.stream().filter(name->name.length()>=3).toList()}","title":"EL\u8fd0\u7b97\u7b26"},{"location":"javaee/JspAndServlet/jstl/","text":"JSTL \u4f7f\u7528 \u5728 Servlet \u4e2d\u7f16\u5199 Html \u8fdb\u884c\u9875\u9762\u8f93\u51fa\u662f\u4e00\u4ef6\u9ebb\u70e6\u7684\u4e8b\u60c5\uff0c\u540c\u6837\u5728 JSP \u9875\u9762\u4e2d\u7f16\u5199 Scriptlet java \u4ee3\u7801\u4e5f\u4e0d\u662f\u4ec0\u4e48\u597d\u4e3b\u610f\uff0c\u534a\u65a4\u516b\u4e24\u3002 Jave EE \u63d0\u4f9b\u4e86 JSTL\uff0c\u5b83\u80fd\u5e2e\u52a9\u6211\u4eec\u6709\u6548\u51cf\u5c11\u751a\u81f3\u5c4f\u853d Scriptlet\u3002 JSTL \u63d0\u4f9b\u4e86\u6761\u4ef6\u5224\u65ad\u7684\u903b\u8f91\u6807\u7b7e\uff0c\u4ee5\u53ca\u5bf9\u5e94 JSP \u6807\u51c6\u6807\u7b7e\u7684\u6269\u5c55\u6807\u7b7e\u4e0e\u66f4\u591a\u529f\u80fd\u6807\u7b7e\u3002JSTL \u63d0\u4f9b\u7684\u6807\u7b7e\u5e93\u5206\u4e3a\u4e94\u4e2a\u5927\u7c7b\uff1a \u6838\u5fc3\u7f16\u7801\u5e93\u3002 I18N \u517c\u5bb9\u683c\u5f0f\u6807\u7b7e\u5e93\u3002 SQL \u6807\u7b7e\u5e93\u3002 XML \u6807\u7b7e\u5e93\u3002 \u51fd\u6570\u6807\u7b7e\u5e93\u3002 JSTL \u662f\u53e6\u5916\u4e00\u4e2a\u6807\u51c6\u89c4\u8303\uff0c\u5e76\u975e\u5728 JSP \u7684\u89c4\u8303\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 avaServer Pages Standard Tag Library \u627e\u5230 JSTL \u7684\u6e90\u7801\u3002\u5982\u679c\u60f3\u76f4\u63a5\u53d6\u5f97 JSTL \u7684 JAR \u5305\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728 Tomcat \u7684\u8303\u4f8b webapps/examples/WEB-INF/lib \u4e2d\u627e\u5230 taglib-standard-spec-1.2.5.jar \u4e0e taglib-standard-impl-1.2.5.jar \u4e24\u4e2a\u5305\uff0c\u524d\u8005\u662f JSTL \u7684\u6807\u51c6\u63a5\u53e3\u548c\u7c7b\uff0c\u540e\u8005\u662f\u5b9e\u73b0\u3002 \u6838\u5fc3\u6807\u7b7e\u5e93 \u5f15\u5165\uff1a <%taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %> \u6d41\u7a0b\u5904\u7406\u6807\u7b7e if // if \u6807\u7b7e\uff0ctest \u5c5e\u6027\u53ef\u4ee5\u653e\u7f6e EL \u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u503c\u4e3a true\uff0c\u5219\u663e\u793a body \u7684\u5185\u5bb9\u3002 <c:if test=\"${param.name=='ruby' && param.password='12345'}\"> <h1>\u767b\u5f55\u6210\u529f</h1> </c:if> choose\u3001when \u548c otherwise <body> <c:choose> <c:when test=\"${role='admin'}\"> <h1>admin page</h1> </c:when> <c:when test=\"${role='manager'}\"> <h1>manager page</h1> </c:when> <c:otherwise> <h1>guest page</h1> </c:otherwise> </c:choose> </body> forEach <c:forEach var=\"name\" items=\"${param.names}\"> <p>${name}</p> </c:forEach> <!-- \u5982\u679c items \u662f\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u9ed8\u8ba4\u5206\u9694\u7b26\u662f \",\" --> <c:forEach var=\"token\" items=\"Java,C++,C,Javascript\"> <p>${token}</p> </c:forEach> <!-- \u53ef\u4ee5\u4f7f\u7528 forTokens \u548c delims \u5c5e\u6027\u6307\u5b9a\u5206\u9694\u7b26 --> <c:forTokens var=\"token\" delims=\":\" itmes=\"Java:C++:C:Javascript\"> <p>${token}</p> </c:forTokens> \u9519\u8bef\u5904\u7406\u6807\u7b7e <c:catch var=\"error\"> ${param.a=param.b/param.c} </c:catch> <c:if test=\"${error!=null}\"> <p>${error.message}</p> </c:if> \u7f51\u9875\u5bfc\u5165\u3001\u91cd\u5b9a\u5411\u3001URI \u5904\u7406\u6807\u7b7e \u7f51\u9875\u5bfc\u5165 <!--\u4f7f\u7528\u6307\u793a\u7b26 include --> <%@inlude file=\"WEB-INF/jspf/header.jspf\"%> <!-- jsp:include --> <jsp:include page=\"add.jsp\"> <jsp:param name=\"a\" value=\"1\"/> <jsp:param name=\"b\" value=\"2\"/> </jsp:include> <!-- \u4f7f\u7528 jstl \u7684 import \u6807\u7b7e\uff0c\u76f8\u5f53\u4e8e jsp:include \u6807\u7b7e\u7684\u52a0\u5f3a\u7248 --> <c:import url=\"add.jsp\"> <c:param name=\"a\" value=\"1\" /> <c:param name=\"b\" value=\"2\" /> </c:import> \u91cd\u5b9a\u5411 <c:redirect url=\"add.jsp\"> <c:param name=\"a\" value=\"1\"/> <c:param name=\"b\" value=\"2\"/> </c:redirect> \u5c5e\u6027\u5904\u7406 set <!-- scriptlet \u5199\u6cd5 --> <%session.setAttribute(\"login\",\"ruby\");%> <!-- jstl --> <c:set var=\"login\" value=\"ruby\" scope=\"session\" /> <!-- \u5982\u4e0dvalue \u7684\u5185\u5bb9\u8f83\u957f\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 body --> <c:set var=\"details\" scopek=\"session\">ruby,weiss,yang,black</c:set> remove <c:remvoe var=\"login\" scope=\"session\" /> set javaBean <!-- \u5982\u679c\u8fd0\u7b97\u51fa\u6765\u7684\u7ed3\u679c\u662f\u4e00\u4e2a javaBean \u5219\u8c03\u7528 setName() \u65b9\u6cd5 --> <!-- \u5982\u679c\u8fd0\u7b97\u5904\u7406\u7684\u7ed3\u679c\u662f\u4e00\u4e2a Map\uff0c\u5219\u8c03\u7528 put() \u65b9\u6cd5 --> <c:set target=\"${user}\" property=\"name\" value=\"${param.name}\" /> \u8f93\u51fa\u6807\u7b7e <!--\u8fd9\u548c\u76f4\u63a5\u4f7f\u7528 ${param.message} \u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e out \u6807\u7b7e\u4f1a\u5c06\u5185\u5bb9\u4e2d\u7684 \u89d2\u62ec\u53f7\u3001\u53cc\u5f15\u53f7\u3001\u5355\u5f15\u53f7\u7b49\u5b57\u7b26\u6362\u6210\u76f8\u5e94\u7684\u8f6c\u4e49\u7b26\uff0c\u907f\u514d\u6ce8\u5165\u653b\u51fb --> <!-- \u8fd9\u4e2a\u529f\u80fd\u9ed8\u8ba4\u662f\u7531 escapXml \u6765\u63a7\u5236\uff0c\u9ed8\u8ba4\u503c\u662f true --> <c:out value=\"${param.message}\" /> I18N \u517c\u5bb9\u683c\u5f0f\u6807\u7b7e\u5e93 I18N \u6807\u7b7e\u5e93 \u5bf9\u5e94\u56fd\u9645\u5316\u8fd9\u91cc\u4e0d\u505a\u8fc7\u591a\u7684\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 JSTL \u6765\u517c\u5bb9\u56fd\u9645\u5316\u8d44\u6e90\u3002 \u56fd\u9645\u5316\u7531\u4e09\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u5730\u533a\u4fe1\u606f\uff08Locale\uff09\uff0c\u8d44\u6e90\u5305\uff08Resource boudle\uff09\u548c\u57fa\u7840\u540d\u79f0\uff08Base name\uff09\u3002 \u5f15\u5165\u6807\u7b7e\u5e93 <%@taglib prifix='fmt' uri=\"http://java.sun.com/jsp/jstl/fmt\" %> set Base name <!-- \u4f5c\u7528\u57df\u9ed8\u8ba4\u662f\u6574\u4e2a\u9875\u9762--> <fmt:bundle basename=\"message1\"/> <!--\u4f46\u662f\u4e5f\u53ef\u4ee5\u5728\u9875\u9762\u91cc\u9762\u5c40\u90e8\u989d\u5916\u914d\u7f6e\uff0c\u4f1a\u4ee3\u66ff\u5168\u5c40\u914d\u7f6e --> <fmt:boudle basename=\"message2\"> <h1><fmt:message key=\"name\"/></h1> </fmt:boudle> set Locale <!-- \u9ed8\u8ba4\u6574\u4e2a\u9875\u9762\u6709\u6548 --> <fmt: setLocale value=\"zh_CN\"/> set Locale \u4e5f\u53ef\u4ee5\u5728 <fmt:message> \u4e0a\u5355\u72ec\u6307\u5b9a LocalizationContext <% ResourceBoudle en_US=new ResourceBoudle.getBoulde(\"hello\",new Locale(\"en\",\"US\")); pageContext.setAttribute(\"en_US\",en_US); %> <h1><fmt:message boudle=\"${en_US}\" key=\"name\"/></h1> \u683c\u5f0f\u5316\u6807\u7b7e\u5bfb\u627e\u5730\u533a\u4fe1\u606f\u7684\u987a\u5e8f\uff1a - \u4f7f\u7528 \u6307\u5b9a\u5730\u533a\u4fe1\u606f\u3002 - \u5bfb\u627e LocalizationContext \u4e2d\u7684\u5730\u533a\u4fe1\u606f\u3002 - \u4f7f\u7528\u6d4f\u89c8\u5668 Accept-Language \u8bf7\u6c42\u5934\u4e2d\u7684\u503c\u6765\u51b3\u5b9a\u5730\u533a\u4fe1\u606f\u3002 - \u4f7f\u7528\u540e\u5907\u5730\u533a\u4fe1\u606f\u3002 <fmt:setLocale> \u3001 <fmt:setBundle> \u548c <fmt:message> \u90fd\u4f1a\u8c03\u7528 HttpServletResponse \u7684 setLocale \u6765\u8bbe\u7f6e\u76f8\u5e94\u7f16\u7801\u3002\u4e0d\u8fc7\u8981\u6ce8\u610f\uff0csetCharacterEncoding \u6216\u8005 setContentType \u8bbe\u7f6e\u7f16\u7801\u7684\u4f18\u5148\u7ea7\u66f4\u9ad8\u3002 <fmt:requestEncoding> \u53ef\u4ee5\u7528\u6765\u8bbe\u7f6e\u8bf7\u6c42\u5bf9\u8c61\u7684\u7f16\u7801\u3002 \u683c\u5f0f\u6807\u7b7e\u5e93 \u65f6\u95f4\u683c\u5f0f <%taglib prefix=\"fmt\" uri=\"http://java.sun.com/jsp/jstl/fmt\"%> <!-- 2022-6-13 --> <fmt:formatDate value=\"${now}\"/><br/> <!-- 2022\u5e746\u670813\u65e5 \u661f\u671f\u4e00 --> <fmt:formatDate value=\"${now}\" dataStyle=\"full\"/><br/> <!-- \u4e0b\u534805\u65f621\u520610\u79d2 CST --> <fmt:formatDate value=\"${now}\" type=\"time\" timeStyle=\"full\"/><br/> <!-- 13.06.22 --> <fmt:formatDate value=\"${now}\" pattern=\"dd.MM.yy\"/><br/> <!-- 2022\u5e746\u670813\u65e5 \u661f\u671f\u4e00 \u4e0b\u534805\u65f627\u520621\u79d2 GMT+08:00 --> <fmt:timeZone value=\"GMT+8:00\" <fmt:formatDate value=\"${now}\" type=\"both\" timeStyle=\"full\" dateStyle=\"full\"/><br/> </fmt:timeZone> type\uff1a time \u8868\u793a\u65f6\u95f4\uff0c date \u8868\u793a\u65e5\u671f, both \u8868\u793a\u65e5\u671f+\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u662f date\u3002 dateStyle\uff1a\u6307\u5b9a\u65e5\u671f\u663e\u793a\u7684\u8be6\u7ec6\u7a0b\u5ea6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7684\u503c\u6709\uff1a default,short,medium,long,full\u3002 timeSty\uff1a\u6307\u5b9a\u65f6\u95f4\u663e\u793a\u7684\u8be6\u7ec6\u7a0b\u5ea6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7684\u503c\u6709\uff1a default,short,medium,long,full\u3002 pattern\uff1a\u81ea\u5b9a\u4e49\u663e\u793a\u683c\u5f0f\u3002 <fmt:timeZone> \uff1a\u6307\u5b9a\u65f6\u533a\uff0c\u503c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u6216\u8005 java.util.TimeZone \u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4f1a\u6839\u636e\u6d4f\u89c8\u5668\u7684 Accept-Language \u8bf7\u6c42\u5934\u6765\u51b3\u5b9a\u5730\u533a\u3002 \u6570\u5b57\u683c\u5f0f <!-- 12,345.678 --> <fmt:formatNumber value=\"12345.678\"/> <!--\uffe512,345.678 --> <fmt:formatNumber value=\"12345.678\" type=\"currency\"/> <!--$12,345.68 --> <fmt:formatNumber value=\"12345.678\" type=\"currency\" currencySymbol=\"$\"/> <!--1,234,568% --> <fmt:formatNumber value=\"12345.678\" type=\"percent\"/> <!--12,345.68--> <fmt:formatNumber value=\"12345.678\" pattern=\"#,#00.0#\"/> type: \u53ef\u8bbe\u7f6e\u7684\u503c\u6709 number\uff08\u9ed8\u8ba4\uff09\uff0ccurrency\uff0cpaercent\u3002 currencySymbol\uff1atype \u4e3a currency \u65f6\u5019\uff0c\u53ef\u4ee5\u6307\u5b9a\u8d27\u5e01\u683c\u5f0f\u5355\u4f4d\u3002 pattern\uff1a\u81ea\u5b9a\u4e49\u663e\u793a\u683c\u5f0f\u3002 \u51fd\u6570\u6807\u7b7e\u5e93 JSTL \u63d0\u4f9b\u4e86\u8bb8\u591a\u516c\u7528\u7684\u51fd\u6570\u5e93\uff08 \u81ea\u5b9a\u4e49 EL \u51fd\u6570\u5e93\u53c2\u8003 \uff09 <!--\u5f15\u5165\u6807\u7b7e\u5e93 --> <%taglib prefix=\"fn\" uri=\"http://java.sun.com/jsp/jstl/functions\" %> <c:if test=\"${fn:startsWith(param.name,'coco')}\"> <h1>you name length\uff1a${fn:length(param.name)} </h1> </c:if> JSTL \u7684\u516c\u7528\u51fd\u6570\u90fd\u4ee5\u5b57\u7b26\u4e32\u5904\u7406\u4e3a\u4e3b\uff1a \u6539\u53d8\u5b57\u7b26\u4e32\u5927\u5c0f\u5199\uff1atoLowerCase,toUpperCase \u53d6\u5f97\u5b50\u5b57\u7b26\u4e32\uff1asubstring,substringAfter,substringBefore \u88c1\u526a\u5b57\u7b26\u4e32\u524d\u540e\u7a7a\u767d\uff1a trim \u5b57\u7b26\u66ff\u6362\uff1a replace \u68c0\u6d4b\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5b50\u5b57\u7b26\u4e32\uff1astartsWith,endsWith,contains,containsIgnoreCase \u68c0\u6d4b\u5b50\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\uff1aindexOf \u5207\u5272\u5b57\u7b26\u4e32\uff1asplit \u8fde\u63a5\u5b57\u7b26\u4e32\u6570\u7ec4\uff1ajoin \u66ff\u6362 XML \u5b57\u7b26\uff1aescapeXML XML \u6807\u7b7e\u5e93","title":"JSTL"},{"location":"javaee/JspAndServlet/jstl/#jstl","text":"\u5728 Servlet \u4e2d\u7f16\u5199 Html \u8fdb\u884c\u9875\u9762\u8f93\u51fa\u662f\u4e00\u4ef6\u9ebb\u70e6\u7684\u4e8b\u60c5\uff0c\u540c\u6837\u5728 JSP \u9875\u9762\u4e2d\u7f16\u5199 Scriptlet java \u4ee3\u7801\u4e5f\u4e0d\u662f\u4ec0\u4e48\u597d\u4e3b\u610f\uff0c\u534a\u65a4\u516b\u4e24\u3002 Jave EE \u63d0\u4f9b\u4e86 JSTL\uff0c\u5b83\u80fd\u5e2e\u52a9\u6211\u4eec\u6709\u6548\u51cf\u5c11\u751a\u81f3\u5c4f\u853d Scriptlet\u3002 JSTL \u63d0\u4f9b\u4e86\u6761\u4ef6\u5224\u65ad\u7684\u903b\u8f91\u6807\u7b7e\uff0c\u4ee5\u53ca\u5bf9\u5e94 JSP \u6807\u51c6\u6807\u7b7e\u7684\u6269\u5c55\u6807\u7b7e\u4e0e\u66f4\u591a\u529f\u80fd\u6807\u7b7e\u3002JSTL \u63d0\u4f9b\u7684\u6807\u7b7e\u5e93\u5206\u4e3a\u4e94\u4e2a\u5927\u7c7b\uff1a \u6838\u5fc3\u7f16\u7801\u5e93\u3002 I18N \u517c\u5bb9\u683c\u5f0f\u6807\u7b7e\u5e93\u3002 SQL \u6807\u7b7e\u5e93\u3002 XML \u6807\u7b7e\u5e93\u3002 \u51fd\u6570\u6807\u7b7e\u5e93\u3002 JSTL \u662f\u53e6\u5916\u4e00\u4e2a\u6807\u51c6\u89c4\u8303\uff0c\u5e76\u975e\u5728 JSP \u7684\u89c4\u8303\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 avaServer Pages Standard Tag Library \u627e\u5230 JSTL \u7684\u6e90\u7801\u3002\u5982\u679c\u60f3\u76f4\u63a5\u53d6\u5f97 JSTL \u7684 JAR \u5305\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728 Tomcat \u7684\u8303\u4f8b webapps/examples/WEB-INF/lib \u4e2d\u627e\u5230 taglib-standard-spec-1.2.5.jar \u4e0e taglib-standard-impl-1.2.5.jar \u4e24\u4e2a\u5305\uff0c\u524d\u8005\u662f JSTL \u7684\u6807\u51c6\u63a5\u53e3\u548c\u7c7b\uff0c\u540e\u8005\u662f\u5b9e\u73b0\u3002","title":"JSTL \u4f7f\u7528"},{"location":"javaee/JspAndServlet/jstl/#_1","text":"\u5f15\u5165\uff1a <%taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>","title":"\u6838\u5fc3\u6807\u7b7e\u5e93"},{"location":"javaee/JspAndServlet/jstl/#_2","text":"if // if \u6807\u7b7e\uff0ctest \u5c5e\u6027\u53ef\u4ee5\u653e\u7f6e EL \u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u503c\u4e3a true\uff0c\u5219\u663e\u793a body \u7684\u5185\u5bb9\u3002 <c:if test=\"${param.name=='ruby' && param.password='12345'}\"> <h1>\u767b\u5f55\u6210\u529f</h1> </c:if> choose\u3001when \u548c otherwise <body> <c:choose> <c:when test=\"${role='admin'}\"> <h1>admin page</h1> </c:when> <c:when test=\"${role='manager'}\"> <h1>manager page</h1> </c:when> <c:otherwise> <h1>guest page</h1> </c:otherwise> </c:choose> </body> forEach <c:forEach var=\"name\" items=\"${param.names}\"> <p>${name}</p> </c:forEach> <!-- \u5982\u679c items \u662f\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u9ed8\u8ba4\u5206\u9694\u7b26\u662f \",\" --> <c:forEach var=\"token\" items=\"Java,C++,C,Javascript\"> <p>${token}</p> </c:forEach> <!-- \u53ef\u4ee5\u4f7f\u7528 forTokens \u548c delims \u5c5e\u6027\u6307\u5b9a\u5206\u9694\u7b26 --> <c:forTokens var=\"token\" delims=\":\" itmes=\"Java:C++:C:Javascript\"> <p>${token}</p> </c:forTokens>","title":"\u6d41\u7a0b\u5904\u7406\u6807\u7b7e"},{"location":"javaee/JspAndServlet/jstl/#_3","text":"<c:catch var=\"error\"> ${param.a=param.b/param.c} </c:catch> <c:if test=\"${error!=null}\"> <p>${error.message}</p> </c:if>","title":"\u9519\u8bef\u5904\u7406\u6807\u7b7e"},{"location":"javaee/JspAndServlet/jstl/#uri","text":"\u7f51\u9875\u5bfc\u5165 <!--\u4f7f\u7528\u6307\u793a\u7b26 include --> <%@inlude file=\"WEB-INF/jspf/header.jspf\"%> <!-- jsp:include --> <jsp:include page=\"add.jsp\"> <jsp:param name=\"a\" value=\"1\"/> <jsp:param name=\"b\" value=\"2\"/> </jsp:include> <!-- \u4f7f\u7528 jstl \u7684 import \u6807\u7b7e\uff0c\u76f8\u5f53\u4e8e jsp:include \u6807\u7b7e\u7684\u52a0\u5f3a\u7248 --> <c:import url=\"add.jsp\"> <c:param name=\"a\" value=\"1\" /> <c:param name=\"b\" value=\"2\" /> </c:import> \u91cd\u5b9a\u5411 <c:redirect url=\"add.jsp\"> <c:param name=\"a\" value=\"1\"/> <c:param name=\"b\" value=\"2\"/> </c:redirect>","title":"\u7f51\u9875\u5bfc\u5165\u3001\u91cd\u5b9a\u5411\u3001URI \u5904\u7406\u6807\u7b7e"},{"location":"javaee/JspAndServlet/jstl/#_4","text":"set <!-- scriptlet \u5199\u6cd5 --> <%session.setAttribute(\"login\",\"ruby\");%> <!-- jstl --> <c:set var=\"login\" value=\"ruby\" scope=\"session\" /> <!-- \u5982\u4e0dvalue \u7684\u5185\u5bb9\u8f83\u957f\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 body --> <c:set var=\"details\" scopek=\"session\">ruby,weiss,yang,black</c:set> remove <c:remvoe var=\"login\" scope=\"session\" /> set javaBean <!-- \u5982\u679c\u8fd0\u7b97\u51fa\u6765\u7684\u7ed3\u679c\u662f\u4e00\u4e2a javaBean \u5219\u8c03\u7528 setName() \u65b9\u6cd5 --> <!-- \u5982\u679c\u8fd0\u7b97\u5904\u7406\u7684\u7ed3\u679c\u662f\u4e00\u4e2a Map\uff0c\u5219\u8c03\u7528 put() \u65b9\u6cd5 --> <c:set target=\"${user}\" property=\"name\" value=\"${param.name}\" /> \u8f93\u51fa\u6807\u7b7e <!--\u8fd9\u548c\u76f4\u63a5\u4f7f\u7528 ${param.message} \u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e out \u6807\u7b7e\u4f1a\u5c06\u5185\u5bb9\u4e2d\u7684 \u89d2\u62ec\u53f7\u3001\u53cc\u5f15\u53f7\u3001\u5355\u5f15\u53f7\u7b49\u5b57\u7b26\u6362\u6210\u76f8\u5e94\u7684\u8f6c\u4e49\u7b26\uff0c\u907f\u514d\u6ce8\u5165\u653b\u51fb --> <!-- \u8fd9\u4e2a\u529f\u80fd\u9ed8\u8ba4\u662f\u7531 escapXml \u6765\u63a7\u5236\uff0c\u9ed8\u8ba4\u503c\u662f true --> <c:out value=\"${param.message}\" />","title":"\u5c5e\u6027\u5904\u7406"},{"location":"javaee/JspAndServlet/jstl/#i18n","text":"","title":"I18N \u517c\u5bb9\u683c\u5f0f\u6807\u7b7e\u5e93"},{"location":"javaee/JspAndServlet/jstl/#i18n_1","text":"\u5bf9\u5e94\u56fd\u9645\u5316\u8fd9\u91cc\u4e0d\u505a\u8fc7\u591a\u7684\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 JSTL \u6765\u517c\u5bb9\u56fd\u9645\u5316\u8d44\u6e90\u3002 \u56fd\u9645\u5316\u7531\u4e09\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u5730\u533a\u4fe1\u606f\uff08Locale\uff09\uff0c\u8d44\u6e90\u5305\uff08Resource boudle\uff09\u548c\u57fa\u7840\u540d\u79f0\uff08Base name\uff09\u3002 \u5f15\u5165\u6807\u7b7e\u5e93 <%@taglib prifix='fmt' uri=\"http://java.sun.com/jsp/jstl/fmt\" %> set Base name <!-- \u4f5c\u7528\u57df\u9ed8\u8ba4\u662f\u6574\u4e2a\u9875\u9762--> <fmt:bundle basename=\"message1\"/> <!--\u4f46\u662f\u4e5f\u53ef\u4ee5\u5728\u9875\u9762\u91cc\u9762\u5c40\u90e8\u989d\u5916\u914d\u7f6e\uff0c\u4f1a\u4ee3\u66ff\u5168\u5c40\u914d\u7f6e --> <fmt:boudle basename=\"message2\"> <h1><fmt:message key=\"name\"/></h1> </fmt:boudle> set Locale <!-- \u9ed8\u8ba4\u6574\u4e2a\u9875\u9762\u6709\u6548 --> <fmt: setLocale value=\"zh_CN\"/> set Locale \u4e5f\u53ef\u4ee5\u5728 <fmt:message> \u4e0a\u5355\u72ec\u6307\u5b9a LocalizationContext <% ResourceBoudle en_US=new ResourceBoudle.getBoulde(\"hello\",new Locale(\"en\",\"US\")); pageContext.setAttribute(\"en_US\",en_US); %> <h1><fmt:message boudle=\"${en_US}\" key=\"name\"/></h1> \u683c\u5f0f\u5316\u6807\u7b7e\u5bfb\u627e\u5730\u533a\u4fe1\u606f\u7684\u987a\u5e8f\uff1a - \u4f7f\u7528 \u6307\u5b9a\u5730\u533a\u4fe1\u606f\u3002 - \u5bfb\u627e LocalizationContext \u4e2d\u7684\u5730\u533a\u4fe1\u606f\u3002 - \u4f7f\u7528\u6d4f\u89c8\u5668 Accept-Language \u8bf7\u6c42\u5934\u4e2d\u7684\u503c\u6765\u51b3\u5b9a\u5730\u533a\u4fe1\u606f\u3002 - \u4f7f\u7528\u540e\u5907\u5730\u533a\u4fe1\u606f\u3002 <fmt:setLocale> \u3001 <fmt:setBundle> \u548c <fmt:message> \u90fd\u4f1a\u8c03\u7528 HttpServletResponse \u7684 setLocale \u6765\u8bbe\u7f6e\u76f8\u5e94\u7f16\u7801\u3002\u4e0d\u8fc7\u8981\u6ce8\u610f\uff0csetCharacterEncoding \u6216\u8005 setContentType \u8bbe\u7f6e\u7f16\u7801\u7684\u4f18\u5148\u7ea7\u66f4\u9ad8\u3002 <fmt:requestEncoding> \u53ef\u4ee5\u7528\u6765\u8bbe\u7f6e\u8bf7\u6c42\u5bf9\u8c61\u7684\u7f16\u7801\u3002","title":"I18N \u6807\u7b7e\u5e93"},{"location":"javaee/JspAndServlet/jstl/#_5","text":"","title":"\u683c\u5f0f\u6807\u7b7e\u5e93"},{"location":"javaee/JspAndServlet/jstl/#_6","text":"<%taglib prefix=\"fmt\" uri=\"http://java.sun.com/jsp/jstl/fmt\"%> <!-- 2022-6-13 --> <fmt:formatDate value=\"${now}\"/><br/> <!-- 2022\u5e746\u670813\u65e5 \u661f\u671f\u4e00 --> <fmt:formatDate value=\"${now}\" dataStyle=\"full\"/><br/> <!-- \u4e0b\u534805\u65f621\u520610\u79d2 CST --> <fmt:formatDate value=\"${now}\" type=\"time\" timeStyle=\"full\"/><br/> <!-- 13.06.22 --> <fmt:formatDate value=\"${now}\" pattern=\"dd.MM.yy\"/><br/> <!-- 2022\u5e746\u670813\u65e5 \u661f\u671f\u4e00 \u4e0b\u534805\u65f627\u520621\u79d2 GMT+08:00 --> <fmt:timeZone value=\"GMT+8:00\" <fmt:formatDate value=\"${now}\" type=\"both\" timeStyle=\"full\" dateStyle=\"full\"/><br/> </fmt:timeZone> type\uff1a time \u8868\u793a\u65f6\u95f4\uff0c date \u8868\u793a\u65e5\u671f, both \u8868\u793a\u65e5\u671f+\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u662f date\u3002 dateStyle\uff1a\u6307\u5b9a\u65e5\u671f\u663e\u793a\u7684\u8be6\u7ec6\u7a0b\u5ea6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7684\u503c\u6709\uff1a default,short,medium,long,full\u3002 timeSty\uff1a\u6307\u5b9a\u65f6\u95f4\u663e\u793a\u7684\u8be6\u7ec6\u7a0b\u5ea6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7684\u503c\u6709\uff1a default,short,medium,long,full\u3002 pattern\uff1a\u81ea\u5b9a\u4e49\u663e\u793a\u683c\u5f0f\u3002 <fmt:timeZone> \uff1a\u6307\u5b9a\u65f6\u533a\uff0c\u503c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u6216\u8005 java.util.TimeZone \u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4f1a\u6839\u636e\u6d4f\u89c8\u5668\u7684 Accept-Language \u8bf7\u6c42\u5934\u6765\u51b3\u5b9a\u5730\u533a\u3002","title":"\u65f6\u95f4\u683c\u5f0f"},{"location":"javaee/JspAndServlet/jstl/#_7","text":"<!-- 12,345.678 --> <fmt:formatNumber value=\"12345.678\"/> <!--\uffe512,345.678 --> <fmt:formatNumber value=\"12345.678\" type=\"currency\"/> <!--$12,345.68 --> <fmt:formatNumber value=\"12345.678\" type=\"currency\" currencySymbol=\"$\"/> <!--1,234,568% --> <fmt:formatNumber value=\"12345.678\" type=\"percent\"/> <!--12,345.68--> <fmt:formatNumber value=\"12345.678\" pattern=\"#,#00.0#\"/> type: \u53ef\u8bbe\u7f6e\u7684\u503c\u6709 number\uff08\u9ed8\u8ba4\uff09\uff0ccurrency\uff0cpaercent\u3002 currencySymbol\uff1atype \u4e3a currency \u65f6\u5019\uff0c\u53ef\u4ee5\u6307\u5b9a\u8d27\u5e01\u683c\u5f0f\u5355\u4f4d\u3002 pattern\uff1a\u81ea\u5b9a\u4e49\u663e\u793a\u683c\u5f0f\u3002","title":"\u6570\u5b57\u683c\u5f0f"},{"location":"javaee/JspAndServlet/jstl/#_8","text":"JSTL \u63d0\u4f9b\u4e86\u8bb8\u591a\u516c\u7528\u7684\u51fd\u6570\u5e93\uff08 \u81ea\u5b9a\u4e49 EL \u51fd\u6570\u5e93\u53c2\u8003 \uff09 <!--\u5f15\u5165\u6807\u7b7e\u5e93 --> <%taglib prefix=\"fn\" uri=\"http://java.sun.com/jsp/jstl/functions\" %> <c:if test=\"${fn:startsWith(param.name,'coco')}\"> <h1>you name length\uff1a${fn:length(param.name)} </h1> </c:if> JSTL \u7684\u516c\u7528\u51fd\u6570\u90fd\u4ee5\u5b57\u7b26\u4e32\u5904\u7406\u4e3a\u4e3b\uff1a \u6539\u53d8\u5b57\u7b26\u4e32\u5927\u5c0f\u5199\uff1atoLowerCase,toUpperCase \u53d6\u5f97\u5b50\u5b57\u7b26\u4e32\uff1asubstring,substringAfter,substringBefore \u88c1\u526a\u5b57\u7b26\u4e32\u524d\u540e\u7a7a\u767d\uff1a trim \u5b57\u7b26\u66ff\u6362\uff1a replace \u68c0\u6d4b\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5b50\u5b57\u7b26\u4e32\uff1astartsWith,endsWith,contains,containsIgnoreCase \u68c0\u6d4b\u5b50\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\uff1aindexOf \u5207\u5272\u5b57\u7b26\u4e32\uff1asplit \u8fde\u63a5\u5b57\u7b26\u4e32\u6570\u7ec4\uff1ajoin \u66ff\u6362 XML \u5b57\u7b26\uff1aescapeXML","title":"\u51fd\u6570\u6807\u7b7e\u5e93"},{"location":"javaee/JspAndServlet/jstl/#xml","text":"","title":"XML \u6807\u7b7e\u5e93"},{"location":"javaee/JspAndServlet/tag/","text":"JSTL \u662f\u6807\u51c6\u89c4\u8303\uff0c\u53ea\u8981\u7b26\u5408 Servlet/JSP \u6807\u51c6\u89c4\u8303\u7684 Web \u5bb9\u5668\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 JSTL\uff0c\u7136\u800c\u6709\u4e9b\u9700\u6c42\u8fd8\u662f\u65e0\u6cd5\u5355\u9760 JSTL \u7684\u6807\u7b7e\u6765\u5b8c\u6210\uff0c\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u6211\u4eec\u81ea\u5b9a\u4e49\u6807\u7b7e\u5e93\u3002\u81ea\u5b9a\u4e49\u6807\u7b7e\u5e93\u6709\u4e00\u822c\u6709\u4e09\u79cd\u65b9\u5f0f\uff1aTag File\u3001Simple Tag \u548c Tag \u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u6211\u4eec\u9996\u5148\u4ece\u6700\u7b80\u5355\u7684 Tag file \u5f00\u59cb\u3002 Tag File \u5047\u5982\u4e00\u4e2a\u9519\u8bef\u663e\u793a\u9875\u9762\u7247\u6bb5\uff0c\u5b83\u53ef\u80fd\u4f1a\u5728\u591a\u4e2a\u9875\u9762\u4e2d\u4f7f\u7528\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u4e00\u822c\u90fd\u4f1a\u60f3\u529e\u6cd5\u628a\u5b83\u5355\u72ec\u5c01\u88c5\u6210\u4e00\u4e2a\u5b50\u7ec4\u4ef6\uff0c\u7136\u540e\u518d\u5728\u5176\u4ed6\u9875\u9762\u4e2d\u4f7f\u7528\u3002 \u5176\u4e2d\u4e00\u79cd\u65b9\u5f0f\u662f\u628a\u8be5\u9875\u9762\u7247\u6bb5\u5355\u72ec\u653e\u5728\u4e00\u4e2a jsp \u9875\u9762\uff08\u4f8b\u5982\uff1aerror.jsp\uff09\uff0c\u7136\u540e\u518d\u5728\u5176\u4ed6\u9875\u9762\u4f7f\u7528\u9759\u6001\u5305\u542b\uff08 <%include> \uff09\u6216\u8005\u52a8\u6001\u5305\u542b\uff08 <jsp:include> \uff09\u3002\u4f46\u8fd9\u79cd\u65b9\u5f0f\u6269\u5c55\u6027\u8f83\u5dee\uff0c\u800c\u4e14\u8fd9\u4e24\u79cd\u6807\u7b7e\u548c HTML \u6807\u7b7e\u683c\u5f0f\u51fa\u5165\u8f83\u5927\uff0c\u5bf9\u7f51\u9875\u5f00\u53d1\u4eba\u5458\u6765\u8bf4\u4e5f\u4e0d\u591f\u53cb\u597d\u3002 \u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\u662f\u4f7f\u7528 Tag File\uff0c\u8fd9\u79cd\u65b9\u5f0f\u548c JSTL\uff08JSTL \u5c31\u662f\u5b9e\u73b0\u4e86 Tag\uff09 \u4e00\u6837\uff0c\u66f4\u52a0\u63a5\u8fd1 HTML \u6807\u7b7e\uff0c\u4e0b\u9762\u793a\u4f8b\u628a\u4e00\u4e2a\u9519\u8bef\u5904\u7406\u9875\u9762\u5c01\u88c5\u6210 <html:Errors> \u6807\u7b7e\uff1a \u5b9a\u4e49 Errors.tag \u6587\u4ef6 <!-- \u5b9a\u4e49 Error.tag \u6587\u4ef6\uff0c\u5c06\u5176\u653e\u5230 WEB-INF/tags \u76ee\u5f55\u4e0b\uff08\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u76ee\u5f55\uff09 --> <%@tag description=\"\u663e\u793a\u9519\u8bef\u4fe1\u606f\u6807\u7b7e\" body-content=\"scriptless\" pageEncoding=\"UTF-8\"%> <%@attribute name=\"title\"%> <head> <meta charset=\"UTF-8\"> <link rel=\"stylesheet\" href=\"css/xxx.css\" type=\"text/css\"> <title>${title}</title> </head> \u4f7f\u7528 Errors.tag \u6807\u7b7e\uff1a <!-- \u5f15\u5165 Errors \u6807\u7b7e --> <%@taglib prefix=\"html\" tagdir=\"WEB-INF/tags\" %> <html> <head>...</head> <body> <html:Errors> <h1>\u4f1a\u5458\u6ce8\u518c</h1> ... </body> Tag File \u5b9e\u9645\u4e0a\u4f1a\u88ab\u8f6c\u8bd1\u4e3a \u7684\u5b50\u7c7b\uff0c\u9875\u9762\u8f93\u51fa\u4f1a\u88ab\u8f6c\u8bd1\u4e3a doTag() \u65b9\u6cd5\u4e2d\u7684\u4ee3\u7801\uff0c\u56e0\u6b64\u5728 Tag File \u6587\u4ef6\u4e2d\u4f7f\u7528\u9690\u5f0f\u5bf9\u8c61\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u662f doTag() \u65b9\u6cd5\u4e2d\u5c40\u90e8\u5bf9\u8c61\uff0c\u540c\u65f6\u5728 Tag File \u4e2d\u7684 Scriptlet \u811a\u672c\u4e2d\u5b9a\u4e49\u7684\u5c40\u90e8\u53d8\u91cf\u4e5f\u662f doTag() \u65b9\u6cd5\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u65e0\u6cd5\u76f4\u63a5\u5728 JSP \u9875\u9762\u4e2d\u4f7f\u7528\u3002 Tag Fiel \u6807\u7b7e\u5728\u5305\u542b Body \u5185\u5bb9\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7f16\u5199 HTML\u3001EL \u8868\u8fbe\u5f0f\u6216\u8005\u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u4f46\u662f\u4e0d\u5141\u8bb8\u6709 Scriptlet \u811a\u672c\u3002\u4f8b\u5982\uff1a <html:Errors><%=request.getParameter(\"a\")%></html:Erros> \u662f\u9519\u8bef\u7684\uff0c\u4e0d\u8fc7 Errors.tag \u6587\u4ef6\u672c\u8eab\u662f\u53ef\u4ee5\u4f7f\u7528 scriptlet \u811a\u672c\u7684\u3002\u53ef\u4ee5\u5728 tag \u6807\u7b7e\u7684 body-content \u5c5e\u6027\u4fee\u6539\u8be5\u529f\u80fd\uff1a scriptless\uff1abody \u4e0d\u5141\u8bb8\u6709 scriptless \u76f8\u5173\u4ee3\u7801\u3002 empty\uff1abody \u4e0d\u5141\u8bb8\u6709\u4efb\u4f55\u5185\u5bb9\u3002 tadependent\uff1a body \u4e2d\u6240\u6709\u7684\u5185\u5bb9\u90fd\u5f53\u4f5c\u7eaf\u6587\u5b57\u5904\u7406\uff0c\u56e0\u6b64\u53ef\u4ee5\u5305\u542b script \u811a\u672c\uff0c\u4f46\u662f\u4e0d\u4f1a\u5176\u4f5c\u7528\uff0c\u53ea\u4f1a\u6309\u7167\u539f\u6765\u7684\u6587\u4ef6\u8fdb\u884c\u8f93\u51fa\u3002 \u5c06 Tag File \u6587\u4ef6\u6253\u5305\u6210 jar \u5305\u4f7f\u7528 \u5982\u679c\u60f3\u628a\u81ea\u5b9a\u4e49\u7684 Tag File \u6807\u7b7e\u6253\u5305\u6210 jar \u5305\uff0c\u5219\u6709\u51e0\u4e2a\u5730\u65b9\u9700\u8981\u6ce8\u610f\uff1a \u6240\u6709\u7684 *.tag \u6587\u4ef6\u5fc5\u987b\u653e\u5728 jar \u5305\u7684 META-INF/tags \u6587\u4ef6\u5939\u6216\u8005\u5b50\u6587\u4ef6\u5939\u4e0b\u3002 \u9700\u8981\u5b9a\u4e49 TLD\uff08Tag Library Description\uff09\u6587\u4ef6\u3002 TLD \u6587\u4ef6\u5fc5\u987b\u653e\u5728 jar \u5305\u7684 META-INF/TLDS \u6587\u4ef6\u5939\u4e0b\u3002 \u5b9a\u4e49 TLD \u6587\u4ef6 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <taglib version=\"2.1\" xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2eeweb-jsptaglibrary_2_1.xsd\"> <tlib-version>1.0</tlib-version> <short-name>f</short-name> <uri>https://pers/cocoadel/jstl/tag</uri> <tag-file> <name>Errors</name> <path>/META-INF/tags/Errors.tag</tag-class> </tag-file> </taglib> Simple Tag Simple Tag \u7684\u5b9a\u4e49\u5206\u4e09\u6b65\uff1a \u7ee7\u627f SimpleTagSupport \u7c7b\u3002 \u5b9a\u4e49 TLD \u6587\u4ef6\u3002 \u5f15\u5165\u4f7f\u7528\u3002 \u4e0b\u9762\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2a if \u6807\u7b7e\u4e3a\u4f8b\u3002 \u7ee7\u627f SimpleTagSupport \u7c7b public class IfTag extends SimpleTagSupport{ private boolean test;//\u5b9a\u4e49 test \u5c5e\u6027 public void setTest(boolean test) { this.test=test; } public void doTag() throws JspException { if(test) { try { getJspBody().invoke(null);//\u8f93\u51fa \u6807\u7b7e body \u5185\u5bb9\u3002 }catch(IOException e) { throw new JspException(\"IfTag \u6267\u884c\u9519\u8bef\uff01\",e); } } } } \u5b9a\u4e49 TLD \u6587\u4ef6 TLD \u6587\u4ef6\u623f\u5b50 WEB-INF \u6587\u4ef6\u5939\u4e0b\uff0c\u5bb9\u5668\u4f1a\u81ea\u5b9a\u52a0\u8f7d\u5b83\uff0c\u5982\u679c\u662f\u6253\u5305\u6210 jar \u5219\u548c Tag File \u7c7b\u4f3c\u3002 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <taglib version=\"2.1\" xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2eeweb-jsptaglibrary_2_1.xsd\"> <tlib-version>1.0</tlib-version> <short-name>f</short-name> <uri>https://pers/cocoadel/jstl/tag</uri> <tag> <name>if</name> <tag-class>pers.cocoadel.jstl.tag.IfTag</tag-class> <body-content>scriptless</body-content> <attribute> <name>test</name> <!--\u5c5e\u6027\u540d\u79f0 --> <requried>true</requried><!--\u8be5\u5c5e\u6027\u662f\u5426\u5fc5\u987b\u8bbe\u7f6e --> <rtexprvalue>true</rtexprvalue><!--\u662f\u5426\u63a5\u6536\u8fd0\u884c\u65f6\u8ba1\u7b97\u7ed3\u6784\uff0c\u6bd4\u5982 EL \u8868\u8fbe\u5f0f --> <type>boolean</type><!-- \u5c5e\u6027\u503c\u7684\u7c7b\u578b --> </attribute> </tag> </taglib> \u5f15\u5165\u5e76\u4e14\u4f7f\u7528 <%@taglib prefix=\"f\" prefix=\"https://pers.cocoadel/jstl/tag\"%> <html> <body> <f:if test=\"${param.password=='123'}\"> <h1>\u767b\u5f55\u6210\u529f</h1> </f:if> </body> </html> SimpleSupport \u7684 getParent \u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u7236\u6807\u7b7e\uff0c\u6bd4\u5982\u5728\u5b9e\u73b0 choose\u3001when \u548c otherWise \u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u77e5\u9053\u7236\u6807\u7b7e\u7684\u5c5e\u6027\u72b6\u6001\u3002 Tag \u81ea\u5b9a\u4e49\u6807\u7b7e \u4f7f\u7528 Simple Tag \u6765\u5b9e\u73b0\u81ea\u5b9a\u6807\u7b7e\u6bd4\u8f83\u7b80\u5355\uff0c\u6240\u8981\u5b9e\u73b0\u7684\u5185\u5bb9\u90fd\u5728 doTag \u65b9\u6cd5\u4e2d\u8fdb\u884c\u3002\u5728\u5927\u591a\u6570\u7684\u60c5\u51b5\u4e0b Simple Tag \u5df2\u7ecf\u80fd\u6ee1\u8db3\u81ea\u5b9a\u4e49\u6807\u7b7e\u7684\u9700\u6c42\u3002\u4f46\u662f Simple Tag \u662f Servlet 2.0 \u4e4b\u540e\u624d\u52a0\u5165\u5230\u6807\u51c6\u4e2d\uff0c\u5982\u679c\u5728 Servlet 2.0 \u4e4b\u524d\u8981\u5b9e\u73b0\u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u53ea\u80fd\u901a\u8fc7 Tag \u63a5\u53e3\u4e0b\u7684\u76f8\u5173\u7c7b\u7684\u5b9e\u73b0\u6765\u5b8c\u6210\u3002 Tag \u7684\u751f\u547d\u5468\u671f \u5f53 JSP \u4e2d\u9047\u5230 TagSupport \u81ea\u5b9a\u4e49\u6807\u7b7e\u7684\u65f6\u5019\uff0c\u4f1a\u8fdb\u884c\u4ee5\u4e0b\u52a8\u4f5c\uff1a \u5c1d\u8bd5\u4ece\u6807\u7b7e\u6c60\u4e2d\u627e\u5230\u53ef\u7528\u7684\u6807\u7b7e\u5bf9\u8c61\uff0c\u5982\u679c\u627e\u5230\u5219\u76f4\u63a5\u4f7f\u7528\uff0c\u6ca1\u6709\u5219\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6807\u7b7e\u5bf9\u8c61\u3002 \u8c03\u7528\u6807\u7b7e\u5904\u7406\u5668\u7684 setPageContext() \u65b9\u6cd5\u8bbe\u7f6e PageContext \u5bf9\u8c61\u3002 \u5982\u679c\u662f\u5d4c\u5957\u6807\u7b7e\u4e2d\u7684\u5185\u5c42\u6807\u7b7e\uff0c\u5219\u8c03\u7528\u6807\u7b7e\u5904\u7406\u5668\u7684 setParent() \u65b9\u6cd5\uff0c\u4f20\u5165\u5916\u5c42\u6807\u7b7e\u5904\u7406\u5668\u5b9e\u4f8b\u3002 \u8bbe\u7f6e\u6807\u7b7e\u5904\u7406\u5668\u5c5e\u6027\u3002 \u8c03\u7528\u6807\u7b7e\u5904\u7406\u5668\u7684 doStartTag() \u65b9\u6cd5\uff0c\u542f\u52a8\u6267\u884c\u6d41\u7a0b\uff08\u6267\u884c\u6d41\u7a0b\u5982\u4e0a\u56fe\u6240\u793a\uff09\u3002 \u5c06\u6807\u7b7e\u5904\u7406\u5668\u5bf9\u8c61\u653e\u5165\u6807\u7b7e\u6c60\u4e2d\u4ee5\u4fbf\u518d\u6b21\u4f7f\u7528\u3002 \u91cd\u590d\u6267\u884c\u6807\u7b7e Body \u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684 forEach \u6807\u7b7e\u3002 public class ForEachTag extends TagSupport{ private static final long serialVersionUID = 6258494991807365662L; private String var; private Iterator<Object> items; public void setVar(String var) { this.var=var; } public void setItems(Collection<Object> items) { this.items=items.iterator(); } @Override public int doStartTag() { if(items.hasNext()) {//\u6d4b\u8bd5\u5e76\u4e14\u6267\u884c\u7b2c\u4e00\u6b21\u5904\u7406 this.pageContext.setAttribute(var,items.next()); return EVAL_BODY_INCLUDE;//\u540e\u7eed\u8c03\u7528 doAfterBody \u65b9\u6cd5\u3002 } return SKIP_BODY; } @Override public int doAfterBody() { if(items.hasNext()) {//\u6d4b\u8bd5\u6267\u884c\u540e\u7eed\u5904\u7406 this.pageContext.setAttribute(var, items.next()); return EVAL_BODY_AGAIN;//\u8fd4\u56de\u8be5\u503c\u4f1a\u518d\u6b21\u8c03\u7528 doAfterBody \u65b9\u6cd5\u3002 } this.pageContext.removeAttribute(var); return SKIP_BODY;//\u540e\u7eed\u6267\u884c doEndTag \u65b9\u6cd5\u3002 } } \u5b9e\u73b0\u4e86\u6807\u7b7e\u5904\u7406\u5668\u540e\uff0c\u548c\u524d\u9762\u7684 Simple Tag \u4e00\u6837\uff0c\u9700\u8981\u901a\u8fc7 TLD \u6587\u4ef6\u6765\u6ce8\u518c\uff0c\u7136\u540e\u518d\u5728 JSP \u9875\u9762\u4e2d\u901a\u8fc7 taglib \u6807\u7b7e\u5f15\u5165\u4f7f\u7528\uff0c\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u3002 \u5904\u7406\u6807\u7b7e Body \u8fd0\u884c\u7ed3\u679c \u5982\u679c\u60f3\u5728 Body \u6267\u884c\u540e\uff0c\u83b7\u53d6 Body \u5904\u7406\u7684\u7ed3\u679c\uff0c\u518d\u505a\u8fdb\u4e00\u6b65\u7684\u5904\u7406\uff0c\u90a3\u5e94\u8be5\u600e\u4e48\u505a\uff1f\u4f8b\u5982\u5b9e\u73b0\u4e00\u4e2a\u5c06\u8fd4\u56de\u5b57\u7b26\u53d8\u6210\u5927\u5199\u5b57\u7b26\u7684\u6807\u7b7e\u3002\u53ea\u662f\u7ee7\u627f TagSupport \u662f\u65e0\u6cd5\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f BodyTagSupport \u7c7b\u6765\u5b9e\u73b0\u3002 BodyTagSupport \u5728\u6267\u884c\u6d41\u7a0b\u4e2d\u6dfb\u52a0\u4e86\u4e24\u4e2a\u65b9\u6cd5 setBodyContent \u548c doInitBody \u65b9\u6cd5\uff1a \u6211\u4eec\u4e0d\u9700\u8981\u53d6\u91cd\u5199\u8fd9\u4e24\u4e2a\u65b0\u65b9\u6cd5\uff0c\u53ea\u9700\u8981\u77e5\u9053\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u6267\u884c\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 doAfterTag \u548c doEndTag \u65b9\u6cd5\u4e2d\u901a\u8fc7 getBodyContent \u53d6\u5f97 BodyContent\u5bf9\u8c61\uff08Writer \u5b50\u5bf9\u8c61\uff09\uff0c\u8be5\u5bf9\u8c61\u4e2d\u53ef\u4ee5\u83b7\u53d6 Body \u6267\u884c\u540e\u7684\u5904\u7406\u7ed3\u679c\u3002\u4e0b\u9762\u901a\u8fc7 ToUpperCaseTag \u4f5c\u4e3a\u793a\u4f8b\u6765\u4ecb\u7ecd\u5176\u7528\u6cd5\uff1a public class ToUpperCaseTag extends BodyTagSupport{ private static final long serialVersionUID = 3476090049480183957L; @Override public int doEndTag() throws JspException{ //\u83b7\u53d6\u6807\u7b7e Body \u8fd0\u884c\u540e\u7684\u7ed3\u679c\uff0c\u5e76\u4e14\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u7b26 String content=getBodyContent().getString().toUpperCase(); try { //\u5728\u901a\u8fc7 pageContext \u83b7\u53d6 Writer \u5bf9\u8c61\uff0c\u8f93\u51fa\u8f6c\u6362\u540e\u7684\u7ed3\u679c\u5230\u6d4f\u89c8\u5668\u3002 pageContext.getOut().write(content); } catch (IOException e) { throw new JspException(\"ToUpperCaseTag \u6807\u7b7e\u6267\u884c\u51fa\u9519\uff01\",e); } return EVAL_PAGE; } } \u4f7f\u7528 Tag \u63a5\u53e3\u81ea\u5b9a\u4e49\u5b9e\u73b0 if\u3001forEach\u3001choose \u7b49\u5177\u4f53\u4ee3\u7801\u53c2\u8003\u3002","title":"\u81ea\u5b9a\u4e49\u6807\u7b7e"},{"location":"javaee/JspAndServlet/tag/#tag-file","text":"\u5047\u5982\u4e00\u4e2a\u9519\u8bef\u663e\u793a\u9875\u9762\u7247\u6bb5\uff0c\u5b83\u53ef\u80fd\u4f1a\u5728\u591a\u4e2a\u9875\u9762\u4e2d\u4f7f\u7528\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u4e00\u822c\u90fd\u4f1a\u60f3\u529e\u6cd5\u628a\u5b83\u5355\u72ec\u5c01\u88c5\u6210\u4e00\u4e2a\u5b50\u7ec4\u4ef6\uff0c\u7136\u540e\u518d\u5728\u5176\u4ed6\u9875\u9762\u4e2d\u4f7f\u7528\u3002 \u5176\u4e2d\u4e00\u79cd\u65b9\u5f0f\u662f\u628a\u8be5\u9875\u9762\u7247\u6bb5\u5355\u72ec\u653e\u5728\u4e00\u4e2a jsp \u9875\u9762\uff08\u4f8b\u5982\uff1aerror.jsp\uff09\uff0c\u7136\u540e\u518d\u5728\u5176\u4ed6\u9875\u9762\u4f7f\u7528\u9759\u6001\u5305\u542b\uff08 <%include> \uff09\u6216\u8005\u52a8\u6001\u5305\u542b\uff08 <jsp:include> \uff09\u3002\u4f46\u8fd9\u79cd\u65b9\u5f0f\u6269\u5c55\u6027\u8f83\u5dee\uff0c\u800c\u4e14\u8fd9\u4e24\u79cd\u6807\u7b7e\u548c HTML \u6807\u7b7e\u683c\u5f0f\u51fa\u5165\u8f83\u5927\uff0c\u5bf9\u7f51\u9875\u5f00\u53d1\u4eba\u5458\u6765\u8bf4\u4e5f\u4e0d\u591f\u53cb\u597d\u3002 \u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\u662f\u4f7f\u7528 Tag File\uff0c\u8fd9\u79cd\u65b9\u5f0f\u548c JSTL\uff08JSTL \u5c31\u662f\u5b9e\u73b0\u4e86 Tag\uff09 \u4e00\u6837\uff0c\u66f4\u52a0\u63a5\u8fd1 HTML \u6807\u7b7e\uff0c\u4e0b\u9762\u793a\u4f8b\u628a\u4e00\u4e2a\u9519\u8bef\u5904\u7406\u9875\u9762\u5c01\u88c5\u6210 <html:Errors> \u6807\u7b7e\uff1a \u5b9a\u4e49 Errors.tag \u6587\u4ef6 <!-- \u5b9a\u4e49 Error.tag \u6587\u4ef6\uff0c\u5c06\u5176\u653e\u5230 WEB-INF/tags \u76ee\u5f55\u4e0b\uff08\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u76ee\u5f55\uff09 --> <%@tag description=\"\u663e\u793a\u9519\u8bef\u4fe1\u606f\u6807\u7b7e\" body-content=\"scriptless\" pageEncoding=\"UTF-8\"%> <%@attribute name=\"title\"%> <head> <meta charset=\"UTF-8\"> <link rel=\"stylesheet\" href=\"css/xxx.css\" type=\"text/css\"> <title>${title}</title> </head> \u4f7f\u7528 Errors.tag \u6807\u7b7e\uff1a <!-- \u5f15\u5165 Errors \u6807\u7b7e --> <%@taglib prefix=\"html\" tagdir=\"WEB-INF/tags\" %> <html> <head>...</head> <body> <html:Errors> <h1>\u4f1a\u5458\u6ce8\u518c</h1> ... </body> Tag File \u5b9e\u9645\u4e0a\u4f1a\u88ab\u8f6c\u8bd1\u4e3a \u7684\u5b50\u7c7b\uff0c\u9875\u9762\u8f93\u51fa\u4f1a\u88ab\u8f6c\u8bd1\u4e3a doTag() \u65b9\u6cd5\u4e2d\u7684\u4ee3\u7801\uff0c\u56e0\u6b64\u5728 Tag File \u6587\u4ef6\u4e2d\u4f7f\u7528\u9690\u5f0f\u5bf9\u8c61\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u662f doTag() \u65b9\u6cd5\u4e2d\u5c40\u90e8\u5bf9\u8c61\uff0c\u540c\u65f6\u5728 Tag File \u4e2d\u7684 Scriptlet \u811a\u672c\u4e2d\u5b9a\u4e49\u7684\u5c40\u90e8\u53d8\u91cf\u4e5f\u662f doTag() \u65b9\u6cd5\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u65e0\u6cd5\u76f4\u63a5\u5728 JSP \u9875\u9762\u4e2d\u4f7f\u7528\u3002 Tag Fiel \u6807\u7b7e\u5728\u5305\u542b Body \u5185\u5bb9\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7f16\u5199 HTML\u3001EL \u8868\u8fbe\u5f0f\u6216\u8005\u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u4f46\u662f\u4e0d\u5141\u8bb8\u6709 Scriptlet \u811a\u672c\u3002\u4f8b\u5982\uff1a <html:Errors><%=request.getParameter(\"a\")%></html:Erros> \u662f\u9519\u8bef\u7684\uff0c\u4e0d\u8fc7 Errors.tag \u6587\u4ef6\u672c\u8eab\u662f\u53ef\u4ee5\u4f7f\u7528 scriptlet \u811a\u672c\u7684\u3002\u53ef\u4ee5\u5728 tag \u6807\u7b7e\u7684 body-content \u5c5e\u6027\u4fee\u6539\u8be5\u529f\u80fd\uff1a scriptless\uff1abody \u4e0d\u5141\u8bb8\u6709 scriptless \u76f8\u5173\u4ee3\u7801\u3002 empty\uff1abody \u4e0d\u5141\u8bb8\u6709\u4efb\u4f55\u5185\u5bb9\u3002 tadependent\uff1a body \u4e2d\u6240\u6709\u7684\u5185\u5bb9\u90fd\u5f53\u4f5c\u7eaf\u6587\u5b57\u5904\u7406\uff0c\u56e0\u6b64\u53ef\u4ee5\u5305\u542b script \u811a\u672c\uff0c\u4f46\u662f\u4e0d\u4f1a\u5176\u4f5c\u7528\uff0c\u53ea\u4f1a\u6309\u7167\u539f\u6765\u7684\u6587\u4ef6\u8fdb\u884c\u8f93\u51fa\u3002 \u5c06 Tag File \u6587\u4ef6\u6253\u5305\u6210 jar \u5305\u4f7f\u7528 \u5982\u679c\u60f3\u628a\u81ea\u5b9a\u4e49\u7684 Tag File \u6807\u7b7e\u6253\u5305\u6210 jar \u5305\uff0c\u5219\u6709\u51e0\u4e2a\u5730\u65b9\u9700\u8981\u6ce8\u610f\uff1a \u6240\u6709\u7684 *.tag \u6587\u4ef6\u5fc5\u987b\u653e\u5728 jar \u5305\u7684 META-INF/tags \u6587\u4ef6\u5939\u6216\u8005\u5b50\u6587\u4ef6\u5939\u4e0b\u3002 \u9700\u8981\u5b9a\u4e49 TLD\uff08Tag Library Description\uff09\u6587\u4ef6\u3002 TLD \u6587\u4ef6\u5fc5\u987b\u653e\u5728 jar \u5305\u7684 META-INF/TLDS \u6587\u4ef6\u5939\u4e0b\u3002 \u5b9a\u4e49 TLD \u6587\u4ef6 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <taglib version=\"2.1\" xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2eeweb-jsptaglibrary_2_1.xsd\"> <tlib-version>1.0</tlib-version> <short-name>f</short-name> <uri>https://pers/cocoadel/jstl/tag</uri> <tag-file> <name>Errors</name> <path>/META-INF/tags/Errors.tag</tag-class> </tag-file> </taglib>","title":"Tag File"},{"location":"javaee/JspAndServlet/tag/#simple-tag","text":"Simple Tag \u7684\u5b9a\u4e49\u5206\u4e09\u6b65\uff1a \u7ee7\u627f SimpleTagSupport \u7c7b\u3002 \u5b9a\u4e49 TLD \u6587\u4ef6\u3002 \u5f15\u5165\u4f7f\u7528\u3002 \u4e0b\u9762\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2a if \u6807\u7b7e\u4e3a\u4f8b\u3002 \u7ee7\u627f SimpleTagSupport \u7c7b public class IfTag extends SimpleTagSupport{ private boolean test;//\u5b9a\u4e49 test \u5c5e\u6027 public void setTest(boolean test) { this.test=test; } public void doTag() throws JspException { if(test) { try { getJspBody().invoke(null);//\u8f93\u51fa \u6807\u7b7e body \u5185\u5bb9\u3002 }catch(IOException e) { throw new JspException(\"IfTag \u6267\u884c\u9519\u8bef\uff01\",e); } } } } \u5b9a\u4e49 TLD \u6587\u4ef6 TLD \u6587\u4ef6\u623f\u5b50 WEB-INF \u6587\u4ef6\u5939\u4e0b\uff0c\u5bb9\u5668\u4f1a\u81ea\u5b9a\u52a0\u8f7d\u5b83\uff0c\u5982\u679c\u662f\u6253\u5305\u6210 jar \u5219\u548c Tag File \u7c7b\u4f3c\u3002 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <taglib version=\"2.1\" xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2eeweb-jsptaglibrary_2_1.xsd\"> <tlib-version>1.0</tlib-version> <short-name>f</short-name> <uri>https://pers/cocoadel/jstl/tag</uri> <tag> <name>if</name> <tag-class>pers.cocoadel.jstl.tag.IfTag</tag-class> <body-content>scriptless</body-content> <attribute> <name>test</name> <!--\u5c5e\u6027\u540d\u79f0 --> <requried>true</requried><!--\u8be5\u5c5e\u6027\u662f\u5426\u5fc5\u987b\u8bbe\u7f6e --> <rtexprvalue>true</rtexprvalue><!--\u662f\u5426\u63a5\u6536\u8fd0\u884c\u65f6\u8ba1\u7b97\u7ed3\u6784\uff0c\u6bd4\u5982 EL \u8868\u8fbe\u5f0f --> <type>boolean</type><!-- \u5c5e\u6027\u503c\u7684\u7c7b\u578b --> </attribute> </tag> </taglib> \u5f15\u5165\u5e76\u4e14\u4f7f\u7528 <%@taglib prefix=\"f\" prefix=\"https://pers.cocoadel/jstl/tag\"%> <html> <body> <f:if test=\"${param.password=='123'}\"> <h1>\u767b\u5f55\u6210\u529f</h1> </f:if> </body> </html> SimpleSupport \u7684 getParent \u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u7236\u6807\u7b7e\uff0c\u6bd4\u5982\u5728\u5b9e\u73b0 choose\u3001when \u548c otherWise \u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u77e5\u9053\u7236\u6807\u7b7e\u7684\u5c5e\u6027\u72b6\u6001\u3002","title":"Simple Tag"},{"location":"javaee/JspAndServlet/tag/#tag","text":"\u4f7f\u7528 Simple Tag \u6765\u5b9e\u73b0\u81ea\u5b9a\u6807\u7b7e\u6bd4\u8f83\u7b80\u5355\uff0c\u6240\u8981\u5b9e\u73b0\u7684\u5185\u5bb9\u90fd\u5728 doTag \u65b9\u6cd5\u4e2d\u8fdb\u884c\u3002\u5728\u5927\u591a\u6570\u7684\u60c5\u51b5\u4e0b Simple Tag \u5df2\u7ecf\u80fd\u6ee1\u8db3\u81ea\u5b9a\u4e49\u6807\u7b7e\u7684\u9700\u6c42\u3002\u4f46\u662f Simple Tag \u662f Servlet 2.0 \u4e4b\u540e\u624d\u52a0\u5165\u5230\u6807\u51c6\u4e2d\uff0c\u5982\u679c\u5728 Servlet 2.0 \u4e4b\u524d\u8981\u5b9e\u73b0\u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u53ea\u80fd\u901a\u8fc7 Tag \u63a5\u53e3\u4e0b\u7684\u76f8\u5173\u7c7b\u7684\u5b9e\u73b0\u6765\u5b8c\u6210\u3002","title":"Tag \u81ea\u5b9a\u4e49\u6807\u7b7e"},{"location":"javaee/JspAndServlet/tag/#tag_1","text":"\u5f53 JSP \u4e2d\u9047\u5230 TagSupport \u81ea\u5b9a\u4e49\u6807\u7b7e\u7684\u65f6\u5019\uff0c\u4f1a\u8fdb\u884c\u4ee5\u4e0b\u52a8\u4f5c\uff1a \u5c1d\u8bd5\u4ece\u6807\u7b7e\u6c60\u4e2d\u627e\u5230\u53ef\u7528\u7684\u6807\u7b7e\u5bf9\u8c61\uff0c\u5982\u679c\u627e\u5230\u5219\u76f4\u63a5\u4f7f\u7528\uff0c\u6ca1\u6709\u5219\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6807\u7b7e\u5bf9\u8c61\u3002 \u8c03\u7528\u6807\u7b7e\u5904\u7406\u5668\u7684 setPageContext() \u65b9\u6cd5\u8bbe\u7f6e PageContext \u5bf9\u8c61\u3002 \u5982\u679c\u662f\u5d4c\u5957\u6807\u7b7e\u4e2d\u7684\u5185\u5c42\u6807\u7b7e\uff0c\u5219\u8c03\u7528\u6807\u7b7e\u5904\u7406\u5668\u7684 setParent() \u65b9\u6cd5\uff0c\u4f20\u5165\u5916\u5c42\u6807\u7b7e\u5904\u7406\u5668\u5b9e\u4f8b\u3002 \u8bbe\u7f6e\u6807\u7b7e\u5904\u7406\u5668\u5c5e\u6027\u3002 \u8c03\u7528\u6807\u7b7e\u5904\u7406\u5668\u7684 doStartTag() \u65b9\u6cd5\uff0c\u542f\u52a8\u6267\u884c\u6d41\u7a0b\uff08\u6267\u884c\u6d41\u7a0b\u5982\u4e0a\u56fe\u6240\u793a\uff09\u3002 \u5c06\u6807\u7b7e\u5904\u7406\u5668\u5bf9\u8c61\u653e\u5165\u6807\u7b7e\u6c60\u4e2d\u4ee5\u4fbf\u518d\u6b21\u4f7f\u7528\u3002","title":"Tag \u7684\u751f\u547d\u5468\u671f"},{"location":"javaee/JspAndServlet/tag/#body","text":"\u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684 forEach \u6807\u7b7e\u3002 public class ForEachTag extends TagSupport{ private static final long serialVersionUID = 6258494991807365662L; private String var; private Iterator<Object> items; public void setVar(String var) { this.var=var; } public void setItems(Collection<Object> items) { this.items=items.iterator(); } @Override public int doStartTag() { if(items.hasNext()) {//\u6d4b\u8bd5\u5e76\u4e14\u6267\u884c\u7b2c\u4e00\u6b21\u5904\u7406 this.pageContext.setAttribute(var,items.next()); return EVAL_BODY_INCLUDE;//\u540e\u7eed\u8c03\u7528 doAfterBody \u65b9\u6cd5\u3002 } return SKIP_BODY; } @Override public int doAfterBody() { if(items.hasNext()) {//\u6d4b\u8bd5\u6267\u884c\u540e\u7eed\u5904\u7406 this.pageContext.setAttribute(var, items.next()); return EVAL_BODY_AGAIN;//\u8fd4\u56de\u8be5\u503c\u4f1a\u518d\u6b21\u8c03\u7528 doAfterBody \u65b9\u6cd5\u3002 } this.pageContext.removeAttribute(var); return SKIP_BODY;//\u540e\u7eed\u6267\u884c doEndTag \u65b9\u6cd5\u3002 } } \u5b9e\u73b0\u4e86\u6807\u7b7e\u5904\u7406\u5668\u540e\uff0c\u548c\u524d\u9762\u7684 Simple Tag \u4e00\u6837\uff0c\u9700\u8981\u901a\u8fc7 TLD \u6587\u4ef6\u6765\u6ce8\u518c\uff0c\u7136\u540e\u518d\u5728 JSP \u9875\u9762\u4e2d\u901a\u8fc7 taglib \u6807\u7b7e\u5f15\u5165\u4f7f\u7528\uff0c\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u3002","title":"\u91cd\u590d\u6267\u884c\u6807\u7b7e Body"},{"location":"javaee/JspAndServlet/tag/#body_1","text":"\u5982\u679c\u60f3\u5728 Body \u6267\u884c\u540e\uff0c\u83b7\u53d6 Body \u5904\u7406\u7684\u7ed3\u679c\uff0c\u518d\u505a\u8fdb\u4e00\u6b65\u7684\u5904\u7406\uff0c\u90a3\u5e94\u8be5\u600e\u4e48\u505a\uff1f\u4f8b\u5982\u5b9e\u73b0\u4e00\u4e2a\u5c06\u8fd4\u56de\u5b57\u7b26\u53d8\u6210\u5927\u5199\u5b57\u7b26\u7684\u6807\u7b7e\u3002\u53ea\u662f\u7ee7\u627f TagSupport \u662f\u65e0\u6cd5\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f BodyTagSupport \u7c7b\u6765\u5b9e\u73b0\u3002 BodyTagSupport \u5728\u6267\u884c\u6d41\u7a0b\u4e2d\u6dfb\u52a0\u4e86\u4e24\u4e2a\u65b9\u6cd5 setBodyContent \u548c doInitBody \u65b9\u6cd5\uff1a \u6211\u4eec\u4e0d\u9700\u8981\u53d6\u91cd\u5199\u8fd9\u4e24\u4e2a\u65b0\u65b9\u6cd5\uff0c\u53ea\u9700\u8981\u77e5\u9053\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u6267\u884c\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 doAfterTag \u548c doEndTag \u65b9\u6cd5\u4e2d\u901a\u8fc7 getBodyContent \u53d6\u5f97 BodyContent\u5bf9\u8c61\uff08Writer \u5b50\u5bf9\u8c61\uff09\uff0c\u8be5\u5bf9\u8c61\u4e2d\u53ef\u4ee5\u83b7\u53d6 Body \u6267\u884c\u540e\u7684\u5904\u7406\u7ed3\u679c\u3002\u4e0b\u9762\u901a\u8fc7 ToUpperCaseTag \u4f5c\u4e3a\u793a\u4f8b\u6765\u4ecb\u7ecd\u5176\u7528\u6cd5\uff1a public class ToUpperCaseTag extends BodyTagSupport{ private static final long serialVersionUID = 3476090049480183957L; @Override public int doEndTag() throws JspException{ //\u83b7\u53d6\u6807\u7b7e Body \u8fd0\u884c\u540e\u7684\u7ed3\u679c\uff0c\u5e76\u4e14\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u7b26 String content=getBodyContent().getString().toUpperCase(); try { //\u5728\u901a\u8fc7 pageContext \u83b7\u53d6 Writer \u5bf9\u8c61\uff0c\u8f93\u51fa\u8f6c\u6362\u540e\u7684\u7ed3\u679c\u5230\u6d4f\u89c8\u5668\u3002 pageContext.getOut().write(content); } catch (IOException e) { throw new JspException(\"ToUpperCaseTag \u6807\u7b7e\u6267\u884c\u51fa\u9519\uff01\",e); } return EVAL_PAGE; } } \u4f7f\u7528 Tag \u63a5\u53e3\u81ea\u5b9a\u4e49\u5b9e\u73b0 if\u3001forEach\u3001choose \u7b49\u5177\u4f53\u4ee3\u7801\u53c2\u8003\u3002","title":"\u5904\u7406\u6807\u7b7e Body \u8fd0\u884c\u7ed3\u679c"},{"location":"javaee/JspAndServlet/web_container_security/","text":"","title":"Web container security"},{"location":"javaee/JspAndServlet/servlet_api/AsyncServlet/","text":"\u5f02\u6b65 Servlet AsyncContext \u4e3a\u4e86\u652f\u6301\u5f02\u6b65\u5904\u7406\uff0cServlet 3.0 \u5728 ServletRequest \u4e0a\u63d0\u4f9b\u4e86 startAsync \u65b9\u6cd5\uff1a AsyncContext startAsync() throws java.lang.IllegalStateException; AsyncContext startAsync(ServletRequest request,ServletResponse response) throws java.lang.IllegalStateException; \u4e24\u4e2a\u65b9\u6cd5\u90fd\u4f1a\u8fd4\u56de AsyncContext \u5bf9\u8c61\uff0c\u7528\u4e8e\u540e\u7eed\u5f02\u6b65\u5904\u7406\uff1a public interface AsyncContext { ... ServletRequest getRequest(); ServletResponse getResponse(); void dispatch(); void complete(); void setTimeout(long timeout); long getTimeout(); ... } \u58f0\u660e\u5f02\u6b65\u652f\u6301\uff1a \u6ce8\u89e3\uff1a @WebServlet(urlPatterns=\"/xxxx\", asyncSupported=true) Web.xml \uff1a <servlet> <servlet-name>xxx</servlet-name> <servlet-class>xxx.xx.x</servlet-class> <async-supported>true</async-supported> </servlet> \u6ce8\u610f\uff1a \u5982\u679c\u5f02\u6b65 Servlet \u524d\u9762\u6709 Filter\uff0c\u90a3\u4e48\u8fd9\u4e9b Filter \u4e5f\u5fc5\u987b\u58f0\u660e\u652f\u6301\u5f02\u6b65\uff0c\u58f0\u660e\u65b9\u5f0f\u548c\u4e0a\u9762\u7c7b\u4f3c\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u5f02\u6b65 Servlet \u793a\u4f8b\uff1a protected void doGet(HttpServletRequest request, HttpServletResponse response){ AsyncContext context=request.startAsync();//\u5f00\u59cb\u5f02\u6b65\u5904\u7406 doAsync(context).thenAcceptAsync(resource->{ try{ //\u5f02\u6b65\u5904\u7406\u5b8c\u6210\u540e\uff0c\u53d6\u51fa httpServletResponse \u5bf9\u8c61\uff0c\u5199\u5165\u54cd\u5e94\u5185\u5bb9\u3002 context.getResponse.getWriter.println(resource); context.complete();// \u7ed3\u675f\u54cd\u5e94 } catch(Exception e){ throw new RuntimeException(e); } }); private CompleableFuture<String> doAsync(AsyncContext context){ return CompleableFuture.supplyAsync(()->{ try{ //\u4ece HttpServletRequest \u4e2d\u83b7\u53d6\u53c2\u6570 String rescource=context.getRequest().getParameter(\"resource\"); //\u6a21\u62df\u957f\u65f6\u95f4\u7684\u5f02\u6b65\u4efb\u52a1 Thread.sleep(3000); return String.format(\"%s back finally...XD\",rescource); }catch(Exception e){ throw new RuntimeException(e); } }); } } \u66f4\u591a AsyncContext \u7ec6\u8282 \u5728\u652f\u6301\u5f02\u6b65\u7684 Servlet \u6216\u8fc7\u6ee4\u5668\u4e2d\u8c03\u7528\u8bf7\u6c42\u5bf9\u8c61\u7684 startAsync \u65b9\u6cd5\uff0c\u5b8c\u6210 service \u65b9\u6cd5\u540e\uff0c\u82e5\u6709\u8fc7\u6ee4\u5668\uff0c\u4e5f\u4f1a\u4f9d\u6b21\u8fd4\u56de\uff0c\u4e4b\u540e\u91ca\u653e\u5bb9\u5668\u5206\u914d\u7684\u7ebf\u7a0b\u3002 \u5728\u4e24\u4e2a\u652f\u6301\u5f02\u6b65\u5904\u7406\u7684 Servlet \u95f4\u8f6c\u53d1\u524d\uff0c\u4e0d\u80fd\u8fde\u7eed\u4e24\u6b21\u8c03\u7528 startAsync \u65b9\u6cd5\uff0c\u5426\u5219\u4f1a\u5f15\u53d1 IllegalStateException\u3002 \u5c06\u8bf7\u6c42\u4ece\u652f\u6301\u5f02\u6b65\u5904\u7406\u7684 Servlet \u8f6c\u53d1\u81f3\u4e00\u4e2a\u540c\u6b65\u5904\u7406\u7684 Servlet \u662f\u53ef\u884c\u7684\uff0c\u5bb9\u5668\u4f1a\u8d1f\u8d23\u8c03\u7528 AsyncContext \u7684 complete \u65b9\u6cd5\u3002 \u5982\u679c\u5bb9\u4e00\u4e2a\u540c\u6b65\u5904\u7406\u7684 Servlet \u8f6c\u53d1\u5230\u4e00\u4e2a\u652f\u6301\u5f02\u6b65\u5904\u7406\u7684 Servlet\uff0c\u5728\u5f02\u6b65\u5904\u7406\u7684 Servlet \u4e2d\u8c03\u7528 startAsync \u65b9\u6cd5\u4f1a\u629b\u51fa IllegalStateException\u3002 Long Polling Server-Sent-Event","title":"\u5f02\u6b65 Servlet"},{"location":"javaee/JspAndServlet/servlet_api/AsyncServlet/#servlet","text":"","title":"\u5f02\u6b65 Servlet"},{"location":"javaee/JspAndServlet/servlet_api/AsyncServlet/#asynccontext","text":"\u4e3a\u4e86\u652f\u6301\u5f02\u6b65\u5904\u7406\uff0cServlet 3.0 \u5728 ServletRequest \u4e0a\u63d0\u4f9b\u4e86 startAsync \u65b9\u6cd5\uff1a AsyncContext startAsync() throws java.lang.IllegalStateException; AsyncContext startAsync(ServletRequest request,ServletResponse response) throws java.lang.IllegalStateException; \u4e24\u4e2a\u65b9\u6cd5\u90fd\u4f1a\u8fd4\u56de AsyncContext \u5bf9\u8c61\uff0c\u7528\u4e8e\u540e\u7eed\u5f02\u6b65\u5904\u7406\uff1a public interface AsyncContext { ... ServletRequest getRequest(); ServletResponse getResponse(); void dispatch(); void complete(); void setTimeout(long timeout); long getTimeout(); ... } \u58f0\u660e\u5f02\u6b65\u652f\u6301\uff1a \u6ce8\u89e3\uff1a @WebServlet(urlPatterns=\"/xxxx\", asyncSupported=true) Web.xml \uff1a <servlet> <servlet-name>xxx</servlet-name> <servlet-class>xxx.xx.x</servlet-class> <async-supported>true</async-supported> </servlet> \u6ce8\u610f\uff1a \u5982\u679c\u5f02\u6b65 Servlet \u524d\u9762\u6709 Filter\uff0c\u90a3\u4e48\u8fd9\u4e9b Filter \u4e5f\u5fc5\u987b\u58f0\u660e\u652f\u6301\u5f02\u6b65\uff0c\u58f0\u660e\u65b9\u5f0f\u548c\u4e0a\u9762\u7c7b\u4f3c\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u5f02\u6b65 Servlet \u793a\u4f8b\uff1a protected void doGet(HttpServletRequest request, HttpServletResponse response){ AsyncContext context=request.startAsync();//\u5f00\u59cb\u5f02\u6b65\u5904\u7406 doAsync(context).thenAcceptAsync(resource->{ try{ //\u5f02\u6b65\u5904\u7406\u5b8c\u6210\u540e\uff0c\u53d6\u51fa httpServletResponse \u5bf9\u8c61\uff0c\u5199\u5165\u54cd\u5e94\u5185\u5bb9\u3002 context.getResponse.getWriter.println(resource); context.complete();// \u7ed3\u675f\u54cd\u5e94 } catch(Exception e){ throw new RuntimeException(e); } }); private CompleableFuture<String> doAsync(AsyncContext context){ return CompleableFuture.supplyAsync(()->{ try{ //\u4ece HttpServletRequest \u4e2d\u83b7\u53d6\u53c2\u6570 String rescource=context.getRequest().getParameter(\"resource\"); //\u6a21\u62df\u957f\u65f6\u95f4\u7684\u5f02\u6b65\u4efb\u52a1 Thread.sleep(3000); return String.format(\"%s back finally...XD\",rescource); }catch(Exception e){ throw new RuntimeException(e); } }); } } \u66f4\u591a AsyncContext \u7ec6\u8282 \u5728\u652f\u6301\u5f02\u6b65\u7684 Servlet \u6216\u8fc7\u6ee4\u5668\u4e2d\u8c03\u7528\u8bf7\u6c42\u5bf9\u8c61\u7684 startAsync \u65b9\u6cd5\uff0c\u5b8c\u6210 service \u65b9\u6cd5\u540e\uff0c\u82e5\u6709\u8fc7\u6ee4\u5668\uff0c\u4e5f\u4f1a\u4f9d\u6b21\u8fd4\u56de\uff0c\u4e4b\u540e\u91ca\u653e\u5bb9\u5668\u5206\u914d\u7684\u7ebf\u7a0b\u3002 \u5728\u4e24\u4e2a\u652f\u6301\u5f02\u6b65\u5904\u7406\u7684 Servlet \u95f4\u8f6c\u53d1\u524d\uff0c\u4e0d\u80fd\u8fde\u7eed\u4e24\u6b21\u8c03\u7528 startAsync \u65b9\u6cd5\uff0c\u5426\u5219\u4f1a\u5f15\u53d1 IllegalStateException\u3002 \u5c06\u8bf7\u6c42\u4ece\u652f\u6301\u5f02\u6b65\u5904\u7406\u7684 Servlet \u8f6c\u53d1\u81f3\u4e00\u4e2a\u540c\u6b65\u5904\u7406\u7684 Servlet \u662f\u53ef\u884c\u7684\uff0c\u5bb9\u5668\u4f1a\u8d1f\u8d23\u8c03\u7528 AsyncContext \u7684 complete \u65b9\u6cd5\u3002 \u5982\u679c\u5bb9\u4e00\u4e2a\u540c\u6b65\u5904\u7406\u7684 Servlet \u8f6c\u53d1\u5230\u4e00\u4e2a\u652f\u6301\u5f02\u6b65\u5904\u7406\u7684 Servlet\uff0c\u5728\u5f02\u6b65\u5904\u7406\u7684 Servlet \u4e2d\u8c03\u7528 startAsync \u65b9\u6cd5\u4f1a\u629b\u51fa IllegalStateException\u3002","title":"AsyncContext"},{"location":"javaee/JspAndServlet/servlet_api/AsyncServlet/#long-polling","text":"","title":"Long Polling"},{"location":"javaee/JspAndServlet/servlet_api/AsyncServlet/#server-sent-event","text":"","title":"Server-Sent-Event"},{"location":"javaee/JspAndServlet/servlet_api/CompressionWrapper/","text":"\u54cd\u5e94\u538b\u7f29\u4ee3\u7801\u793a\u4f8b CompressionFilter import java.io.IOException; import javax.servlet.FilterChain; import javax.servlet.ServletException; import javax.servlet.annotation.WebFilter; import javax.servlet.http.HttpFilter; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; @WebFilter(\"/*\") public class CompressionFilter extends HttpFilter{ protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException{ String encoding =request.getHeader(\"Accept-Encoding\"); //\u5982\u679c\u5ba2\u6237\u7aef\u53ef\u4ee5\u63a5\u6536\u538b\u7f29\u6570\u636e if(encoding!=null&&encoding.contains(\"gzip\")) { CompressionWrapper responseWrapper=new CompressionWrapper(response); responseWrapper.setHeader(\"Content-Encoding\", \"gzip\"); chain.doFilter(request, responseWrapper); responseWrapper.finish();//\u8c03\u7528 GZIPOutputStream \u7684 finish \u65b9\u6cd5\u5b8c\u6210\u538b\u7f29\u8f93\u51fa\u3002 }else { chain.doFilter(request, response); } } } CompressionWrapper import java.io.IOException; import java.io.OutputStreamWriter; import java.io.PrintWriter; import javax.servlet.ServletOutputStream; import javax.servlet.http.HttpServletResponse; import javax.servlet.http.HttpServletResponseWrapper; public class CompressionWrapper extends HttpServletResponseWrapper { private GZipServletOutputStream gzServletOutputStream; private PrintWriter printWriter; public CompressionWrapper(HttpServletResponse response) { super(response); } //\u8fd4\u56de\u6709\u538b\u7f29\u529f\u80fd\u7684\u8f93\u51fa\u6d41 GZipServletOutputStream @Override public ServletOutputStream getOutputStream() throws IOException { if(printWriter!=null) { throw new IllegalStateException(); } if(gzServletOutputStream==null) { gzServletOutputStream=new GZipServletOutputStream(getResponse().getOutputStream()); } return gzServletOutputStream; } //\u8fd4\u56de\u5c01\u88c5\u4e86 GZipServletOutputStream \u7684 PrintWriter @Override public PrintWriter getWriter() throws IOException { if(gzServletOutputStream!=null) { throw new IllegalStateException(); } if(printWriter==null) { gzServletOutputStream=new GZipServletOutputStream(getResponse().getOutputStream()); String encoding=getResponse().getCharacterEncoding(); OutputStreamWriter osw = new OutputStreamWriter(gzServletOutputStream,encoding); printWriter=new PrintWriter(osw); } return printWriter; } //\u5bf9 printWriter \u6216\u8005 gzServletOutputStream \u8c03\u7528 flush @Override public void flushBuffer() throws IOException { if(this.printWriter!=null) { printWriter.flush(); }else if(gzServletOutputStream!=null) { gzServletOutputStream.flush(); } } //\u5173\u95ed printWriter \u6216\u8005 gzServletOutputStream public void finish() throws IOException{ if(this.printWriter!=null) { printWriter.close(); }else if(gzServletOutputStream!=null) { gzServletOutputStream.close(); } } } GZipServletOutputStream import java.io.IOException; import java.util.zip.GZIPOutputStream; import javax.servlet.ServletOutputStream; import javax.servlet.WriteListener; public class GZipServletOutputStream extends ServletOutputStream { private ServletOutputStream servletOutputStream; private GZIPOutputStream gzipOutputStream;// \u4f7f\u7528 GZIPOutputStream \u6765\u589e\u52a0\u538b\u7f29\u529f\u80fd public GZipServletOutputStream(ServletOutputStream outputStream) throws IOException { this.servletOutputStream=outputStream; this.gzipOutputStream=new GZIPOutputStream(servletOutputStream); } public GZIPOutputStream getGzipOutputStream() { return gzipOutputStream; } @Override public boolean isReady() { return this.servletOutputStream.isReady(); } @Override public void setWriteListener(WriteListener listener) { this.servletOutputStream.setWriteListener(listener); } @Override public void write(int b) throws IOException { this.gzipOutputStream.write(b); } @Override public void close() throws IOException{ this.gzipOutputStream.close(); } public void flush() throws IOException { this.gzipOutputStream.finish(); } public void finish() throws IOException{ this.gzipOutputStream.finish(); } }","title":"\u54cd\u5e94\u538b\u7f29\u4ee3\u7801\u793a\u4f8b"},{"location":"javaee/JspAndServlet/servlet_api/CompressionWrapper/#_1","text":"","title":"\u54cd\u5e94\u538b\u7f29\u4ee3\u7801\u793a\u4f8b"},{"location":"javaee/JspAndServlet/servlet_api/CompressionWrapper/#compressionfilter","text":"import java.io.IOException; import javax.servlet.FilterChain; import javax.servlet.ServletException; import javax.servlet.annotation.WebFilter; import javax.servlet.http.HttpFilter; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; @WebFilter(\"/*\") public class CompressionFilter extends HttpFilter{ protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException{ String encoding =request.getHeader(\"Accept-Encoding\"); //\u5982\u679c\u5ba2\u6237\u7aef\u53ef\u4ee5\u63a5\u6536\u538b\u7f29\u6570\u636e if(encoding!=null&&encoding.contains(\"gzip\")) { CompressionWrapper responseWrapper=new CompressionWrapper(response); responseWrapper.setHeader(\"Content-Encoding\", \"gzip\"); chain.doFilter(request, responseWrapper); responseWrapper.finish();//\u8c03\u7528 GZIPOutputStream \u7684 finish \u65b9\u6cd5\u5b8c\u6210\u538b\u7f29\u8f93\u51fa\u3002 }else { chain.doFilter(request, response); } } }","title":"CompressionFilter"},{"location":"javaee/JspAndServlet/servlet_api/CompressionWrapper/#compressionwrapper","text":"import java.io.IOException; import java.io.OutputStreamWriter; import java.io.PrintWriter; import javax.servlet.ServletOutputStream; import javax.servlet.http.HttpServletResponse; import javax.servlet.http.HttpServletResponseWrapper; public class CompressionWrapper extends HttpServletResponseWrapper { private GZipServletOutputStream gzServletOutputStream; private PrintWriter printWriter; public CompressionWrapper(HttpServletResponse response) { super(response); } //\u8fd4\u56de\u6709\u538b\u7f29\u529f\u80fd\u7684\u8f93\u51fa\u6d41 GZipServletOutputStream @Override public ServletOutputStream getOutputStream() throws IOException { if(printWriter!=null) { throw new IllegalStateException(); } if(gzServletOutputStream==null) { gzServletOutputStream=new GZipServletOutputStream(getResponse().getOutputStream()); } return gzServletOutputStream; } //\u8fd4\u56de\u5c01\u88c5\u4e86 GZipServletOutputStream \u7684 PrintWriter @Override public PrintWriter getWriter() throws IOException { if(gzServletOutputStream!=null) { throw new IllegalStateException(); } if(printWriter==null) { gzServletOutputStream=new GZipServletOutputStream(getResponse().getOutputStream()); String encoding=getResponse().getCharacterEncoding(); OutputStreamWriter osw = new OutputStreamWriter(gzServletOutputStream,encoding); printWriter=new PrintWriter(osw); } return printWriter; } //\u5bf9 printWriter \u6216\u8005 gzServletOutputStream \u8c03\u7528 flush @Override public void flushBuffer() throws IOException { if(this.printWriter!=null) { printWriter.flush(); }else if(gzServletOutputStream!=null) { gzServletOutputStream.flush(); } } //\u5173\u95ed printWriter \u6216\u8005 gzServletOutputStream public void finish() throws IOException{ if(this.printWriter!=null) { printWriter.close(); }else if(gzServletOutputStream!=null) { gzServletOutputStream.close(); } } }","title":"CompressionWrapper"},{"location":"javaee/JspAndServlet/servlet_api/CompressionWrapper/#gzipservletoutputstream","text":"import java.io.IOException; import java.util.zip.GZIPOutputStream; import javax.servlet.ServletOutputStream; import javax.servlet.WriteListener; public class GZipServletOutputStream extends ServletOutputStream { private ServletOutputStream servletOutputStream; private GZIPOutputStream gzipOutputStream;// \u4f7f\u7528 GZIPOutputStream \u6765\u589e\u52a0\u538b\u7f29\u529f\u80fd public GZipServletOutputStream(ServletOutputStream outputStream) throws IOException { this.servletOutputStream=outputStream; this.gzipOutputStream=new GZIPOutputStream(servletOutputStream); } public GZIPOutputStream getGzipOutputStream() { return gzipOutputStream; } @Override public boolean isReady() { return this.servletOutputStream.isReady(); } @Override public void setWriteListener(WriteListener listener) { this.servletOutputStream.setWriteListener(listener); } @Override public void write(int b) throws IOException { this.gzipOutputStream.write(b); } @Override public void close() throws IOException{ this.gzipOutputStream.close(); } public void flush() throws IOException { this.gzipOutputStream.finish(); } public void finish() throws IOException{ this.gzipOutputStream.finish(); } }","title":"GZipServletOutputStream"},{"location":"javaee/JspAndServlet/servlet_api/Filter/","text":"\u8fc7\u6ee4\u5668 \u8fc7\u6ee4\u5668\uff08Filter\uff09\u6b63\u5982\u5176\u540d\u6240\u793a\uff0c\u662f\u4ecb\u4e8e Servlet \u4e4b\u524d\uff0c\u53ef\u62e6\u622a\u8fc7\u6ee4 Servlet \u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u6539\u53d8 Servlet \u7684\u54cd\u5e94\u3002 \u6027\u80fd\u8bc4\u6d4b\u3001\u7528\u6237\u9a8c\u8bc1\u3001\u5b57\u7b26\u66ff\u6362\uff0c\u7f16\u7801\u8bbe\u7f6e\u7b49\u9700\u6c42\uff0c\u57fa\u672c\u4e0a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u4e1a\u52a1\u9700\u6c42\u6ca1\u6709\u76f4\u63a5\u7684\u5173\u7cfb\uff0c\u53ea\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u989d\u5916\u539f\u4ef6\u4e4b\u4e00\uff0c\u56e0\u6b64\u5e94\u8be5\u8bbe\u8ba1\u6210\u72ec\u7acb\u5143\u4ef6\uff0c\u53ef\u4ee5\u968f\u65f6\u5047\u5982\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u968f\u65f6\u79fb\u9664\uff0c\u6216\u53ef\u4ee5\u968f\u65f6\u4fee\u6539\u8bbe\u7f6e\u800c\u4e0d\u7528\u4fee\u6539\u539f\u6709\u7684\u7a0b\u5e8f\u3002\u8fd9\u7c7b\u5143\u4ef6\u5c31\u50cf\u4e00\u4e2a\u8fc7\u6ee4\u5668\u4e00\u6837\uff0c\u5b89\u63d2\u5728\u5ba2\u6237\u7aef\u548c Servlet \u4e2d\u95f4\uff0c\u53ef\u4ee5\u8fc7\u6ee4\u8bf7\u6c42\u4e0e\u54cd\u5e94\u3002 Filter Filter \u67b6\u6784\u8bbe\u8ba1\u548c Servlet \u975e\u5e38\u76f8\u4f3c\uff0c\u914d\u7f6e\u7684\u65b9\u5f0f\u4e5f\u51e0\u4e4e\u4e00\u6a21\u4e00\u6837\u3002 Filter API Servlet API Filter#init ------------- Servlet#init Filter#doFilter ------------- Servlet#service Filter#destroy ------------- Servlet#destory FilterConfig ------------- ServletConfig GenericFilter ------------- GenericServlet HttpFilter ------------- HttpServlet public inteface Filter { //Filter \u5b9e\u4f8b\u521d\u59cb\u5316\u540e\u88ab\u8c03\u7528 public default void init(FilterConfig filterConfig) throws ServletException; // Filter \u903b\u8f91\u5904\u7406 public void doFilter(ServletRequest request,ServletResponse reponse,FilterChain chain) throws IOException,ServletException; // filter \u5b9e\u4f8b\u9500\u6bc1\u524d\u88ab\u8c03\u7528 public default void destroy(); } \u4e0b\u9762\u662f\u4e00\u4e2a\u7f16\u7801\u8fc7\u6ee4\u5668\u7684\u4f8b\u5b50\uff1a @WebFilter( urlPatterns= {\"/*\"},//\u8fc7\u6ee4\u5668\u8def\u5f84\u5339\u914d\uff0c\u53ea\u6709\u5339\u914d\u7684\u8bf7\u6c42\u624d\u4f1a\u5e94\u7528\u8be5\u62e6\u622a\u5668 initParams= { // \u7b49\u540c\u4e8e Web.xml \u4e2d\u7684 <init-param> \u4f46\u662f\u4f18\u5148\u7ea7\u6bd4 <init-param> \u4f4e\u3002 @WebInitParam(name=\"ENCODING\",value=\"UTF-8\") }, //\u8fc7\u6ee4\u5668\u9ed8\u8ba4\u60c5\u51b5\u53ea\u4f1a\u62e6\u622a\u5ba2\u6237\u7aef\u4e4b\u95f4\u53d1\u9001\u7684\u8bf7\u6c42 //\u5176\u4ed6\u7684\u7c7b\u578b\u7684\u8bf7\u6c42\u9700\u8981\u624b\u52a8\u914d\u7f6e\u62e6\u622a\uff0c\u6bd4\u5982\u90a3\u4e9b\u901a\u8fc7 RequestDispatcher \u7684 forward \u6216\u8005 include\u3002 dispatcherTypes={ DispatcherType.REQUEST, DispatcherType.FORWARD, DispatcherType.INCLUDE, DispatcherType.ERROR, DispatcherType.ASYNC } ) public class EncodingFilter extends HttpFilter{ private static final long serialVersionUID = -2940608237161303115L; private String ENCODING; @Override public void init() { ENCODING=getInitParameter(\"ENCODING\"); } public void doFilter(HttpServletRequest req, HttpServletResponse res,FilterChain chain) throws IOException, ServletException{ //\u8bbe\u7f6e\u8bf7\u6c42 Body \u7684\u7f16\u7801 req.setCharacterEncoding(ENCODING); //\u5904\u7406 GET \u8bf7\u6c42\u53c2\u6570\u7f16\u7801 chain.doFilter(new EncoderWrapper(req), res); } } Filter \u7684\u58f0\u660e\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a@WebFilter \u6ce8\u89e3\u548c Web.xml\uff0c\u5176\u4e2d @WebFilter \u7684\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0a\u6240\u793a\uff0c\u800c Web.xml \u5982\u4e0b\u6240\u793a\uff1a <!-- \u4f5c\u7528\u7b49\u540c\u4e8e\u4e0a\u9762\u7684 @WebFilter\uff0c\u4f46\u662f\u4f18\u5148\u7ea7 @WebFilter \u9ad8 --> <filter> <filter-name>encoding</filter-name> <filter-class>pers.cocoadel.filter.EncodingFilter</filter-class> <init-param> <param-name>ENCODING</param-name> <param-value>UTF-8</param-value> </init-param> </filter> <filter-mapping> <filter-name>encoding</filter-name> <url-pattern>/*</url-pattern> <dispatcher>REQUEST</dispatcher> <dispatcher>FORWARD</dispatcher> <dispatcher>INCLUDE</dispatcher> <dispatcher>ERROR</dispatcher> <dispatcher>ASYNC</dispatcher> </filter-mapping> \u8bf7\u6c42\u5c01\u88c5\u5668 \u8fd9\u91cc\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e \u8bf7\u6c42\u5c01\u88c5\u5668 \u7684\u4f5c\u7528\u3002 GET \u53c2\u6570\u7f16\u7801\u5904\u7406 \u5728 Servlet \u7684\u7ae0\u8282 \u4e2d\uff0c\u6211\u4eec\u77e5\u9053\u4e86 setCharacterEncoding \u65b9\u6cd5\u53ea\u5bf9\u8bf7\u6c42 Body \u6709\u4f5c\u7528\uff0c\u5bf9 URI \u6ca1\u6709\u4f5c\u7528\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4e0d\u80fd\u7edf\u4e00 Get \u8bf7\u6c42\u7684\u53c2\u6570\u7f16\u7801\u5904\u7406\u3002\u5982\u679c\u6211\u4eec\u60f3\u7edf\u4e00\u6240\u6709\u8bf7\u6c42\u7684\u53c2\u6570\u7f16\u7801\u5904\u7406\uff0c\u600e\u4e48\u529e\u5462\uff1f\u5206\u522b\u5728\u6bcf\u4e2a doGet \u65b9\u6cd5\u4e2d\u5bf9\u53c2\u6570\u8fdb\u884c\u5904\u7406\u663e\u7136\u592a\u9ebb\u70e6\uff0cFilter \u662f\u4e00\u4e2a\u66f4\u597d\u7684\u9009\u62e9\u3002\u7136\u800c ServletRequest \u53ea\u6709 getParameter \u65b9\u6cd5\u800c\u6ca1\u6709 setParameter \u65b9\u6cd5\uff0c\u90a3\u4e48\u5728 Filter \u4e2d\u7f16\u7801\u8f6c\u6362\u540e\u7684\u53c2\u6570\u6211\u4eec\u8be5\u5982\u4f55\u91cd\u65b0\u653e\u56de ServletRequest \u4e2d\u53bb\u5462\uff1f \u91cd\u65b0\u5b9e\u73b0\u4e00\u4e2a HttpServletRequest \u5bf9\u8c61\u7684\u8bdd\u592a\u8fc7\u9ebb\u70e6\uff0c\u8fd9\u65f6\u5019\u8bf7\u6c42\u5c01\u88c5\u5668\uff08HttpServletRequestWrapper\uff09\u5c31\u6d3e\u4e0a\u7528\u573a\u4e86\u3002 Tomcat 7 \u4e4b\u524d\u5904\u7406 URI \u7684\u9ed8\u8ba4\u7f16\u7801\u662f \u201cISO-8859-1\u201d\uff0cTomcat 8 \u4e4b\u540e\u9ed8\u8ba4\u662f \u201dUTF-8\u201c\u3002 HttpServletRequestWrapper \u5b9e\u73b0\u4e86 HttpServletRequest \u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u627f HttpServletRequestWrapper\uff0c\u7136\u540e\u91cd\u5199\u81ea\u5df1\u60f3\u8981\u5b9e\u73b0\u7684\u65b9\u6cd5\u5373\u53ef\uff0c\u4e0b\u9762\u4ee5\u4e0a\u9762\u793a\u4f8b EncodingFilter \u4e2d\u7528\u5230\u7684 EncoderWrapper\u4e3a\u4f8b\uff1a public class EncoderWrapper extends HttpServletRequestWrapper{ public EncoderWrapper(HttpServletRequest request) { super(request); } //\u91cd\u5199 getParameter \u65b9\u6cd5\u3002 public String getParameter(String name) { return Optional.ofNullable(getRequest().getParameter(name)) .map(this::encode) .orElse(null); } //ISO-8859-1 -> UTF-8 private String encode(String content) { try { content=new String(content.getBytes(\"ISO-8809-1\"),\"UTF-8\"); return Encode.forHtml(content);//\u8f6c\u6362 HTML \u5b57\u7b26\uff0c\u9632\u6b62\u6ce8\u5165\u653b\u51fb }catch(Exception e) { throw new RuntimeException(e); } } } \u54cd\u5e94\u5c01\u88c5\u5668 \u8fd9\u91cc\u540c\u6837\u662f\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u8bf4\u660e \u54cd\u5e94\u5c01\u88c5\u5668 \u7684\u4f5c\u7528\u3002 \u54cd\u5e94\u538b\u7f29 \u5982\u679c\u76f8\u5bf9\u54cd\u5e94\u5185\u5bb9\u8fdb\u884c\u538b\u7f29\u5904\u7406\uff0c\u5c31\u8981\u60f3\u529e\u6cd5\u8ba9 HttpServletResponse \u5bf9\u8c61\u5177\u6709\u538b\u7f29\u5904\u7406\u529f\u80fd\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528 HttpServletResponseWrapper \u6765\u5bf9 HttpServletResponse \u5bf9\u8c61\u8fdb\u884c\u5c01\u88c5\u3002 // \u53ef\u4ee5\u5728 Filter \u7684 doFiler \u65b9\u6cd5\u4e2d\u8fd4\u56de\u5c01\u88c5\u4e86 HttpServletResponse \u5bf9\u8c61\u7684 CompressionWrapper \u5bf9\u8c61 public class CompressionWrapper extends HttpServletResponseWrapper { private GZipServletOutputStream gzServletOutputStream; private PrintWriter printWriter; public CompressionWrapper(HttpServletResponse response) { super(response); } //\u8fd4\u56de\u6709\u538b\u7f29\u529f\u80fd\u7684\u8f93\u51fa\u6d41 GZipServletOutputStream @Override public ServletOutputStream getOutputStream() throws IOException {...} //\u8fd4\u56de\u5c01\u88c5\u4e86 GZipServletOutputStream \u7684 PrintWriter @Override public PrintWriter getWriter() throws IOException {...} //\u5bf9 printWriter \u6216\u8005 gzServletOutputStream \u8c03\u7528 flush @Override public void flushBuffer() throws IOException {...} //\u5173\u95ed printWriter \u6216\u8005 gzServletOutputStream public void finish() throws IOException{...} } \u5177\u4f53\u4ee3\u7801\u53c2\u8003","title":"\u8fc7\u6ee4\u5668"},{"location":"javaee/JspAndServlet/servlet_api/Filter/#_1","text":"\u8fc7\u6ee4\u5668\uff08Filter\uff09\u6b63\u5982\u5176\u540d\u6240\u793a\uff0c\u662f\u4ecb\u4e8e Servlet \u4e4b\u524d\uff0c\u53ef\u62e6\u622a\u8fc7\u6ee4 Servlet \u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u6539\u53d8 Servlet \u7684\u54cd\u5e94\u3002 \u6027\u80fd\u8bc4\u6d4b\u3001\u7528\u6237\u9a8c\u8bc1\u3001\u5b57\u7b26\u66ff\u6362\uff0c\u7f16\u7801\u8bbe\u7f6e\u7b49\u9700\u6c42\uff0c\u57fa\u672c\u4e0a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u4e1a\u52a1\u9700\u6c42\u6ca1\u6709\u76f4\u63a5\u7684\u5173\u7cfb\uff0c\u53ea\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u989d\u5916\u539f\u4ef6\u4e4b\u4e00\uff0c\u56e0\u6b64\u5e94\u8be5\u8bbe\u8ba1\u6210\u72ec\u7acb\u5143\u4ef6\uff0c\u53ef\u4ee5\u968f\u65f6\u5047\u5982\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u968f\u65f6\u79fb\u9664\uff0c\u6216\u53ef\u4ee5\u968f\u65f6\u4fee\u6539\u8bbe\u7f6e\u800c\u4e0d\u7528\u4fee\u6539\u539f\u6709\u7684\u7a0b\u5e8f\u3002\u8fd9\u7c7b\u5143\u4ef6\u5c31\u50cf\u4e00\u4e2a\u8fc7\u6ee4\u5668\u4e00\u6837\uff0c\u5b89\u63d2\u5728\u5ba2\u6237\u7aef\u548c Servlet \u4e2d\u95f4\uff0c\u53ef\u4ee5\u8fc7\u6ee4\u8bf7\u6c42\u4e0e\u54cd\u5e94\u3002","title":"\u8fc7\u6ee4\u5668"},{"location":"javaee/JspAndServlet/servlet_api/Filter/#filter","text":"Filter \u67b6\u6784\u8bbe\u8ba1\u548c Servlet \u975e\u5e38\u76f8\u4f3c\uff0c\u914d\u7f6e\u7684\u65b9\u5f0f\u4e5f\u51e0\u4e4e\u4e00\u6a21\u4e00\u6837\u3002 Filter API Servlet API Filter#init ------------- Servlet#init Filter#doFilter ------------- Servlet#service Filter#destroy ------------- Servlet#destory FilterConfig ------------- ServletConfig GenericFilter ------------- GenericServlet HttpFilter ------------- HttpServlet public inteface Filter { //Filter \u5b9e\u4f8b\u521d\u59cb\u5316\u540e\u88ab\u8c03\u7528 public default void init(FilterConfig filterConfig) throws ServletException; // Filter \u903b\u8f91\u5904\u7406 public void doFilter(ServletRequest request,ServletResponse reponse,FilterChain chain) throws IOException,ServletException; // filter \u5b9e\u4f8b\u9500\u6bc1\u524d\u88ab\u8c03\u7528 public default void destroy(); } \u4e0b\u9762\u662f\u4e00\u4e2a\u7f16\u7801\u8fc7\u6ee4\u5668\u7684\u4f8b\u5b50\uff1a @WebFilter( urlPatterns= {\"/*\"},//\u8fc7\u6ee4\u5668\u8def\u5f84\u5339\u914d\uff0c\u53ea\u6709\u5339\u914d\u7684\u8bf7\u6c42\u624d\u4f1a\u5e94\u7528\u8be5\u62e6\u622a\u5668 initParams= { // \u7b49\u540c\u4e8e Web.xml \u4e2d\u7684 <init-param> \u4f46\u662f\u4f18\u5148\u7ea7\u6bd4 <init-param> \u4f4e\u3002 @WebInitParam(name=\"ENCODING\",value=\"UTF-8\") }, //\u8fc7\u6ee4\u5668\u9ed8\u8ba4\u60c5\u51b5\u53ea\u4f1a\u62e6\u622a\u5ba2\u6237\u7aef\u4e4b\u95f4\u53d1\u9001\u7684\u8bf7\u6c42 //\u5176\u4ed6\u7684\u7c7b\u578b\u7684\u8bf7\u6c42\u9700\u8981\u624b\u52a8\u914d\u7f6e\u62e6\u622a\uff0c\u6bd4\u5982\u90a3\u4e9b\u901a\u8fc7 RequestDispatcher \u7684 forward \u6216\u8005 include\u3002 dispatcherTypes={ DispatcherType.REQUEST, DispatcherType.FORWARD, DispatcherType.INCLUDE, DispatcherType.ERROR, DispatcherType.ASYNC } ) public class EncodingFilter extends HttpFilter{ private static final long serialVersionUID = -2940608237161303115L; private String ENCODING; @Override public void init() { ENCODING=getInitParameter(\"ENCODING\"); } public void doFilter(HttpServletRequest req, HttpServletResponse res,FilterChain chain) throws IOException, ServletException{ //\u8bbe\u7f6e\u8bf7\u6c42 Body \u7684\u7f16\u7801 req.setCharacterEncoding(ENCODING); //\u5904\u7406 GET \u8bf7\u6c42\u53c2\u6570\u7f16\u7801 chain.doFilter(new EncoderWrapper(req), res); } } Filter \u7684\u58f0\u660e\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a@WebFilter \u6ce8\u89e3\u548c Web.xml\uff0c\u5176\u4e2d @WebFilter \u7684\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0a\u6240\u793a\uff0c\u800c Web.xml \u5982\u4e0b\u6240\u793a\uff1a <!-- \u4f5c\u7528\u7b49\u540c\u4e8e\u4e0a\u9762\u7684 @WebFilter\uff0c\u4f46\u662f\u4f18\u5148\u7ea7 @WebFilter \u9ad8 --> <filter> <filter-name>encoding</filter-name> <filter-class>pers.cocoadel.filter.EncodingFilter</filter-class> <init-param> <param-name>ENCODING</param-name> <param-value>UTF-8</param-value> </init-param> </filter> <filter-mapping> <filter-name>encoding</filter-name> <url-pattern>/*</url-pattern> <dispatcher>REQUEST</dispatcher> <dispatcher>FORWARD</dispatcher> <dispatcher>INCLUDE</dispatcher> <dispatcher>ERROR</dispatcher> <dispatcher>ASYNC</dispatcher> </filter-mapping>","title":"Filter"},{"location":"javaee/JspAndServlet/servlet_api/Filter/#_2","text":"\u8fd9\u91cc\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e \u8bf7\u6c42\u5c01\u88c5\u5668 \u7684\u4f5c\u7528\u3002","title":"\u8bf7\u6c42\u5c01\u88c5\u5668"},{"location":"javaee/JspAndServlet/servlet_api/Filter/#get","text":"\u5728 Servlet \u7684\u7ae0\u8282 \u4e2d\uff0c\u6211\u4eec\u77e5\u9053\u4e86 setCharacterEncoding \u65b9\u6cd5\u53ea\u5bf9\u8bf7\u6c42 Body \u6709\u4f5c\u7528\uff0c\u5bf9 URI \u6ca1\u6709\u4f5c\u7528\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4e0d\u80fd\u7edf\u4e00 Get \u8bf7\u6c42\u7684\u53c2\u6570\u7f16\u7801\u5904\u7406\u3002\u5982\u679c\u6211\u4eec\u60f3\u7edf\u4e00\u6240\u6709\u8bf7\u6c42\u7684\u53c2\u6570\u7f16\u7801\u5904\u7406\uff0c\u600e\u4e48\u529e\u5462\uff1f\u5206\u522b\u5728\u6bcf\u4e2a doGet \u65b9\u6cd5\u4e2d\u5bf9\u53c2\u6570\u8fdb\u884c\u5904\u7406\u663e\u7136\u592a\u9ebb\u70e6\uff0cFilter \u662f\u4e00\u4e2a\u66f4\u597d\u7684\u9009\u62e9\u3002\u7136\u800c ServletRequest \u53ea\u6709 getParameter \u65b9\u6cd5\u800c\u6ca1\u6709 setParameter \u65b9\u6cd5\uff0c\u90a3\u4e48\u5728 Filter \u4e2d\u7f16\u7801\u8f6c\u6362\u540e\u7684\u53c2\u6570\u6211\u4eec\u8be5\u5982\u4f55\u91cd\u65b0\u653e\u56de ServletRequest \u4e2d\u53bb\u5462\uff1f \u91cd\u65b0\u5b9e\u73b0\u4e00\u4e2a HttpServletRequest \u5bf9\u8c61\u7684\u8bdd\u592a\u8fc7\u9ebb\u70e6\uff0c\u8fd9\u65f6\u5019\u8bf7\u6c42\u5c01\u88c5\u5668\uff08HttpServletRequestWrapper\uff09\u5c31\u6d3e\u4e0a\u7528\u573a\u4e86\u3002 Tomcat 7 \u4e4b\u524d\u5904\u7406 URI \u7684\u9ed8\u8ba4\u7f16\u7801\u662f \u201cISO-8859-1\u201d\uff0cTomcat 8 \u4e4b\u540e\u9ed8\u8ba4\u662f \u201dUTF-8\u201c\u3002 HttpServletRequestWrapper \u5b9e\u73b0\u4e86 HttpServletRequest \u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u627f HttpServletRequestWrapper\uff0c\u7136\u540e\u91cd\u5199\u81ea\u5df1\u60f3\u8981\u5b9e\u73b0\u7684\u65b9\u6cd5\u5373\u53ef\uff0c\u4e0b\u9762\u4ee5\u4e0a\u9762\u793a\u4f8b EncodingFilter \u4e2d\u7528\u5230\u7684 EncoderWrapper\u4e3a\u4f8b\uff1a public class EncoderWrapper extends HttpServletRequestWrapper{ public EncoderWrapper(HttpServletRequest request) { super(request); } //\u91cd\u5199 getParameter \u65b9\u6cd5\u3002 public String getParameter(String name) { return Optional.ofNullable(getRequest().getParameter(name)) .map(this::encode) .orElse(null); } //ISO-8859-1 -> UTF-8 private String encode(String content) { try { content=new String(content.getBytes(\"ISO-8809-1\"),\"UTF-8\"); return Encode.forHtml(content);//\u8f6c\u6362 HTML \u5b57\u7b26\uff0c\u9632\u6b62\u6ce8\u5165\u653b\u51fb }catch(Exception e) { throw new RuntimeException(e); } } }","title":"GET \u53c2\u6570\u7f16\u7801\u5904\u7406"},{"location":"javaee/JspAndServlet/servlet_api/Filter/#_3","text":"\u8fd9\u91cc\u540c\u6837\u662f\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u8bf4\u660e \u54cd\u5e94\u5c01\u88c5\u5668 \u7684\u4f5c\u7528\u3002","title":"\u54cd\u5e94\u5c01\u88c5\u5668"},{"location":"javaee/JspAndServlet/servlet_api/Filter/#_4","text":"\u5982\u679c\u76f8\u5bf9\u54cd\u5e94\u5185\u5bb9\u8fdb\u884c\u538b\u7f29\u5904\u7406\uff0c\u5c31\u8981\u60f3\u529e\u6cd5\u8ba9 HttpServletResponse \u5bf9\u8c61\u5177\u6709\u538b\u7f29\u5904\u7406\u529f\u80fd\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528 HttpServletResponseWrapper \u6765\u5bf9 HttpServletResponse \u5bf9\u8c61\u8fdb\u884c\u5c01\u88c5\u3002 // \u53ef\u4ee5\u5728 Filter \u7684 doFiler \u65b9\u6cd5\u4e2d\u8fd4\u56de\u5c01\u88c5\u4e86 HttpServletResponse \u5bf9\u8c61\u7684 CompressionWrapper \u5bf9\u8c61 public class CompressionWrapper extends HttpServletResponseWrapper { private GZipServletOutputStream gzServletOutputStream; private PrintWriter printWriter; public CompressionWrapper(HttpServletResponse response) { super(response); } //\u8fd4\u56de\u6709\u538b\u7f29\u529f\u80fd\u7684\u8f93\u51fa\u6d41 GZipServletOutputStream @Override public ServletOutputStream getOutputStream() throws IOException {...} //\u8fd4\u56de\u5c01\u88c5\u4e86 GZipServletOutputStream \u7684 PrintWriter @Override public PrintWriter getWriter() throws IOException {...} //\u5bf9 printWriter \u6216\u8005 gzServletOutputStream \u8c03\u7528 flush @Override public void flushBuffer() throws IOException {...} //\u5173\u95ed printWriter \u6216\u8005 gzServletOutputStream public void finish() throws IOException{...} } \u5177\u4f53\u4ee3\u7801\u53c2\u8003","title":"\u54cd\u5e94\u538b\u7f29"},{"location":"javaee/JspAndServlet/servlet_api/Long%20Polling/","text":"","title":"Long Polling"},{"location":"javaee/JspAndServlet/servlet_api/Server-Sent-Event/","text":"","title":"Server Sent Event"},{"location":"javaee/JspAndServlet/servlet_api/listener/","text":"\u5e94\u7528\u7a0b\u5e8f\u4e8b\u4ef6\u548c\u76d1\u542c\u5668 Web \u5bb9\u5668\u7ba1\u7406\u7740 Servelt/JSP \u76f8\u5173\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\uff0c\u82e5\u5bf9 HttpServletRequest\u3001HttpSession\u3001ServletContext \u5bf9\u8c61\u5728\u751f\u6210\u3001\u9500\u6bc1\u6216\u5c5e\u6027\u8bbe\u7f6e\u53d1\u751f\u7684\u65f6\u673a\u70b9\u6709\u5174\u8da3\uff0c\u53ef\u4ee5\u5b9e\u73b0\u76f8\u5e94\u7684\u76d1\u542c\u5668\uff08Listener\uff09\uff0c\u5728\u5bf9\u5e94\u7684\u65f6\u673a\u70b9\u53d1\u751f\u65f6\uff0cWeb \u5bb9\u5668\u5c31\u4f1a\u8c03\u7528\u76d1\u542c\u5668\u4e0a\u76f8\u5e94\u7684\u65b9\u6cd5\uff0c\u8ba9\u7528\u6237\u5728\u5bf9\u5e94\u7684\u65f6\u673a\u70b9\u505a\u5904\u7406\u3002 ServletContext \u4e8b\u4ef6\u3001\u76d1\u542c\u5668 ServletContextListener public interface ServletContextListener extends EventListener{ //Web \u5e94\u7528\u7a0b\u5e8f\u521d\u59cb\u5316\u540e\u8c03\u7528 public default void contextInitialized(ServletContextEvent sce); //Web \u5e94\u7528\u7a0b\u5e8f\u9500\u6bc1\u524d\u88ab\u8c03\u7528 public default void contextDestroyed(ServletContextEvent sce); } \u4f7f\u7528\u793a\u4f8b\uff1a @WebListener public class MyServletContextListener implements ServletContextListener{ public void contextInitialized(ServletContextEvent sec){ ServletContext context = sec.getServletContext(); //\u5177\u4f53\u5904\u7406\u903b\u8f91\uff0c\u6bd4\u5982\u4f1a\u8bdd\u7ba1\u7406\u7ae0\u8282\u4e2d\u63d0\u5230\u7684 SessionCookieConfig \u914d\u7f6e SessionCookieConfig config = servletContext.getSessionCookieConfig(); config.setMaxAge(7*24*60*60);// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4 } } SessionCookieConfig \u914d\u7f6e\u53c2\u8003 \u58f0\u660e\uff1a \u5b9e\u73b0 ServletContextListener \u63a5\u53e3\u540e\uff0c\u9700\u8981\u5411 Web \u5bb9\u5668\u6ce8\u518c\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u5982\u540c\u4e0a\u9762\u6240\u793a\u90a3\u6837\u4f7f\u7528 @WebListenner \u6ce8\u89e3\uff0c\u53e6\u5916\u4e00\u79cd\u5219\u662f\u5728 Web.xml \u4e2d\u6ce8\u518c\u3002 <listener> <listener-class>pers.cocoadel.MyServletContextListener</listener-class> </listener> HttpSession \u4e8b\u4ef6\u3001\u76d1\u542c\u5668 HttpSessionListener public interface HttpSessionListener extends EventListener{ //HttpSession \u5bf9\u8c61\u521d\u59cb\u5316\u524d\u88ab\u8c03\u7528 public default void sessionCreated(HttpSessionEvent se); //HTTP Session \u5bf9\u8c61\u7ed3\u675f\u524d\u88ab\u8c03\u7528 public default void sessionDestroyed(HttpSessionEvent se); } \u4f7f\u7528\u793a\u4f8b\uff1a @WebListener public class MyHttpSessionListener implements HttpSessionListener{ public void sessionDestroyed(HttpSessionEvent se){ HttpSession session=se.getSession(); //\u5904\u7406\u903b\u8f91\uff0c\u6bd4\u5982 HttpSession \u9500\u6bc1\u524d\uff0c\u4fee\u6539\u7528\u6237\u67d0\u4e9b\u6570\u636e\u5e93\u5b57\u6bb5\uff0c\u6bd4\u5982\u5728\u7ebf\u72b6\u6001\u3002 User user=(User)session.getAttribute(\"login\"); ... } } \u58f0\u660e\uff1a \u540c ServletContextListener\u3002 HttpSessionAttributeListener public interface HttpSessionAttributeListener extends EventListener{ public default void attributeAdded(HttpSessionBindingEvent se); public default void attributeRemoved(HttpSessionBindEvent se); public default void attributeReplaced(HttpSessionBindEvent se); } \u4f7f\u7528\u793a\u4f8b\uff1a public class MyHttpSessionAttributeListener implements HttpSessionAttributeListener{ public void attributeRemoved(HttpSessionBindingEvent se){ String name=se.getName();// \u88ab\u8bbe\u7f6e\u6216\u8005\u79fb\u9664\u7684\u5c5e\u6027\u7684\u540d\u79f0 Object value=se.getValue();// \u88ab\u8bbe\u7f6e\u6216\u8005\u79fb\u9664\u7684\u5c5e\u6027\u503c\uff0c\u5982\u679c\u662f replace \u53d6\u5f97\u662f\u65e7\u5f97\u503c\u3002 ... } } \u58f0\u660e\uff1a \u540c ServletContextListener\u3002 HttpSessionBindingListener \u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u6dfb\u52a0\u5230\u6216\u8005\u79fb\u9664\u51fa HttpSession\uff0c\u5982\u679c\u8be5\u5bf9\u8c61\u5b9e\u73b0\u4e86 HttpSessionBindgingListener \u63a5\u53e3\uff0c\u5219\u4f1a\u6536\u5230\u88ab\u6dfb\u52a0\u6216\u8005\u79fb\u9664\u5f97\u901a\u77e5\u3002\u548c HttpSessionAttributeListener \u4e0d\u540c\uff0c\u8be5\u76d1\u542c\u5668\u662f\u9488\u5bf9\u5177\u4f53\u5bf9\u8c61\u5f97\u76d1\u542c\u3002 public interface HttpSessionBindingListener extends EventListener{ // \u5f53\u5bf9\u8c61\u88ab\u6dfb\u52a0\u5230 HttpSession \u65f6\u88ab\u8c03\u7528 public default void valueBound(HttpSessionBindingEvent event); // \u5f53\u5bf9\u8c61\u88ab\u79fb\u9664\u51fa HttpSession \u65f6\u88ab\u8c03\u7528 public default void valueUnbound(HttpSessionBindingEvent event); } \u4f7f\u7528\u793a\u4f8b\uff1a public class User implements HttpSessionBindingListener{ private String name; private String email; public void valueBound(HttpSessionBindingEvent event){...} public void valueUnbound(HttpSessionBindingEvent event){...} } public class MyServlet extends HttpServlet{ public void doGet(HttpServletRequest request, HttpServletResponse response){ User user=new User(); request.getSession().setAttribute(\"login\",user);//user \u5f97 valueBound \u65b9\u6cd5\u88ab\u56de\u8c03 } } \u58f0\u660e\uff1a \u65e0\u9700\u7279\u522b\u58f0\u660e\uff0c\u53ea\u9700\u8981\u5b9e\u73b0\u8be5\u63a5\u53e3\u5373\u53ef\u3002 HttpSessionActivationListener public interface HttpSessionActivationListener extends EventListener{ public default void sessionWillPassivate(HttpSessionEvent se); public default void sessionDidActivate(HttpSessionEvent se); } HttpSessionActivationListener \u662f\u5bf9\u8c61\u8fc1\u79fb\u76d1\u542c\u5668\uff0c\u548c HttpSessionBindingListener \u4e00\u6837\uff0c\u8fd9\u662f\u4e00\u4e2a\u9488\u5bf9\u5177\u4f53\u5bf9\u8c61\u76d1\u542c\u5668\u3002 \u5728\u4f7f\u7528\u5206\u5e03\u5f0f\u73af\u5883\u5f97\u65f6\u5019\uff0c\u5f53\u4e00\u4e2a HttpSession \u8981\u4ece\u4e00\u4e2a JVM \u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a JVM \u65f6\uff0c\u5fc5\u987b\u5148\u5728\u539f\u672c\u5f97 JVM \u4e0a\u5e8f\u5217\u5316\uff08Serialize\uff09\u6240\u6709\u5c5e\u6027\u5bf9\u8c61\uff0c\u5728\u8fd9\u4e4b\u524d\u82e5\u5c5e\u6027\u5bf9\u8c61\u5b9e\u73b0\u4e86 HttpSessionActivationListener \u63a5\u53e3\uff0c\u5219\u4f1a\u56de\u8c03 sessionWillPassivate \u65b9\u6cd5\u3002 \u800c\u5f53 HttpSession \u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a JVM \u540e\uff0c\u5c31\u4f1a\u5bf9\u6240\u6709\u5c5e\u6027\u5bf9\u8c61\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\uff0c\u6b64\u65f6\u4f1a\u8c03\u7528 sessionDidActivate \u65b9\u6cd5\u3002 \u4f7f\u7528\u793a\u4f8b\u548c\u58f0\u660e\uff1a \u53c2\u8003 HttpSessionBindingListener\u3002 HttpSessionIdListener public HttpSessionIdListener extends EventListener{ // \u5f53 HttpServletRequest \u8c03\u7528 changeSessionId() \u65b9\u6cd5\u6539\u53d8 Session ID \u65f6\uff0c\u8be5\u65b9\u6cd5\u4f1a\u88ab\u56de\u8c03\u3002 puiblic default void sessionIdChangeed(HttpSessionEvent event, Stirng oldSessionId); } \u4f7f\u7528\u793a\u4f8b\u548c\u58f0\u660e\uff1a \u53c2\u8003 ServletContextListener\u3002 HttpServletRequest \u4e8b\u4ef6\u3001\u76d1\u542c\u5668 ServletRequestListener // ServletRequestListener \u7684\u751f\u547d\u5468\u671f\u662f\u6574\u4e2a Web \u8bf7\u6c42\u3002 public interface ServletRequestListener extends EventListener{ // HttpServletRequest \u5bf9\u8c61\u751f\u6210\u65f6\u88ab\u8c03\u7528 public default void requestDestroyed(ServletRequestEvent sre); // httpServletRequest \u9500\u6bc1\u524d\u88ab\u8c03\u7528 public default void requestInitialized(ServletRequestEvent sre); } \u4f7f\u7528\u793a\u4f8b\uff1a // \u4ee5 spring \u7684 RequestContextListener \u4e3a\u4f8b public class RequestContextListener implements ServletRequestListener { @Override // Spring RequestContextListener \u5728 Request \u5bf9\u8c61\u521b\u5efa\u65f6\u5019\uff0c\u5c06\u5176\u8bbe\u7f6e\u5230 RequestContextHolder public void requestInitialized(ServletRequestEvent requestEvent) { ... HttpServletRequest request = (HttpServletRequest) requestEvent.getServletRequest(); ServletRequestAttributes attributes = new ServletRequestAttributes(request); request.setAttribute(REQUEST_ATTRIBUTES_ATTRIBUTE, attributes); LocaleContextHolder.setLocale(request.getLocale()); // RequContextHolder \u5185\u90e8\u5c01\u88c5\u4e86 ThreadLoacal RequestContextHolder.setRequestAttributes(attributes); } public void requestDestroyed(ServletRequestEvent evnet){ // \u7ed3\u675f\u7684\u65f6\u5019\u518d\u5c06 Request \u5bf9\u8c61\u4ece RequContextHolder \u4e2d\u79fb\u9664\u3002 .... } \u58f0\u660e\uff1a \u53c2\u8003 ServletContextListener\u3002 ServletRequestAttributeListener public interface ServletRequestAttributeListener extends EventListener{ // request \u6dfb\u52a0\u5c5e\u6027\u65f6\u88ab\u8c03\u7528 public default void attributeAdded(ServletRequestAttributeEvent event); // request \u5220\u9664\u5c5e\u6027\u65f6\u5019\u88ab\u8c03\u7528 public default void attributeRemoved(ServletRequestAttributeEvent event); // request \u66ff\u6362\u5c5e\u6027\u503c\u65f6\u88ab\u8c03\u7528 public default void attributeReplaced(ServletRequestAttributeEvent event); } \u4f7f\u7528\u548c\u58f0\u660e\uff1a \u53c2\u8003 HttpSessionAttributeListener \u3002 ReadListener WriteListener","title":"\u5e94\u7528\u7a0b\u5e8f\u4e8b\u4ef6\u548c\u76d1\u542c\u5668"},{"location":"javaee/JspAndServlet/servlet_api/listener/#_1","text":"Web \u5bb9\u5668\u7ba1\u7406\u7740 Servelt/JSP \u76f8\u5173\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\uff0c\u82e5\u5bf9 HttpServletRequest\u3001HttpSession\u3001ServletContext \u5bf9\u8c61\u5728\u751f\u6210\u3001\u9500\u6bc1\u6216\u5c5e\u6027\u8bbe\u7f6e\u53d1\u751f\u7684\u65f6\u673a\u70b9\u6709\u5174\u8da3\uff0c\u53ef\u4ee5\u5b9e\u73b0\u76f8\u5e94\u7684\u76d1\u542c\u5668\uff08Listener\uff09\uff0c\u5728\u5bf9\u5e94\u7684\u65f6\u673a\u70b9\u53d1\u751f\u65f6\uff0cWeb \u5bb9\u5668\u5c31\u4f1a\u8c03\u7528\u76d1\u542c\u5668\u4e0a\u76f8\u5e94\u7684\u65b9\u6cd5\uff0c\u8ba9\u7528\u6237\u5728\u5bf9\u5e94\u7684\u65f6\u673a\u70b9\u505a\u5904\u7406\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u4e8b\u4ef6\u548c\u76d1\u542c\u5668"},{"location":"javaee/JspAndServlet/servlet_api/listener/#servletcontext","text":"","title":"ServletContext \u4e8b\u4ef6\u3001\u76d1\u542c\u5668"},{"location":"javaee/JspAndServlet/servlet_api/listener/#servletcontextlistener","text":"public interface ServletContextListener extends EventListener{ //Web \u5e94\u7528\u7a0b\u5e8f\u521d\u59cb\u5316\u540e\u8c03\u7528 public default void contextInitialized(ServletContextEvent sce); //Web \u5e94\u7528\u7a0b\u5e8f\u9500\u6bc1\u524d\u88ab\u8c03\u7528 public default void contextDestroyed(ServletContextEvent sce); } \u4f7f\u7528\u793a\u4f8b\uff1a @WebListener public class MyServletContextListener implements ServletContextListener{ public void contextInitialized(ServletContextEvent sec){ ServletContext context = sec.getServletContext(); //\u5177\u4f53\u5904\u7406\u903b\u8f91\uff0c\u6bd4\u5982\u4f1a\u8bdd\u7ba1\u7406\u7ae0\u8282\u4e2d\u63d0\u5230\u7684 SessionCookieConfig \u914d\u7f6e SessionCookieConfig config = servletContext.getSessionCookieConfig(); config.setMaxAge(7*24*60*60);// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4 } } SessionCookieConfig \u914d\u7f6e\u53c2\u8003 \u58f0\u660e\uff1a \u5b9e\u73b0 ServletContextListener \u63a5\u53e3\u540e\uff0c\u9700\u8981\u5411 Web \u5bb9\u5668\u6ce8\u518c\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u5982\u540c\u4e0a\u9762\u6240\u793a\u90a3\u6837\u4f7f\u7528 @WebListenner \u6ce8\u89e3\uff0c\u53e6\u5916\u4e00\u79cd\u5219\u662f\u5728 Web.xml \u4e2d\u6ce8\u518c\u3002 <listener> <listener-class>pers.cocoadel.MyServletContextListener</listener-class> </listener>","title":"ServletContextListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpsession","text":"","title":"HttpSession \u4e8b\u4ef6\u3001\u76d1\u542c\u5668"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpsessionlistener","text":"public interface HttpSessionListener extends EventListener{ //HttpSession \u5bf9\u8c61\u521d\u59cb\u5316\u524d\u88ab\u8c03\u7528 public default void sessionCreated(HttpSessionEvent se); //HTTP Session \u5bf9\u8c61\u7ed3\u675f\u524d\u88ab\u8c03\u7528 public default void sessionDestroyed(HttpSessionEvent se); } \u4f7f\u7528\u793a\u4f8b\uff1a @WebListener public class MyHttpSessionListener implements HttpSessionListener{ public void sessionDestroyed(HttpSessionEvent se){ HttpSession session=se.getSession(); //\u5904\u7406\u903b\u8f91\uff0c\u6bd4\u5982 HttpSession \u9500\u6bc1\u524d\uff0c\u4fee\u6539\u7528\u6237\u67d0\u4e9b\u6570\u636e\u5e93\u5b57\u6bb5\uff0c\u6bd4\u5982\u5728\u7ebf\u72b6\u6001\u3002 User user=(User)session.getAttribute(\"login\"); ... } } \u58f0\u660e\uff1a \u540c ServletContextListener\u3002","title":"HttpSessionListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpsessionattributelistener","text":"public interface HttpSessionAttributeListener extends EventListener{ public default void attributeAdded(HttpSessionBindingEvent se); public default void attributeRemoved(HttpSessionBindEvent se); public default void attributeReplaced(HttpSessionBindEvent se); } \u4f7f\u7528\u793a\u4f8b\uff1a public class MyHttpSessionAttributeListener implements HttpSessionAttributeListener{ public void attributeRemoved(HttpSessionBindingEvent se){ String name=se.getName();// \u88ab\u8bbe\u7f6e\u6216\u8005\u79fb\u9664\u7684\u5c5e\u6027\u7684\u540d\u79f0 Object value=se.getValue();// \u88ab\u8bbe\u7f6e\u6216\u8005\u79fb\u9664\u7684\u5c5e\u6027\u503c\uff0c\u5982\u679c\u662f replace \u53d6\u5f97\u662f\u65e7\u5f97\u503c\u3002 ... } } \u58f0\u660e\uff1a \u540c ServletContextListener\u3002","title":"HttpSessionAttributeListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpsessionbindinglistener","text":"\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u6dfb\u52a0\u5230\u6216\u8005\u79fb\u9664\u51fa HttpSession\uff0c\u5982\u679c\u8be5\u5bf9\u8c61\u5b9e\u73b0\u4e86 HttpSessionBindgingListener \u63a5\u53e3\uff0c\u5219\u4f1a\u6536\u5230\u88ab\u6dfb\u52a0\u6216\u8005\u79fb\u9664\u5f97\u901a\u77e5\u3002\u548c HttpSessionAttributeListener \u4e0d\u540c\uff0c\u8be5\u76d1\u542c\u5668\u662f\u9488\u5bf9\u5177\u4f53\u5bf9\u8c61\u5f97\u76d1\u542c\u3002 public interface HttpSessionBindingListener extends EventListener{ // \u5f53\u5bf9\u8c61\u88ab\u6dfb\u52a0\u5230 HttpSession \u65f6\u88ab\u8c03\u7528 public default void valueBound(HttpSessionBindingEvent event); // \u5f53\u5bf9\u8c61\u88ab\u79fb\u9664\u51fa HttpSession \u65f6\u88ab\u8c03\u7528 public default void valueUnbound(HttpSessionBindingEvent event); } \u4f7f\u7528\u793a\u4f8b\uff1a public class User implements HttpSessionBindingListener{ private String name; private String email; public void valueBound(HttpSessionBindingEvent event){...} public void valueUnbound(HttpSessionBindingEvent event){...} } public class MyServlet extends HttpServlet{ public void doGet(HttpServletRequest request, HttpServletResponse response){ User user=new User(); request.getSession().setAttribute(\"login\",user);//user \u5f97 valueBound \u65b9\u6cd5\u88ab\u56de\u8c03 } } \u58f0\u660e\uff1a \u65e0\u9700\u7279\u522b\u58f0\u660e\uff0c\u53ea\u9700\u8981\u5b9e\u73b0\u8be5\u63a5\u53e3\u5373\u53ef\u3002","title":"HttpSessionBindingListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpsessionactivationlistener","text":"public interface HttpSessionActivationListener extends EventListener{ public default void sessionWillPassivate(HttpSessionEvent se); public default void sessionDidActivate(HttpSessionEvent se); } HttpSessionActivationListener \u662f\u5bf9\u8c61\u8fc1\u79fb\u76d1\u542c\u5668\uff0c\u548c HttpSessionBindingListener \u4e00\u6837\uff0c\u8fd9\u662f\u4e00\u4e2a\u9488\u5bf9\u5177\u4f53\u5bf9\u8c61\u76d1\u542c\u5668\u3002 \u5728\u4f7f\u7528\u5206\u5e03\u5f0f\u73af\u5883\u5f97\u65f6\u5019\uff0c\u5f53\u4e00\u4e2a HttpSession \u8981\u4ece\u4e00\u4e2a JVM \u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a JVM \u65f6\uff0c\u5fc5\u987b\u5148\u5728\u539f\u672c\u5f97 JVM \u4e0a\u5e8f\u5217\u5316\uff08Serialize\uff09\u6240\u6709\u5c5e\u6027\u5bf9\u8c61\uff0c\u5728\u8fd9\u4e4b\u524d\u82e5\u5c5e\u6027\u5bf9\u8c61\u5b9e\u73b0\u4e86 HttpSessionActivationListener \u63a5\u53e3\uff0c\u5219\u4f1a\u56de\u8c03 sessionWillPassivate \u65b9\u6cd5\u3002 \u800c\u5f53 HttpSession \u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a JVM \u540e\uff0c\u5c31\u4f1a\u5bf9\u6240\u6709\u5c5e\u6027\u5bf9\u8c61\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\uff0c\u6b64\u65f6\u4f1a\u8c03\u7528 sessionDidActivate \u65b9\u6cd5\u3002 \u4f7f\u7528\u793a\u4f8b\u548c\u58f0\u660e\uff1a \u53c2\u8003 HttpSessionBindingListener\u3002","title":"HttpSessionActivationListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpsessionidlistener","text":"public HttpSessionIdListener extends EventListener{ // \u5f53 HttpServletRequest \u8c03\u7528 changeSessionId() \u65b9\u6cd5\u6539\u53d8 Session ID \u65f6\uff0c\u8be5\u65b9\u6cd5\u4f1a\u88ab\u56de\u8c03\u3002 puiblic default void sessionIdChangeed(HttpSessionEvent event, Stirng oldSessionId); } \u4f7f\u7528\u793a\u4f8b\u548c\u58f0\u660e\uff1a \u53c2\u8003 ServletContextListener\u3002","title":"HttpSessionIdListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#httpservletrequest","text":"","title":"HttpServletRequest \u4e8b\u4ef6\u3001\u76d1\u542c\u5668"},{"location":"javaee/JspAndServlet/servlet_api/listener/#servletrequestlistener","text":"// ServletRequestListener \u7684\u751f\u547d\u5468\u671f\u662f\u6574\u4e2a Web \u8bf7\u6c42\u3002 public interface ServletRequestListener extends EventListener{ // HttpServletRequest \u5bf9\u8c61\u751f\u6210\u65f6\u88ab\u8c03\u7528 public default void requestDestroyed(ServletRequestEvent sre); // httpServletRequest \u9500\u6bc1\u524d\u88ab\u8c03\u7528 public default void requestInitialized(ServletRequestEvent sre); } \u4f7f\u7528\u793a\u4f8b\uff1a // \u4ee5 spring \u7684 RequestContextListener \u4e3a\u4f8b public class RequestContextListener implements ServletRequestListener { @Override // Spring RequestContextListener \u5728 Request \u5bf9\u8c61\u521b\u5efa\u65f6\u5019\uff0c\u5c06\u5176\u8bbe\u7f6e\u5230 RequestContextHolder public void requestInitialized(ServletRequestEvent requestEvent) { ... HttpServletRequest request = (HttpServletRequest) requestEvent.getServletRequest(); ServletRequestAttributes attributes = new ServletRequestAttributes(request); request.setAttribute(REQUEST_ATTRIBUTES_ATTRIBUTE, attributes); LocaleContextHolder.setLocale(request.getLocale()); // RequContextHolder \u5185\u90e8\u5c01\u88c5\u4e86 ThreadLoacal RequestContextHolder.setRequestAttributes(attributes); } public void requestDestroyed(ServletRequestEvent evnet){ // \u7ed3\u675f\u7684\u65f6\u5019\u518d\u5c06 Request \u5bf9\u8c61\u4ece RequContextHolder \u4e2d\u79fb\u9664\u3002 .... } \u58f0\u660e\uff1a \u53c2\u8003 ServletContextListener\u3002","title":"ServletRequestListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#servletrequestattributelistener","text":"public interface ServletRequestAttributeListener extends EventListener{ // request \u6dfb\u52a0\u5c5e\u6027\u65f6\u88ab\u8c03\u7528 public default void attributeAdded(ServletRequestAttributeEvent event); // request \u5220\u9664\u5c5e\u6027\u65f6\u5019\u88ab\u8c03\u7528 public default void attributeRemoved(ServletRequestAttributeEvent event); // request \u66ff\u6362\u5c5e\u6027\u503c\u65f6\u88ab\u8c03\u7528 public default void attributeReplaced(ServletRequestAttributeEvent event); } \u4f7f\u7528\u548c\u58f0\u660e\uff1a \u53c2\u8003 HttpSessionAttributeListener \u3002","title":"ServletRequestAttributeListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#readlistener","text":"","title":"ReadListener"},{"location":"javaee/JspAndServlet/servlet_api/listener/#writelistener","text":"","title":"WriteListener"},{"location":"javaee/JspAndServlet/servlet_api/servlet/","text":"Servlet \u89c4\u8303 Web \u5e94\u7528\u7684\u90e8\u7f72\u6587\u4ef6\u7ed3\u6784\u89c4\u8303 WEB-INF \uff1a\u8fd9\u4e2a\u6587\u4ef6\u5939\u7684\u540d\u79f0\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u4e14\u4e00\u5b9a\u4f4d\u4e8e\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e4b\u4e0b\u3002WEB-INF \u6587\u4ef6\u5939\u5bf9\u5916\u754c\u662f\u5c01\u95ed\u7684\uff0c\u6d4f\u89c8\u5668\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5176\u8d44\u6e90\uff0c\u5fc5\u987b\u901a\u8fc7 Servlet/Jsp \u7684\u8bf7\u6c42\u8f6c\u53d1\u3002\u4e0d\u60f3\u8ba9\u6d4f\u89c8\u5668\u76f4\u63a5\u5b58\u53d6\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u653e\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u3002 web.xml\uff1aWeb \u5e94\u7528\u7684\u90e8\u7f72\u63cf\u8ff0\u6587\u4ef6\u3002 lib\uff1a\u653e\u4f9d\u8d56\u7684Jar\u5305 classes\uff1a\u7f16\u8bd1\u8fc7\u540e\u7684 .class \u6587\u4ef6\u3002 other \uff1a\u4f8b\u5982 images\u3001css \u7b49\u9759\u6001\u8d44\u6e90\u6587\u4ef6 /WEB-INF/lib \u4e2d Jar \u5305\u7684 /META-INF/resources \u4e2d\u7684\u9759\u6001\u8d44\u6e90\u4e5f\u4f1a\u88ab\u8bbf\u95ee\u5230\uff0c\u6bd4\u5982 /index.html \uff0c\u5982\u679c\u6839\u76ee\u5f55\u4e0b\u4e0d\u5b58\u5728 index.html\uff0c\u90a3\u4e48\u4f1a\u4f7f\u7528 Jar \u5305\u4e2d\u7684 /META-INF/resources/index.html\uff08\u5982\u679c\u5b58\u5728\u7684\u8bdd\uff09\u3002 Servlet API Servlet API\u67b6\u6784\u56fe Servlet \u5e94\u7528\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u65f6\u5019\u5fc5\u987b\u8981\u6709 Servlet API \u76f8\u5173\u7684\u7c7b\uff0c\u5982\u679c\u7528\u7684\u662f Tomcat \u7684\u8bdd\uff0c\u8fd9\u4e9b\u7c7b\u5728 Tomcat \u6587\u4ef6\u5939\u7684 lib \u5b50\u6587\u4ef6\u5939\u4e2d servlet-api.jar \u5305\u4e2d\u3002 Servlet \u751f\u547d\u5468\u671f init(Servletconfig servletConfig) \uff1a\u5b9e\u4f8b\u5316\u7684\u65b9\u6cd5\uff0c Servletconfig \u5bf9\u8c61\u4f1a\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u5165\u3002 service() \uff1aservlet \u4e1a\u52a1\u5904\u7406\u7684\u65b9\u6cd5\u3002 destroy() \uff1aServlet \u5b9e\u4f8b\u9500\u6bc1\u524d\u7684\u56de\u8c03\u3002 ServletConfig Servlet \u5b9e\u4f8b\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u4ee5\u5728\u58f0\u660e Servlet \u7684\u65f6\u5019\u5bf9\u5176\u8fdb\u884c\u8bbe\u7f6e\u3002 \u58f0\u660e Servlet @WebServlet @WebServlet{ name=\"hello\", urlPattern={\"/hello\"}, initParams={ @WebInitParam(name=\"path\", value=\"/xxx\"), @WebInitParam(name=\"name\", value=\"ruby\") }, loadOnStartup=1 } Web.xml <servlet> <servlet-name>hello</servlet-name> <servlet-class>com.example.Hello</servlet-class> <load-on-startup>1</load-on-startup> <init-param> <param-name>path</param-name> <param-value>/xxx</param-value> </init-param> <init-param> <param-name>name</param-name> <param-value>ruby</param-value> </init-param> </servlet> <servlet-mapping> <servlet-name>hello</servlet-name> <url-pattern>/hello</url-pattern> </servlet-mapping> \u5c5e\u6027 name \uff1aservlet \u5b9e\u4f8b\u7684\u540d\u79f0 urlPatterns \uff1aservlet \u7684\u8def\u5f84\u5339\u914d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u3002 initParams \uff1aServlet \u914d\u7f6e\uff0c\u4f1a\u88ab\u6620\u5c04\u5230 ServletConfig \u4e2d\u3002 loadOnStartup \uff1a \u5982\u679c\u503c\u5927\u4e8e0\uff0c\u5219\u8868\u793a Web \u5bb9\u5668\u542f\u52a8\u540e\u5c31\u521d\u59cb\u5316\u76f8\u5e94\u7684 Servlet \u5b9e\u4f8b\uff0c\u521d\u59cb\u5316\u7684\u987a\u5e8f\u7531\u503c\u5927\u5c0f\u51b3\u5b9a\uff0c\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u503c\u76f8\u540c\u5219\u7531 Web \u5bb9\u5668\u5382\u5546\u81ea\u884c\u51b3\u5b9a\u3002 \u5982\u679c\u503c\u5c0f\u4e8e0\uff0c\u5219\u8868\u793a Web \u5bb9\u5668\u542f\u52a8\u540e\u4e0d\u4f1a\u7acb\u9a6c\u5b9e\u4f8b\u5316\u76f8\u5e94\u7684 Servlet \u5b9e\u4f8b\uff0c\u800c\u662f\u4f1a\u5728\u9996\u6b21\u63a5\u6536\u8bf7\u6c42\u65f6\u5019\u624d\u5bf9\u76f8\u5e94\u7684 Servlet \u8fdb\u884c\u5b9e\u4f8b\u5316\u3001\u521d\u59cb\u5316\u64cd\u4f5c\u3002 \u9ed8\u8ba4\u503c\u662f-1 GenericServlet GenericServlet \u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u540c\u65f6\u5b9e\u73b0\u4e86 Servlet \u548c ServletConfig \u63a5\u53e3\u3002 GenericServlet \u5b9e\u73b0\u4e86 Servlet#init(ServletConfig) \u65b9\u6cd5\uff0c\u5e76\u4e14\u6dfb\u52a0\u4e86\u7a7a\u7684\u65e0\u53c2 init \u65b9\u6cd5\u3002 public void init(ServletConfig config) throws ServletException { this.config=config; init(); } //\u6211\u4eec\u5728\u5b9e\u73b0 Servlet \u7684\u65f6\u5019\uff0c\u5982\u679c\u9700\u8981\u521d\u59cb\u5316\u8d44\u6e90\uff0c\u53ef\u4ee5\u91cd\u5199\u8be5\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u5e26\u53c2\u6570\u7684 init \u65b9\u6cd5\u3002 public void init(){}; GenericServlet \u7531\u4e8e\u540c\u65f6\u5b9e\u73b0\u4e86 ServletConfig \u63a5\u53e3\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u4e0b\u9762\u7684 api ServletConfig getServletConfig() String getInitParameter(String name) Enumeration getInitParameterNames() ServletContext getServletContext() HttpServlet HttpServlet \u7ee7\u627f\u4e8e GenericServlet\uff0c\u540c\u65f6\u5b9a\u4e49 Web Http \u76f8\u5173\u7684\u5904\u7406 API\uff0c\u5177\u4f53\u53ef\u4ee5\u67e5\u770b\u5f00\u5934\u7684 \u67b6\u6784\u56fe \u3002GenericServlet \u5728\u6700\u521d\u5b9a\u4e49 Servlet \u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u9650\u4e8e\u5b83\u53ea\u80fd\u7528\u4e8e Http\uff0c\u6240\u6709\u5e76\u6ca1\u6709\u628a HTTP \u76f8\u5173\u670d\u52a1\u6d41\u7a0b\u5b9a\u4e49\u5728 GenericServlet \u4e2d\uff0c\u800c\u662f\u5b9a\u4e49\u5728 HttpServlet \u7684 service() \u65b9\u6cd5\u4e2d\u3002\u4e0e Servlet \u76f8\u5173\u7684\u7c7b\u6216\u8005\u63a5\u53e3\u90fd\u4f4d\u4e8e javax.servlet \u5305\u4e2d\uff0c\u5982\uff1aServlet\u3001GenericServlet\u3001ServletRequest\u3001ServletResponse \u7b49\u3002\u800c\u4e0e Http \u5b9a\u4e49\u76f8\u5173\u7684\u7c7b\u6216\u8005\u63a5\u53e3\u90fd\u4f4d\u4e8e javax.servlet.http \u5305\u4e2d\uff0c\u5982\uff1aHttpServlet\u3001HttpServletRequest\u3001HttpServletResponse \u7b49\u3002 ServletContext ServletContext \u662f Servlet \u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883\u7684\u4e0a\u4e0b\u6587\uff0c\u5176\u5b9a\u4e49\u4e86\u4e00\u4e9b API \u53ef\u4ee5\u5b9e\u73b0\u83b7\u53d6\u8bf7\u6c42\u8d44\u6e90\u7684 URI\u3001\u5b58\u53d6\u5c5e\u6027\uff0c\u8bbe\u7f6e\u6216\u8005\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u7684\u521d\u59cb\u53c2\u6570\uff0c\u751a\u81f3\u52a8\u6001\u8bbe\u7f6e Servlet \u5b9e\u4f8b\u3002 getRequestDispatcher(String path) \uff1a\u83b7\u53d6 RequestDispatcher \u5bf9\u8c61\uff0cpath \u53c2\u6570\u5fc5\u987b\u4ee5 \u201d\u201d \u5f00\u5934\u3002 \"/\" \u5f00\u5934\u7684\u8def\u5f84\u6210\u4e3a\u73af\u5883\u76f8\u5bf9\u8def\u5f84\uff0c\u6ca1\u6709 \u201c/\u201d \u5f00\u5934\u7684\u8def\u5f84\u79f0\u4e3a\u8bf7\u6c42\u76f8\u5bf9\u8def\u5f84\u3002 getResourcePaths(String path) \uff1a\u5217\u51fa\u8def\u5f84\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u8def\u5f84\uff0c\u8def\u5f84\u5168\u90e8\u4e3a\u5c55\u5f00\u7684\u73af\u5883\u76f8\u5bf9\u8def\u5f84\uff0c\u540c\u6837 path \u53c2\u6570\u5fc5\u987b\u662f\u4ee5 \u201c/\u201d \u5f00\u5934\u3002 getResourceAsStream(String path) \uff1a\u8fd4\u56de\u6587\u4ef6\u7684\u8f93\u5165\u6d41\uff0cpath \u5fc5\u987b\u4ee5 \u201c/\u201d \u5f00\u5934\uff0c\u8868\u793a\u73af\u5883\u76f8\u5bf9\u8def\u5f84\uff0c\u6216\u8005\u4f9d\u8d56 jar \u5305\u4e0b META-INF/resources \u7684\u76f8\u5bf9\u8def\u5f84\u3002 PushBuilder Servlet 4.0 \u540e\u63d0\u51fa\u7684\u65b0 API\uff0c\u7528\u4e8e\u652f\u6301 Http 2.0 \u7684 Server Push\u3002 ServletRequest HttpServletRequest \u5904\u7406\u8bf7\u6c42\u53c2\u6570 \uff1agetParameter()\u3001getParameterValues()\u3001getParameterNames()\u3001getParameterMap() \u5904\u7406\u8bf7\u6c42\u5934 \uff1agetHeader()\u3001getHeaders()\u3001getHeaderNames() Post \u8bf7\u6c42\u53c2\u6570\u7684\u7f16\u7801\u5904\u7406 \uff1a \u5bf9\u6bcf\u4e2a ServletRequest\uff0c\u8c03\u7528\u5176 setCharacterEncoding(String encoding) \u65b9\u6cd5\u3002 \u5728 web.xml \u4e2d\u914d\u7f6e\uff0c\u4f8b\u5982\uff1a <request-character-encoding>utf-8</request-character-encoding> \u3002 \u5728 Filter \u4e2d\uff0c\u7edf\u4e00\u5bf9 ServletRequest \u5bf9\u8c61\uff0c\u8c03\u7528 setCharacterEncoding \u65b9\u6cd5\u8bbe\u7f6e\u3002 Get \u8bf7\u6c42\u53c2\u6570\u5904\u7406 \uff1a setCharacterEncoding \u65b9\u6cd5\uff0c\u53ea\u4f1a\u5bf9\u8bf7\u6c42\u4f53\u8d77\u4f5c\u7528\uff0cGet \u65b9\u6cd5\u53c2\u6570\u5b58\u5728 URI \u4e2d\uff0c\u56e0\u6b64\u4e0d\u4f1a\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u5904\u7406 URI \u7684\u662f HTTP \u670d\u52a1\u5668\uff0c\u4e0d\u662f WEB \u670d\u52a1\u5668\uff0c\u56e0\u6b64\u9700\u8981\u624b\u52a8\u8f6c\u6362\u3002\u4f8b\u5982\uff1a string name=new String(name.getBytes(\"ISO-8859-1\"),\"UTF-8\") \u3002 Tomcat 8 \u4e4b\u540e\uff0c\u5904\u7406 URI \u7684\u9ed8\u8ba4\u7f16\u7801\u662f UTF-8\uff0c\u4f46\u5728 Tomcat 7 \u4e4b\u524d\u662f ISO-8859-1\uff0c\u5bf9\u4e8e Tomcat 7 \u7684 GET \u7f16\u7801\u5904\u7406\u53ef\u4ee5 \u53c2\u8003 Filter \u4f7f\u7528\u8bf7\u6c42\u5c01\u88c5\u5668\u7edf\u4e00\u5904\u7406 \u76f4\u63a5\u8bfb\u53d6\u8bf7\u6c42 Body \u8f93\u5165\u6d41 \uff1a getReader()\uff1a\u53ef\u4ee5\u53d6\u5f97\u4e00\u4e2a BufferedReader\uff0c\u8bfb\u53d6 Body \u7684\u6570\u636e\u3002 getInputStream()\uff1a\u53ef\u4ee5\u53d6\u5f97\u4e00\u4e2a ServletInputStream\uff0c\u8fd9\u662f InputStream \u7684\u5b50\u7c7b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bfb\u53d6 Body \u7684\u4e32\u6d41\uff0c\u53ef\u4ee5\u5229\u7528\u5b83\u4fe9\u5904\u7406\u4e0a\u4f20\u6587\u4ef6\u7684\u533a\u6bb5\u3002 multipart/form-data \u5904\u7406 \uff1agetPart()\u3001getParts()\uff0cPart \u63a5\u53e3\u7684\u5177\u4f53\u4f7f\u7528 \u53c2\u8003\u8fd9\u91cc ServletResponse HttpServletResponse \u8bbe\u7f6e\u54cd\u5e94\u5934 \uff1a setHeader()\u3001addHeader() setXXXHeader()\u3001addXXXHeader()\uff0c XXX \u8868\u793a\u7c7b\u578b\uff0c\u53ef\u4ee5\u662f Int\u3001String\u3001Date\u7b49\u3002 \u8bbe\u7f6e\u7f13\u51b2\u533a \uff1a getBufferSize()\uff1a\u83b7\u53d6\u7f13\u51b2\u533a\u5927\u5c0f\u3002 setBufferSize()\uff1a\u8bbe\u7f6e\u7f13\u5b58\u533a\u5927\u5c0f\uff0c\u5fc5\u987b\u5728 HttpServletResponse \u7684 getWriter() \u548c getOutputStream() \u65b9\u6cd5\u88ab\u8c03\u7528\u4e4b\u524d\u8fdb\u884c\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 isCommitted()\uff1a\u5728\u7f13\u51b2\u533a\u672a\u6ee1\u4e4b\u524d\uff0c\u8bbe\u7f6e\u7684\u54cd\u5e94\u5185\u5bb9\u5e76\u4e0d\u4f1a\u771f\u6b63\u4f20\u81f3\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528 isCommitted() \u65b9\u6cd5\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u54cd\u5e94\u786e\u8ba4\u3002 reset()\uff1a\u91cd\u7f6e\u54cd\u5e94\u5185\u5bb9\uff0c\u4f1a\u8fde\u540c\u6807\u5934\u4e00\u8d77\u6e05\u9664\uff0c\u5982\u679c\u54cd\u5e94\u5df2\u7ecf\u786e\u8ba4\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 resetBuffer()\uff1a\u91cd\u7f6e\u54cd\u5e94\u5185\u5bb9\uff0c\u4f46\u662f\u4e0d\u4f1a\u6e05\u9664\u6807\u5934\uff0c\u5982\u679c\u54cd\u5e94\u5df2\u7ecf\u786e\u8ba4\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 flushBuffer() \uff1a\u6e05\u9664\u7f13\u51b2\u533a\u4ee5\u8bbe\u7f6e\u7684\u54cd\u5e94\u4fe1\u606f\uff0c\u5e76\u4e14\u4f20\u9001\u81f3\u6d4f\u89c8\u5668\u3002 HttpServetResponse \u5bf9\u8c61\u82e5\u88ab\u5173\u95ed\uff0c\u5219\u5fc5\u987b\u6e05\u9664\u6240\u6709\u7684\u54cd\u5e94\u5185\u5bb9\uff0c\u54cd\u5e94\u5bf9\u8c61\u88ab\u5173\u95ed\u7684\u65f6\u673a\u7531\u4ee5\u4e0b\u51e0\u4e2a\uff1a Servlet \u7684 service() \u65b9\u6cd5\u5df2\u7ecf\u7ed3\u675f\u3002 \u54cd\u5e94\u5185\u5bb9\u7684\u957f\u5ea6\u8d85\u8fc7\u4e86 HttpServletResponse#setContentLength() \u6240\u8bbe\u7f6e\u7684\u957f\u5ea6\u3002 \u8c03\u7528\u4e86 sendRedirect() \u6216\u8005 sendError() \u65b9\u6cd5\u3002 \u8c03\u7528\u4e86 AsyncContext \u7684 complete() \u65b9\u6cd5\u3002 \u8bbe\u7f6e\u8f93\u51fa\u7f16\u7801 \uff08\u4f18\u5148\u7ea7\u9ad8\u5230\u4f4e\uff09 \uff1a web.xml \u4e2d\u914d\u7f6e\uff0c\u4f8b\u5982\uff1a <response-character-encoding>UTF-8</response-character-encoding> \u3002 \u901a\u8fc7 HttpServletResponse#setCharacterEncoding \u548c HttpServletResponse#setContentType() \u65b9\u6cd5\u3002 setContentType \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e MIME \u548c \u7f16\u7801\uff1asetContentType(\"text/html;charaset=utf-8\") \u5e38\u89c1\u7684 MIME \u8bbe\u7f6e\u6709\uff1atext/html, application/pdf, application/json \u7b49\u3002\u53ef\u4ee5\u5728 web.xml \u4e2d\u8bbe\u7f6e\u6587\u4ef6\u540e\u7f00\u540d\u4ee5 MIME \u7684\u6620\u5c04\uff0c\u8fd9\u6837\u53ef\u4ee5\u901a\u8fc7 ServletContext#getMimeType(String filename) \u83b7\u53d6\u5bf9\u5e94\u7684 MIME\u3002 <mime-mapping> <extension>pdf</extension> <mime-type>application/pdf</mime-type> </mime-mapping> \u901a\u8fc7 HttpServletResponse#setLocale \u6765\u8bbe\u7f6e\u5730\u533a\u4fe1\u606f\uff0clocale \u5305\u542b\u4e86\u8bed\u7cfb\u548c\u7f16\u7801\u4fe1\u606f\u3002 \u53ef\u4ee5\u901a\u8fc7 web.xml \u6765\u81ea\u5b9a\u4e49 locale \u7684\u7f16\u7801\u4fe1\u606f <locale-encoding-mapping-list> <locale-encoding-mapping> <locale>zh_CN</locale> <encoding>UTF-8</encoding> </locale-encoding-mapping> </locale-encoding-mapping-list> \u8f93\u51fa\u5b57\u7b26 \uff1agetWriter() \u8f93\u51fa\u4e8c\u8fdb\u5236\u6d41 \uff1agetOutputStream()\uff0c \u91cd\u5b9a\u5411 \uff1asendRedirect() \u53d1\u9001\u9519\u8bef\u7f16\u7801 \uff1asendError()\uff0c\u5982\u679c\u5728\u54cd\u5e94\u786e\u8ba4\u4e4b\u540e\u8c03\u7528\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 Part","title":"Servlet"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servlet","text":"","title":"Servlet \u89c4\u8303"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#web","text":"WEB-INF \uff1a\u8fd9\u4e2a\u6587\u4ef6\u5939\u7684\u540d\u79f0\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u4e14\u4e00\u5b9a\u4f4d\u4e8e\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e4b\u4e0b\u3002WEB-INF \u6587\u4ef6\u5939\u5bf9\u5916\u754c\u662f\u5c01\u95ed\u7684\uff0c\u6d4f\u89c8\u5668\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5176\u8d44\u6e90\uff0c\u5fc5\u987b\u901a\u8fc7 Servlet/Jsp \u7684\u8bf7\u6c42\u8f6c\u53d1\u3002\u4e0d\u60f3\u8ba9\u6d4f\u89c8\u5668\u76f4\u63a5\u5b58\u53d6\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u653e\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u3002 web.xml\uff1aWeb \u5e94\u7528\u7684\u90e8\u7f72\u63cf\u8ff0\u6587\u4ef6\u3002 lib\uff1a\u653e\u4f9d\u8d56\u7684Jar\u5305 classes\uff1a\u7f16\u8bd1\u8fc7\u540e\u7684 .class \u6587\u4ef6\u3002 other \uff1a\u4f8b\u5982 images\u3001css \u7b49\u9759\u6001\u8d44\u6e90\u6587\u4ef6 /WEB-INF/lib \u4e2d Jar \u5305\u7684 /META-INF/resources \u4e2d\u7684\u9759\u6001\u8d44\u6e90\u4e5f\u4f1a\u88ab\u8bbf\u95ee\u5230\uff0c\u6bd4\u5982 /index.html \uff0c\u5982\u679c\u6839\u76ee\u5f55\u4e0b\u4e0d\u5b58\u5728 index.html\uff0c\u90a3\u4e48\u4f1a\u4f7f\u7528 Jar \u5305\u4e2d\u7684 /META-INF/resources/index.html\uff08\u5982\u679c\u5b58\u5728\u7684\u8bdd\uff09\u3002","title":"Web \u5e94\u7528\u7684\u90e8\u7f72\u6587\u4ef6\u7ed3\u6784\u89c4\u8303"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servlet-api","text":"","title":"Servlet  API"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servlet-api_1","text":"Servlet \u5e94\u7528\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u65f6\u5019\u5fc5\u987b\u8981\u6709 Servlet API \u76f8\u5173\u7684\u7c7b\uff0c\u5982\u679c\u7528\u7684\u662f Tomcat \u7684\u8bdd\uff0c\u8fd9\u4e9b\u7c7b\u5728 Tomcat \u6587\u4ef6\u5939\u7684 lib \u5b50\u6587\u4ef6\u5939\u4e2d servlet-api.jar \u5305\u4e2d\u3002","title":"Servlet API\u67b6\u6784\u56fe"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servlet_1","text":"init(Servletconfig servletConfig) \uff1a\u5b9e\u4f8b\u5316\u7684\u65b9\u6cd5\uff0c Servletconfig \u5bf9\u8c61\u4f1a\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u5165\u3002 service() \uff1aservlet \u4e1a\u52a1\u5904\u7406\u7684\u65b9\u6cd5\u3002 destroy() \uff1aServlet \u5b9e\u4f8b\u9500\u6bc1\u524d\u7684\u56de\u8c03\u3002","title":"Servlet \u751f\u547d\u5468\u671f"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servletconfig","text":"Servlet \u5b9e\u4f8b\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u4ee5\u5728\u58f0\u660e Servlet \u7684\u65f6\u5019\u5bf9\u5176\u8fdb\u884c\u8bbe\u7f6e\u3002","title":"ServletConfig"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servlet_2","text":"","title":"\u58f0\u660e Servlet"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#webservlet","text":"@WebServlet{ name=\"hello\", urlPattern={\"/hello\"}, initParams={ @WebInitParam(name=\"path\", value=\"/xxx\"), @WebInitParam(name=\"name\", value=\"ruby\") }, loadOnStartup=1 }","title":"@WebServlet"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#webxml","text":"<servlet> <servlet-name>hello</servlet-name> <servlet-class>com.example.Hello</servlet-class> <load-on-startup>1</load-on-startup> <init-param> <param-name>path</param-name> <param-value>/xxx</param-value> </init-param> <init-param> <param-name>name</param-name> <param-value>ruby</param-value> </init-param> </servlet> <servlet-mapping> <servlet-name>hello</servlet-name> <url-pattern>/hello</url-pattern> </servlet-mapping>","title":"Web.xml"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#_1","text":"name \uff1aservlet \u5b9e\u4f8b\u7684\u540d\u79f0 urlPatterns \uff1aservlet \u7684\u8def\u5f84\u5339\u914d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u3002 initParams \uff1aServlet \u914d\u7f6e\uff0c\u4f1a\u88ab\u6620\u5c04\u5230 ServletConfig \u4e2d\u3002 loadOnStartup \uff1a \u5982\u679c\u503c\u5927\u4e8e0\uff0c\u5219\u8868\u793a Web \u5bb9\u5668\u542f\u52a8\u540e\u5c31\u521d\u59cb\u5316\u76f8\u5e94\u7684 Servlet \u5b9e\u4f8b\uff0c\u521d\u59cb\u5316\u7684\u987a\u5e8f\u7531\u503c\u5927\u5c0f\u51b3\u5b9a\uff0c\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u503c\u76f8\u540c\u5219\u7531 Web \u5bb9\u5668\u5382\u5546\u81ea\u884c\u51b3\u5b9a\u3002 \u5982\u679c\u503c\u5c0f\u4e8e0\uff0c\u5219\u8868\u793a Web \u5bb9\u5668\u542f\u52a8\u540e\u4e0d\u4f1a\u7acb\u9a6c\u5b9e\u4f8b\u5316\u76f8\u5e94\u7684 Servlet \u5b9e\u4f8b\uff0c\u800c\u662f\u4f1a\u5728\u9996\u6b21\u63a5\u6536\u8bf7\u6c42\u65f6\u5019\u624d\u5bf9\u76f8\u5e94\u7684 Servlet \u8fdb\u884c\u5b9e\u4f8b\u5316\u3001\u521d\u59cb\u5316\u64cd\u4f5c\u3002 \u9ed8\u8ba4\u503c\u662f-1","title":"\u5c5e\u6027"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#genericservlet","text":"GenericServlet \u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u540c\u65f6\u5b9e\u73b0\u4e86 Servlet \u548c ServletConfig \u63a5\u53e3\u3002 GenericServlet \u5b9e\u73b0\u4e86 Servlet#init(ServletConfig) \u65b9\u6cd5\uff0c\u5e76\u4e14\u6dfb\u52a0\u4e86\u7a7a\u7684\u65e0\u53c2 init \u65b9\u6cd5\u3002 public void init(ServletConfig config) throws ServletException { this.config=config; init(); } //\u6211\u4eec\u5728\u5b9e\u73b0 Servlet \u7684\u65f6\u5019\uff0c\u5982\u679c\u9700\u8981\u521d\u59cb\u5316\u8d44\u6e90\uff0c\u53ef\u4ee5\u91cd\u5199\u8be5\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u5e26\u53c2\u6570\u7684 init \u65b9\u6cd5\u3002 public void init(){}; GenericServlet \u7531\u4e8e\u540c\u65f6\u5b9e\u73b0\u4e86 ServletConfig \u63a5\u53e3\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u4e0b\u9762\u7684 api ServletConfig getServletConfig() String getInitParameter(String name) Enumeration getInitParameterNames() ServletContext getServletContext()","title":"GenericServlet"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#httpservlet","text":"HttpServlet \u7ee7\u627f\u4e8e GenericServlet\uff0c\u540c\u65f6\u5b9a\u4e49 Web Http \u76f8\u5173\u7684\u5904\u7406 API\uff0c\u5177\u4f53\u53ef\u4ee5\u67e5\u770b\u5f00\u5934\u7684 \u67b6\u6784\u56fe \u3002GenericServlet \u5728\u6700\u521d\u5b9a\u4e49 Servlet \u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u9650\u4e8e\u5b83\u53ea\u80fd\u7528\u4e8e Http\uff0c\u6240\u6709\u5e76\u6ca1\u6709\u628a HTTP \u76f8\u5173\u670d\u52a1\u6d41\u7a0b\u5b9a\u4e49\u5728 GenericServlet \u4e2d\uff0c\u800c\u662f\u5b9a\u4e49\u5728 HttpServlet \u7684 service() \u65b9\u6cd5\u4e2d\u3002\u4e0e Servlet \u76f8\u5173\u7684\u7c7b\u6216\u8005\u63a5\u53e3\u90fd\u4f4d\u4e8e javax.servlet \u5305\u4e2d\uff0c\u5982\uff1aServlet\u3001GenericServlet\u3001ServletRequest\u3001ServletResponse \u7b49\u3002\u800c\u4e0e Http \u5b9a\u4e49\u76f8\u5173\u7684\u7c7b\u6216\u8005\u63a5\u53e3\u90fd\u4f4d\u4e8e javax.servlet.http \u5305\u4e2d\uff0c\u5982\uff1aHttpServlet\u3001HttpServletRequest\u3001HttpServletResponse \u7b49\u3002","title":"HttpServlet"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servletcontext","text":"ServletContext \u662f Servlet \u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883\u7684\u4e0a\u4e0b\u6587\uff0c\u5176\u5b9a\u4e49\u4e86\u4e00\u4e9b API \u53ef\u4ee5\u5b9e\u73b0\u83b7\u53d6\u8bf7\u6c42\u8d44\u6e90\u7684 URI\u3001\u5b58\u53d6\u5c5e\u6027\uff0c\u8bbe\u7f6e\u6216\u8005\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u7684\u521d\u59cb\u53c2\u6570\uff0c\u751a\u81f3\u52a8\u6001\u8bbe\u7f6e Servlet \u5b9e\u4f8b\u3002 getRequestDispatcher(String path) \uff1a\u83b7\u53d6 RequestDispatcher \u5bf9\u8c61\uff0cpath \u53c2\u6570\u5fc5\u987b\u4ee5 \u201d\u201d \u5f00\u5934\u3002 \"/\" \u5f00\u5934\u7684\u8def\u5f84\u6210\u4e3a\u73af\u5883\u76f8\u5bf9\u8def\u5f84\uff0c\u6ca1\u6709 \u201c/\u201d \u5f00\u5934\u7684\u8def\u5f84\u79f0\u4e3a\u8bf7\u6c42\u76f8\u5bf9\u8def\u5f84\u3002 getResourcePaths(String path) \uff1a\u5217\u51fa\u8def\u5f84\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u8def\u5f84\uff0c\u8def\u5f84\u5168\u90e8\u4e3a\u5c55\u5f00\u7684\u73af\u5883\u76f8\u5bf9\u8def\u5f84\uff0c\u540c\u6837 path \u53c2\u6570\u5fc5\u987b\u662f\u4ee5 \u201c/\u201d \u5f00\u5934\u3002 getResourceAsStream(String path) \uff1a\u8fd4\u56de\u6587\u4ef6\u7684\u8f93\u5165\u6d41\uff0cpath \u5fc5\u987b\u4ee5 \u201c/\u201d \u5f00\u5934\uff0c\u8868\u793a\u73af\u5883\u76f8\u5bf9\u8def\u5f84\uff0c\u6216\u8005\u4f9d\u8d56 jar \u5305\u4e0b META-INF/resources \u7684\u76f8\u5bf9\u8def\u5f84\u3002","title":"ServletContext"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#pushbuilder","text":"Servlet 4.0 \u540e\u63d0\u51fa\u7684\u65b0 API\uff0c\u7528\u4e8e\u652f\u6301 Http 2.0 \u7684 Server Push\u3002","title":"PushBuilder"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servletrequest","text":"","title":"ServletRequest"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#httpservletrequest","text":"\u5904\u7406\u8bf7\u6c42\u53c2\u6570 \uff1agetParameter()\u3001getParameterValues()\u3001getParameterNames()\u3001getParameterMap() \u5904\u7406\u8bf7\u6c42\u5934 \uff1agetHeader()\u3001getHeaders()\u3001getHeaderNames() Post \u8bf7\u6c42\u53c2\u6570\u7684\u7f16\u7801\u5904\u7406 \uff1a \u5bf9\u6bcf\u4e2a ServletRequest\uff0c\u8c03\u7528\u5176 setCharacterEncoding(String encoding) \u65b9\u6cd5\u3002 \u5728 web.xml \u4e2d\u914d\u7f6e\uff0c\u4f8b\u5982\uff1a <request-character-encoding>utf-8</request-character-encoding> \u3002 \u5728 Filter \u4e2d\uff0c\u7edf\u4e00\u5bf9 ServletRequest \u5bf9\u8c61\uff0c\u8c03\u7528 setCharacterEncoding \u65b9\u6cd5\u8bbe\u7f6e\u3002 Get \u8bf7\u6c42\u53c2\u6570\u5904\u7406 \uff1a setCharacterEncoding \u65b9\u6cd5\uff0c\u53ea\u4f1a\u5bf9\u8bf7\u6c42\u4f53\u8d77\u4f5c\u7528\uff0cGet \u65b9\u6cd5\u53c2\u6570\u5b58\u5728 URI \u4e2d\uff0c\u56e0\u6b64\u4e0d\u4f1a\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u5904\u7406 URI \u7684\u662f HTTP \u670d\u52a1\u5668\uff0c\u4e0d\u662f WEB \u670d\u52a1\u5668\uff0c\u56e0\u6b64\u9700\u8981\u624b\u52a8\u8f6c\u6362\u3002\u4f8b\u5982\uff1a string name=new String(name.getBytes(\"ISO-8859-1\"),\"UTF-8\") \u3002 Tomcat 8 \u4e4b\u540e\uff0c\u5904\u7406 URI \u7684\u9ed8\u8ba4\u7f16\u7801\u662f UTF-8\uff0c\u4f46\u5728 Tomcat 7 \u4e4b\u524d\u662f ISO-8859-1\uff0c\u5bf9\u4e8e Tomcat 7 \u7684 GET \u7f16\u7801\u5904\u7406\u53ef\u4ee5 \u53c2\u8003 Filter \u4f7f\u7528\u8bf7\u6c42\u5c01\u88c5\u5668\u7edf\u4e00\u5904\u7406 \u76f4\u63a5\u8bfb\u53d6\u8bf7\u6c42 Body \u8f93\u5165\u6d41 \uff1a getReader()\uff1a\u53ef\u4ee5\u53d6\u5f97\u4e00\u4e2a BufferedReader\uff0c\u8bfb\u53d6 Body \u7684\u6570\u636e\u3002 getInputStream()\uff1a\u53ef\u4ee5\u53d6\u5f97\u4e00\u4e2a ServletInputStream\uff0c\u8fd9\u662f InputStream \u7684\u5b50\u7c7b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bfb\u53d6 Body \u7684\u4e32\u6d41\uff0c\u53ef\u4ee5\u5229\u7528\u5b83\u4fe9\u5904\u7406\u4e0a\u4f20\u6587\u4ef6\u7684\u533a\u6bb5\u3002 multipart/form-data \u5904\u7406 \uff1agetPart()\u3001getParts()\uff0cPart \u63a5\u53e3\u7684\u5177\u4f53\u4f7f\u7528 \u53c2\u8003\u8fd9\u91cc","title":"HttpServletRequest"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#servletresponse","text":"","title":"ServletResponse"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#httpservletresponse","text":"\u8bbe\u7f6e\u54cd\u5e94\u5934 \uff1a setHeader()\u3001addHeader() setXXXHeader()\u3001addXXXHeader()\uff0c XXX \u8868\u793a\u7c7b\u578b\uff0c\u53ef\u4ee5\u662f Int\u3001String\u3001Date\u7b49\u3002 \u8bbe\u7f6e\u7f13\u51b2\u533a \uff1a getBufferSize()\uff1a\u83b7\u53d6\u7f13\u51b2\u533a\u5927\u5c0f\u3002 setBufferSize()\uff1a\u8bbe\u7f6e\u7f13\u5b58\u533a\u5927\u5c0f\uff0c\u5fc5\u987b\u5728 HttpServletResponse \u7684 getWriter() \u548c getOutputStream() \u65b9\u6cd5\u88ab\u8c03\u7528\u4e4b\u524d\u8fdb\u884c\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 isCommitted()\uff1a\u5728\u7f13\u51b2\u533a\u672a\u6ee1\u4e4b\u524d\uff0c\u8bbe\u7f6e\u7684\u54cd\u5e94\u5185\u5bb9\u5e76\u4e0d\u4f1a\u771f\u6b63\u4f20\u81f3\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528 isCommitted() \u65b9\u6cd5\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u54cd\u5e94\u786e\u8ba4\u3002 reset()\uff1a\u91cd\u7f6e\u54cd\u5e94\u5185\u5bb9\uff0c\u4f1a\u8fde\u540c\u6807\u5934\u4e00\u8d77\u6e05\u9664\uff0c\u5982\u679c\u54cd\u5e94\u5df2\u7ecf\u786e\u8ba4\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 resetBuffer()\uff1a\u91cd\u7f6e\u54cd\u5e94\u5185\u5bb9\uff0c\u4f46\u662f\u4e0d\u4f1a\u6e05\u9664\u6807\u5934\uff0c\u5982\u679c\u54cd\u5e94\u5df2\u7ecf\u786e\u8ba4\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002 flushBuffer() \uff1a\u6e05\u9664\u7f13\u51b2\u533a\u4ee5\u8bbe\u7f6e\u7684\u54cd\u5e94\u4fe1\u606f\uff0c\u5e76\u4e14\u4f20\u9001\u81f3\u6d4f\u89c8\u5668\u3002 HttpServetResponse \u5bf9\u8c61\u82e5\u88ab\u5173\u95ed\uff0c\u5219\u5fc5\u987b\u6e05\u9664\u6240\u6709\u7684\u54cd\u5e94\u5185\u5bb9\uff0c\u54cd\u5e94\u5bf9\u8c61\u88ab\u5173\u95ed\u7684\u65f6\u673a\u7531\u4ee5\u4e0b\u51e0\u4e2a\uff1a Servlet \u7684 service() \u65b9\u6cd5\u5df2\u7ecf\u7ed3\u675f\u3002 \u54cd\u5e94\u5185\u5bb9\u7684\u957f\u5ea6\u8d85\u8fc7\u4e86 HttpServletResponse#setContentLength() \u6240\u8bbe\u7f6e\u7684\u957f\u5ea6\u3002 \u8c03\u7528\u4e86 sendRedirect() \u6216\u8005 sendError() \u65b9\u6cd5\u3002 \u8c03\u7528\u4e86 AsyncContext \u7684 complete() \u65b9\u6cd5\u3002 \u8bbe\u7f6e\u8f93\u51fa\u7f16\u7801 \uff08\u4f18\u5148\u7ea7\u9ad8\u5230\u4f4e\uff09 \uff1a web.xml \u4e2d\u914d\u7f6e\uff0c\u4f8b\u5982\uff1a <response-character-encoding>UTF-8</response-character-encoding> \u3002 \u901a\u8fc7 HttpServletResponse#setCharacterEncoding \u548c HttpServletResponse#setContentType() \u65b9\u6cd5\u3002 setContentType \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e MIME \u548c \u7f16\u7801\uff1asetContentType(\"text/html;charaset=utf-8\") \u5e38\u89c1\u7684 MIME \u8bbe\u7f6e\u6709\uff1atext/html, application/pdf, application/json \u7b49\u3002\u53ef\u4ee5\u5728 web.xml \u4e2d\u8bbe\u7f6e\u6587\u4ef6\u540e\u7f00\u540d\u4ee5 MIME \u7684\u6620\u5c04\uff0c\u8fd9\u6837\u53ef\u4ee5\u901a\u8fc7 ServletContext#getMimeType(String filename) \u83b7\u53d6\u5bf9\u5e94\u7684 MIME\u3002 <mime-mapping> <extension>pdf</extension> <mime-type>application/pdf</mime-type> </mime-mapping> \u901a\u8fc7 HttpServletResponse#setLocale \u6765\u8bbe\u7f6e\u5730\u533a\u4fe1\u606f\uff0clocale \u5305\u542b\u4e86\u8bed\u7cfb\u548c\u7f16\u7801\u4fe1\u606f\u3002 \u53ef\u4ee5\u901a\u8fc7 web.xml \u6765\u81ea\u5b9a\u4e49 locale \u7684\u7f16\u7801\u4fe1\u606f <locale-encoding-mapping-list> <locale-encoding-mapping> <locale>zh_CN</locale> <encoding>UTF-8</encoding> </locale-encoding-mapping> </locale-encoding-mapping-list> \u8f93\u51fa\u5b57\u7b26 \uff1agetWriter() \u8f93\u51fa\u4e8c\u8fdb\u5236\u6d41 \uff1agetOutputStream()\uff0c \u91cd\u5b9a\u5411 \uff1asendRedirect() \u53d1\u9001\u9519\u8bef\u7f16\u7801 \uff1asendError()\uff0c\u5982\u679c\u5728\u54cd\u5e94\u786e\u8ba4\u4e4b\u540e\u8c03\u7528\u4f1a\u629b\u51fa IllegalStateException \u5f02\u5e38\u3002","title":"HttpServletResponse"},{"location":"javaee/JspAndServlet/servlet_api/servlet/#part","text":"","title":"Part"},{"location":"javaee/JspAndServlet/servlet_api/session_management/","text":"\u4f1a\u8bdd\u7ba1\u7406 \u4f1a\u8bdd\u7ba1\u7406\u7684\u51e0\u4e2a\u57fa\u672c\u65b9\u5f0f\uff1a\u9690\u85cf\u57df\uff08Hidden Field\uff09\u3001Cookie \u4e0e URI \u91cd\u5199\u3002 \u9690\u85cf\u57df \u628a\u524d\u9762\u9875\u9762\u7684\u7ed3\u679c\u901a\u8fc7\u9690\u85cf\u57df\u7684\u65b9\u5f0f\u5199\u5165\u65b0\u7684\u9875\u9762\uff0c\u7136\u540e\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u4e0b\u4e00\u6b21\u63d0\u4ea4\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u628a\u9690\u85cf\u57df\u4e2d\u7684\u5185\u5bb9\u4e00\u5e76\u63d0\u4ea4\uff0c\u4ece\u800c\u5b9e\u73b0\u72b6\u6001\u7684\u7b80\u5355\u7ba1\u7406\u3002\u6bd4\u5982\u4e00\u4e2a\u8c03\u67e5\u95ee\u5377\uff0c\u5728\u7528\u6237\u63d0\u4ea4\u7b2c\u4e00\u9875\u7b54\u6848\u51c6\u5907\u8df3\u8f6c\u5230\u7b2c\u4e8c\u9875\u7684\u65f6\u5019\uff0c\u540e\u7aef\u53ef\u4ee5\u628a\u7b2c\u4e00\u9875\u7684\u7b54\u6848\u5199\u5165\u7b2c\u4e8c\u9875\u7684\u9690\u85cf\u57df\uff0c\u5f53\u7528\u6237\u9700\u8981\u4ece\u7b2c\u4e8c\u9875\u8fd4\u56de\u7b2c\u4e00\u9875\u7684\u65f6\u5019\uff0c\u540e\u7aef\u53ef\u4ee5\u4ece\u9690\u85cf\u57df\u4e2d\u53d6\u51fa\u7b2c\u4e00\u9875\u7684\u4f5c\u7b54\u60c5\u51b5\uff0c\u4ece\u800c\u4fdd\u7559\u4e86\u7528\u6237\u7b2c\u4e00\u9875\u7684\u4f5c\u7b54\u9875\u9762\u3002\u8fd9\u662f\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u5e76\u4e0d\u7b97 Servlet/JSP \u7684\u7ba1\u7406\u673a\u5236\u3002 Cookie Cookie \u7684\u57fa\u672c\u539f\u7406 Cookie \u662f\u7531 \u6d4f\u89c8\u5668 \u8d1f\u8d23\u5b58\u50a8\u4fe1\u606f\u7684\u4e00\u79cd\u65b9\u5f0f\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u8bf7\u6c42\u5934 set-cookie \u6765\u544a\u8bc9\u6d4f\u89c8\u5668\u9700\u8981\u5b58\u50a8\u7684\u4fe1\u606f\u7684\u5185\u5bb9\u548c\u671f\u9650\u3002\u4f8b\u5982\uff1a set-cookie user=ruby;Expires=SUN,12-Apr-2009 04:38:55 GMT Web \u7aef\u8bbe\u7f6e\u8bf7\u6c42\u5934 set-cookie \u7684\u65b9\u5f0f\u5982\u4e0b\uff1a Cookie cookie = new Cookie(\"user\",\"ruby\"); cookie.setMaxAge(7*24*60*60)//\u6709\u6548\u671f\u4e3a7\u5929\uff0c\u5982\u4e0d\u8bbe\u5b9a\u6709\u6548\u671f\u9650\uff0c\u5219\u9ed8\u8ba4\u5173\u95ed\u6d4f\u89c8\u5668\u540e\u5931\u6548 response.addCookie(cookie);//HttpServletResponse \u53ef\u4ee5 add \u591a\u4e2a cookie \u5bf9\u8c61 Web \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7 HttpServletRequest#getCookies() \u6765\u83b7\u53d6\u7f51\u9875\u6240\u5c5e\u57df\uff08domain\uff09\u7684\u6240\u6709 Cookie\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a Cookie[]\u3002 Cookie[] cookies=request.getCookies(); if(cookies!=null){ for(Cookie cookie : cookies){ String name=cookie.getName(); String value=cookie.getValue(); } } \u6d4f\u89c8\u5668\u88ab\u9884\u671f\u80fd\u4e3a\u6bcf\u4e2a\u7f51\u7ad9\u5b58\u50a8 20 \u4e2a Cookie\uff0c\u603b\u5171\u53ef\u5b58\u50a8 300 \u4e2a Cookie\uff0c\u6bcf\u4e2a Cookie \u5927\u5c0f\u4e0d\u8d85\u8fc7 4 KB\uff08\u6bcf\u4e2a\u5382\u5546\u7684\u6d4f\u89c8\u5668\u5b9e\u9645\u60c5\u51b5\u4f1a\u6709\u6240\u4e0d\u540c\uff09\uff0c\u56e0\u6b64 Cookie \u53ef\u5b58\u50a8\u7684\u4fe1\u606f\u662f\u6709\u9650\u7684\u3002 Cookie \u7684\u5b89\u5168\u6027 Cookie \u628a\u4fe1\u606f\u5b58\u50a8\u5728\u5ba2\u6237\u7aef\uff0c\u88ab\u7a83\u53d6\u7684\u98ce\u9669\u8f83\u9ad8\uff0c\u867d\u7136\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u9002\u5f53\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5e76\u4e14\u7ed3\u5408\u6458\u8981\u7b97\u6cd5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u4f46\u662f\u8fd8\u662f\u65e0\u6cd5\u4fdd\u8bc1\uff0c\u56e0\u6b64\u4e0d\u592a\u9002\u5408\u5b58\u50a8\u5b89\u5168\u6027\u8981\u6c42\u8f83\u9ad8\u7684\u4fe1\u606f\uff0c\u6bd4\u5982\u5bc6\u7801\u3002 Cookie \u53ef\u4ee5\u901a\u8fc7 setSecure() \u65b9\u6cd5\u8bbe\u5b9a\u4e3a true \uff0c\u8fd9\u6837\u5c31\u53ea\u4f1a\u5728 HTTPS \u4e0b\u4f20\u9001 Cookie\u3002 Servlet 3.0 \u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 setHttpOnly() \u65b9\u6cd5\u5728 set-cookie \u5934\u4e0a\u9644\u52a0 HttpOnly \u5c5e\u6027\uff0c\u5728\u6d4f\u89c8\u5668\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a Cookie \u5c06\u4e0d\u4f1a\u88ab javascript \u8bfb\u53d6\u3002 URI \u91cd\u5199 \u6240\u8c13 URI \u91cd\u5199\uff0c\u5176\u5b9e\u5c31\u662f GET \u8bf7\u6c42\u53c2\u6570\u7684\u5e94\u7528\uff0c\u5f53 Web \u5e94\u7528\u7a0b\u5e8f\u54cd\u5e94\u6d4f\u89c8\u5668\u4e0a\u4e00\u6b21\u8bf7\u6c42\u65f6\uff0c\u5c06\u67d0\u4e9b\u76f8\u5173\u4fe1\u606f\u4ee5\u8d85\u94fe\u63a5\u7684\u65b9\u5f0f\u54cd\u5e94\u7ed9\u6d4f\u89c8\u5668\uff0c\u8fd9\u4e9b\u8d85\u94fe\u63a5\u4e2d\u5305\u62ec\u8bf7\u6c42\u53c2\u6570\u4fe1\u606f\u3002\u6bd4\u5982\u5206\u9875\u6309\u94ae\uff0c\u53ef\u4ee5\u5728\u54cd\u5e94\u65f6\uff0c\u4e3a\u6bcf\u4e2a\u6309\u94ae\u7684\u8d85\u94fe\u63a5\u9644\u52a0 start \u548c count \u53c2\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u77e5\u9053\u6bcf\u4e00\u9875\u67e5\u8be2\u6570\u636e\u7684\u8303\u56f4\u3002 \u56e0\u4e3a GET \u672c\u8eab\u53ef\u4ee5\u643a\u5e26\u7684\u53c2\u6570\u957f\u5ea6\u6709\u9650\uff0c\u56e0\u6b64\u53ea\u9002\u5408\u7528\u6765\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u6d4f\u89c8\u5668\u4fe1\u606f\u4fdd\u7559\uff0c\u6216\u8005\u8f85\u52a9\u4f1a\u8bdd\u7ba1\u7406\u3002 HttpSession \u4e0a\u9762\u63d0\u5230\u7684\u4e09\u79cd\u65b9\u5f0f\u4e0d\u540c\uff0c\u672c\u8d28\u4e0a\u90fd\u662f\u7531\u5ba2\u6237\u7aef\u6765\u8fdb\u884c\u4fe1\u606f\u5b58\u50a8\uff0c\u53ef\u50a8\u4fe1\u606f\u7684\u91cf\u6709\u9650\uff0c\u5b89\u5168\u6027\u4e5f\u4e0d\u9ad8\uff0c\u56e0\u6b64\u53ea\u80fd\u7528\u6765\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u800c HTTP Session \u5219\u662f\u7531 Web \u5e94\u7528 \u8d1f\u8d23\u5b58\u50a8\u4fe1\u606f\u7684\u4e00\u79cd\u65b9\u5f0f\u3002 HttpSession \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a JVM \u4e2d\u7684\u5bf9\u8c61\uff0c\u7c7b\u4f3c\u4e8e Map\uff0c\u4ee5\u952e\u503c\u5bf9\u7684\u65b9\u5f0f\u5b58\u50a8\u4fe1\u606f\uff1a HttpSession#setAttribute(String name, Object value) \uff1a\u8bbe\u7f6e\u5c5e\u6027\u3002 HttpSession#getAttribute(String name) \uff1a\u53d6\u51fa\u5c5e\u6027\u3002 HttpSession \u5e76\u975e\u7ebf\u7a0b\u5b89\u5168\uff0c\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u5fc5\u987b\u6ce8\u610f\u5c5e\u6027\u8bbe\u5b9a\u65f6\u5171\u4eab\u5b58\u50a8\u7684\u95ee\u9898\u3002 \u4f1a\u8bdd\u7ba1\u7406\uff1aHttpSession + Cookie \u5355\u7eaf\u9760 HttpSession \u662f\u65e0\u6cd5\u5b8c\u6210\u4f1a\u8bdd\u7ba1\u7406\u7684\uff0c\u4e00\u4e2a Web \u5e94\u7528\u6bcf\u5929\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u6d4f\u89c8\u5668\u7684\u8bf7\u6c42\uff0cHttpSession \u65e0\u6cd5\u9760\u81ea\u5df1\u8bc6\u522b\u81ea\u8eab\u6240\u5b58\u50a8\u7684\u4fe1\u606f\u5206\u522b\u5bf9\u5e94\u4e8e\u90a3\u4e2a\u6d4f\u89c8\u5668\uff0c\u53ea\u6709\u6d4f\u89c8\u5668\u643a\u5e26\u4e86\u53ef\u8bc6\u522b\u5176\u8eab\u4efd\u7684\u6807\u8bc6\u624d\u53ef\u4ee5\uff0c\u8fd9\u4e2a\u6807\u8bc6\u662f Session ID\u3002 HttpSession \u9ed8\u8ba4\u4f7f\u7528 Cookie \u6765\u8f85\u52a9\u7ba1\u7406 Session ID \u7684\u72b6\u6001\uff0cHttpSession \u521b\u5efa\u7684\u65f6\u5019\uff0c\u901a\u8fc7 set-cookie \u6765\u8bbe\u7f6e Session ID\uff0c\u901a\u5e38 name \u4e3a JSESSIONID \uff0c value \u4e3a\u4e00\u4e32\u6309\u4e00\u5b9a\u89c4\u5219\u751f\u6210\u7684\u968f\u673a\u5b57\u7b26\u4e32\uff1a set-cookie JESSIONID=1C58EFDA8C4..... \u6d4f\u89c8\u5668\u4e0b\u4e00\u6b21\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u4fbf\u4f1a\u628a Session ID \u901a\u8fc7 cookie \u5934\u53d1\u9001\u7ed9 Web \u5e94\u7528\uff0cWeb \u5e94\u7528\u6839\u636e Session ID\uff0c\u4fbf\u53ef\u4ee5\u53d6\u51fa\u8be5\u6d4f\u89c8\u5668\u4e4b\u524d\u5b58\u50a8\u7684\u5c5e\u6027\uff0c\u4ece\u800c\u5b9e\u73b0\u4f1a\u8bdd\u72b6\u6001\u7684\u7ba1\u7406\u3002 \u56fe HttpSession \u6709\u6548\u671f\u8bbe\u7f6e HttpSession#setMaxInactiveInterval(long second) ServletContext#setSessionTimeout(int minute) \u901a\u8fc7 web.xml \u914d\u7f6e <web-app> <session-config> <!-- \u5355\u4f4d\u4e3a minute --> <session-timeout>30</session-timeout> </session-config> </web-app> Session ID \u7684\u6709\u6548\u671f Session ID \u9ed8\u8ba4\u662f\u7531 Cookie \u6765\u8d1f\u8d23\u5b58\u50a8\u7684\uff0c\u901a\u8fc7\u4e0a\u9762 Cookie \u7ae0\u8282 \u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u77e5\u9053\u5982\u679c\u624b\u52a8\u5728 set-cookie \u7684\u65f6\u5019\u8bbe\u5b9a\u6709\u6548\u671f\uff0c\u90a3\u4e48\u8be5 cookie \u7684\u6709\u6548\u671f\u9ed8\u8ba4\u5230\u6d4f\u89c8\u5668\u5173\u95ed\uff0c\u8fd9\u6837\u4e0b\u4e00\u6b21\u7528\u6237\u518d\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee\u4e4b\u524d\u7684\u7f51\u7ad9\u65f6\u5019\uff0c\u4fbf\u65e0\u6cd5\u4f7f\u7528\u4e4b\u524d\u5b58\u50a8\u7684 HttpSesssion \u4fe1\u606f\u3002 \u4f46\u662f Session ID \u7684 set-cookie \u662f\u7531 HttpSession \u521b\u5efa\u65f6\u5019\u81ea\u52a8\u5b8c\u6210\u7684\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u624b\u52a8\u6dfb\u52a0\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u7b80\u5355\u901a\u8fc7 Cookie#setMaxAge(int second) \u65b9\u6cd5\u6765\u5b8c\u6210\u6709\u6548\u671f\u7684\u914d\u7f6e\u3002 \u4e0d\u8fc7 Servlet \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86 SessionCookieConfig \u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5176\u6765\u8bbe\u7f6e Session ID \u5bf9\u5e94 Cookie \u7684\u5c5e\u6027\uff1a // SessionCookieConfig \u5fc5\u987b\u5728 ServletContext \u521d\u59cb\u5316\u4e4b\u524d\u5b8c\u6210\u8bbe\u7f6e\u3002 // \u4e00\u4e2a\u65b9\u6cd5\u662f ServletContextListener#contextInitialized() \u4e2d\u4f7f\u7528\u8fd9\u4e9b API SessionCookieConfig config = servletContext.getSessionCookieConfig(); config.setName(\"mysessionId\");//\u8bbe\u7f6e Session ID Cookie name\uff0c\u9ed8\u8ba4\u662f JSESSIONID config.setMaxAge(7*24*60*60);// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4 config.setSecure(true);// \u53ea\u901a\u8fc7 Https \u4f20\u9001\u8be5 Cookie config.setHttpOnly(true);// \u4e0d\u5141\u8bb8 javascript \u8bfb\u53d6\u8be5 cookie ServletContextListener \u53c2\u8003 \u6211\u4eec\u4e5f\u53ef\u4ee5\u5728 Web.xml \u4e2d\u914d\u7f6e\uff1a <cookie-config> <name>mysessionId</name> <max-age>604800</max-age> <secure>true</secure> <http-only>true</http-only> </cookie-config> \u5355\u7eaf\u4f7f\u7528 HttpSession + Cookie \u540c\u6837\u8fd8\u662f\u4e0d\u591f\u5b89\u5168\u7684\uff0c\u5efa\u8bae\u4e00\u822c\u4e0d\u91c7\u7528 JSESSIONID \u4f5c\u4e3a Session ID \u540d\u79f0\uff0c\u5e76\u4e14\u4f7f\u7528 Https \u8fdb\u884c\u52a0\u5bc6\u4f20\u8f93\uff0c\u7528\u6237\u767b\u5f55\u6210\u529f\u540e\u8981\u53d8\u66f4 Session ID\uff0c\u5e76\u4e14\u5fc5\u8981\u65f6\u5019\u4e0d\u8981\u53ea\u901a\u8fc7 HttpSession \u4e2d\u7684\u4fe1\u606f\u6765\u5224\u65ad\u7528\u6237\u8eab\u4efd\u3002\u5982\u679c\u662f\u91cd\u8981\u7684\u64cd\u4f5c\u6b65\u9aa4\uff0c\u6700\u597d\u8fd8\u9700\u8981\u989d\u5916\u7684\u8eab\u4efd\u786e\u8ba4\uff0c\u6bd4\u5982\u652f\u4ed8\u6b65\u9aa4\u524d\u9700\u8981\u518d\u6b21\u8f93\u5165\u652f\u4ed8\u5bc6\u7801\u3002 \u4f1a\u8bdd\u7ba1\u7406\uff1aHttpSession + URI \u91cd\u5199 HttpSession \u9ed8\u8ba4\u4f7f\u7528 Cookie \u6765\u5b58\u50a8 Session ID\uff0c\u4f46\u662f\u5982\u679c\u7528\u6237\u5173\u95ed\u4e86\u6d4f\u89c8\u5668\u7684 Cookie \u7684\u529f\u80fd\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5982\u679c\u8fd8\u60f3\u4f7f\u7528 HttpSession \u6765\u8fdb\u884c\u4f1a\u8bdd\u7ba1\u7406\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 URI \u91cd\u5199\u3002 URI \u91cd\u5199\u5c31\u662f\u5728\u54cd\u5e94\u7684\u6d4f\u89c8\u5668\u7684\u9875\u9762\u7684\u65f6\u5019\uff0c\u5bf9\u9875\u9762\u4e2d\u7684\u8d85\u94fe\u63a5\u7684 URI \u9644\u52a0 Session ID\uff0c\u4f8b\u5982\uff1a http://localhost/hello?name=ruby;jessionid=23DF2AC24 \u53ef\u4ee5\u4f7f\u7528 HttpServletResponse#encodeURL() \u65b9\u6cd5\u6765\u534f\u52a9 URI \u91cd\u5199\uff0c\u4f8b\u5982\uff1a PrintWriter out=response.getWriter(); out.printf(\"<a href='%s'>\u70b9\u51fb\u5c31\u9001</a>%n\",response.encodeURL(\"hello?name=ruby\")); \u5982\u679c Web \u5e94\u7528\u80fd\u4ece\u6d4f\u89c8\u5668\u7684\u8bf7\u6c42\u4e2d\u53d6\u51fa Session ID \u5bf9\u5e94\u7684 Cookie\uff0c\u5219 URI \u4e0d\u53d8\uff0c\u5426\u5219\u5728\u540e\u9762\u9644\u52a0 ;jsessionid=xxxx \u3002 URI \u91cd\u5199\u4f1a\u628a session ID \u66b4\u9732\u5728 URI \u4e2d\uff0c\u56e0\u6b64\u66f4\u52a0\u4e0d\u5b89\u5168\uff0c\u8fd9\u548c\u7528\u6237\u53ef\u80fd\u662f\u4e3a\u4e86\u5b89\u5168\u800c\u5173\u95ed cookie \u7684\u521d\u8877\u662f\u76f8\u53cd\u7684\u3002","title":"\u4f1a\u8bdd\u7ba1\u7406"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#_1","text":"\u4f1a\u8bdd\u7ba1\u7406\u7684\u51e0\u4e2a\u57fa\u672c\u65b9\u5f0f\uff1a\u9690\u85cf\u57df\uff08Hidden Field\uff09\u3001Cookie \u4e0e URI \u91cd\u5199\u3002","title":"\u4f1a\u8bdd\u7ba1\u7406"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#_2","text":"\u628a\u524d\u9762\u9875\u9762\u7684\u7ed3\u679c\u901a\u8fc7\u9690\u85cf\u57df\u7684\u65b9\u5f0f\u5199\u5165\u65b0\u7684\u9875\u9762\uff0c\u7136\u540e\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u4e0b\u4e00\u6b21\u63d0\u4ea4\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u628a\u9690\u85cf\u57df\u4e2d\u7684\u5185\u5bb9\u4e00\u5e76\u63d0\u4ea4\uff0c\u4ece\u800c\u5b9e\u73b0\u72b6\u6001\u7684\u7b80\u5355\u7ba1\u7406\u3002\u6bd4\u5982\u4e00\u4e2a\u8c03\u67e5\u95ee\u5377\uff0c\u5728\u7528\u6237\u63d0\u4ea4\u7b2c\u4e00\u9875\u7b54\u6848\u51c6\u5907\u8df3\u8f6c\u5230\u7b2c\u4e8c\u9875\u7684\u65f6\u5019\uff0c\u540e\u7aef\u53ef\u4ee5\u628a\u7b2c\u4e00\u9875\u7684\u7b54\u6848\u5199\u5165\u7b2c\u4e8c\u9875\u7684\u9690\u85cf\u57df\uff0c\u5f53\u7528\u6237\u9700\u8981\u4ece\u7b2c\u4e8c\u9875\u8fd4\u56de\u7b2c\u4e00\u9875\u7684\u65f6\u5019\uff0c\u540e\u7aef\u53ef\u4ee5\u4ece\u9690\u85cf\u57df\u4e2d\u53d6\u51fa\u7b2c\u4e00\u9875\u7684\u4f5c\u7b54\u60c5\u51b5\uff0c\u4ece\u800c\u4fdd\u7559\u4e86\u7528\u6237\u7b2c\u4e00\u9875\u7684\u4f5c\u7b54\u9875\u9762\u3002\u8fd9\u662f\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u5e76\u4e0d\u7b97 Servlet/JSP \u7684\u7ba1\u7406\u673a\u5236\u3002","title":"\u9690\u85cf\u57df"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#cookie","text":"","title":" Cookie"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#cookie_1","text":"Cookie \u662f\u7531 \u6d4f\u89c8\u5668 \u8d1f\u8d23\u5b58\u50a8\u4fe1\u606f\u7684\u4e00\u79cd\u65b9\u5f0f\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u8bf7\u6c42\u5934 set-cookie \u6765\u544a\u8bc9\u6d4f\u89c8\u5668\u9700\u8981\u5b58\u50a8\u7684\u4fe1\u606f\u7684\u5185\u5bb9\u548c\u671f\u9650\u3002\u4f8b\u5982\uff1a set-cookie user=ruby;Expires=SUN,12-Apr-2009 04:38:55 GMT Web \u7aef\u8bbe\u7f6e\u8bf7\u6c42\u5934 set-cookie \u7684\u65b9\u5f0f\u5982\u4e0b\uff1a Cookie cookie = new Cookie(\"user\",\"ruby\"); cookie.setMaxAge(7*24*60*60)//\u6709\u6548\u671f\u4e3a7\u5929\uff0c\u5982\u4e0d\u8bbe\u5b9a\u6709\u6548\u671f\u9650\uff0c\u5219\u9ed8\u8ba4\u5173\u95ed\u6d4f\u89c8\u5668\u540e\u5931\u6548 response.addCookie(cookie);//HttpServletResponse \u53ef\u4ee5 add \u591a\u4e2a cookie \u5bf9\u8c61 Web \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7 HttpServletRequest#getCookies() \u6765\u83b7\u53d6\u7f51\u9875\u6240\u5c5e\u57df\uff08domain\uff09\u7684\u6240\u6709 Cookie\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a Cookie[]\u3002 Cookie[] cookies=request.getCookies(); if(cookies!=null){ for(Cookie cookie : cookies){ String name=cookie.getName(); String value=cookie.getValue(); } } \u6d4f\u89c8\u5668\u88ab\u9884\u671f\u80fd\u4e3a\u6bcf\u4e2a\u7f51\u7ad9\u5b58\u50a8 20 \u4e2a Cookie\uff0c\u603b\u5171\u53ef\u5b58\u50a8 300 \u4e2a Cookie\uff0c\u6bcf\u4e2a Cookie \u5927\u5c0f\u4e0d\u8d85\u8fc7 4 KB\uff08\u6bcf\u4e2a\u5382\u5546\u7684\u6d4f\u89c8\u5668\u5b9e\u9645\u60c5\u51b5\u4f1a\u6709\u6240\u4e0d\u540c\uff09\uff0c\u56e0\u6b64 Cookie \u53ef\u5b58\u50a8\u7684\u4fe1\u606f\u662f\u6709\u9650\u7684\u3002","title":"Cookie \u7684\u57fa\u672c\u539f\u7406"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#cookie_2","text":"Cookie \u628a\u4fe1\u606f\u5b58\u50a8\u5728\u5ba2\u6237\u7aef\uff0c\u88ab\u7a83\u53d6\u7684\u98ce\u9669\u8f83\u9ad8\uff0c\u867d\u7136\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u9002\u5f53\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5e76\u4e14\u7ed3\u5408\u6458\u8981\u7b97\u6cd5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u4f46\u662f\u8fd8\u662f\u65e0\u6cd5\u4fdd\u8bc1\uff0c\u56e0\u6b64\u4e0d\u592a\u9002\u5408\u5b58\u50a8\u5b89\u5168\u6027\u8981\u6c42\u8f83\u9ad8\u7684\u4fe1\u606f\uff0c\u6bd4\u5982\u5bc6\u7801\u3002 Cookie \u53ef\u4ee5\u901a\u8fc7 setSecure() \u65b9\u6cd5\u8bbe\u5b9a\u4e3a true \uff0c\u8fd9\u6837\u5c31\u53ea\u4f1a\u5728 HTTPS \u4e0b\u4f20\u9001 Cookie\u3002 Servlet 3.0 \u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 setHttpOnly() \u65b9\u6cd5\u5728 set-cookie \u5934\u4e0a\u9644\u52a0 HttpOnly \u5c5e\u6027\uff0c\u5728\u6d4f\u89c8\u5668\u652f\u6301\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a Cookie \u5c06\u4e0d\u4f1a\u88ab javascript \u8bfb\u53d6\u3002","title":"Cookie \u7684\u5b89\u5168\u6027"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#uri","text":"\u6240\u8c13 URI \u91cd\u5199\uff0c\u5176\u5b9e\u5c31\u662f GET \u8bf7\u6c42\u53c2\u6570\u7684\u5e94\u7528\uff0c\u5f53 Web \u5e94\u7528\u7a0b\u5e8f\u54cd\u5e94\u6d4f\u89c8\u5668\u4e0a\u4e00\u6b21\u8bf7\u6c42\u65f6\uff0c\u5c06\u67d0\u4e9b\u76f8\u5173\u4fe1\u606f\u4ee5\u8d85\u94fe\u63a5\u7684\u65b9\u5f0f\u54cd\u5e94\u7ed9\u6d4f\u89c8\u5668\uff0c\u8fd9\u4e9b\u8d85\u94fe\u63a5\u4e2d\u5305\u62ec\u8bf7\u6c42\u53c2\u6570\u4fe1\u606f\u3002\u6bd4\u5982\u5206\u9875\u6309\u94ae\uff0c\u53ef\u4ee5\u5728\u54cd\u5e94\u65f6\uff0c\u4e3a\u6bcf\u4e2a\u6309\u94ae\u7684\u8d85\u94fe\u63a5\u9644\u52a0 start \u548c count \u53c2\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u77e5\u9053\u6bcf\u4e00\u9875\u67e5\u8be2\u6570\u636e\u7684\u8303\u56f4\u3002 \u56e0\u4e3a GET \u672c\u8eab\u53ef\u4ee5\u643a\u5e26\u7684\u53c2\u6570\u957f\u5ea6\u6709\u9650\uff0c\u56e0\u6b64\u53ea\u9002\u5408\u7528\u6765\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u6d4f\u89c8\u5668\u4fe1\u606f\u4fdd\u7559\uff0c\u6216\u8005\u8f85\u52a9\u4f1a\u8bdd\u7ba1\u7406\u3002","title":"URI \u91cd\u5199"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#httpsession","text":"\u4e0a\u9762\u63d0\u5230\u7684\u4e09\u79cd\u65b9\u5f0f\u4e0d\u540c\uff0c\u672c\u8d28\u4e0a\u90fd\u662f\u7531\u5ba2\u6237\u7aef\u6765\u8fdb\u884c\u4fe1\u606f\u5b58\u50a8\uff0c\u53ef\u50a8\u4fe1\u606f\u7684\u91cf\u6709\u9650\uff0c\u5b89\u5168\u6027\u4e5f\u4e0d\u9ad8\uff0c\u56e0\u6b64\u53ea\u80fd\u7528\u6765\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u800c HTTP Session \u5219\u662f\u7531 Web \u5e94\u7528 \u8d1f\u8d23\u5b58\u50a8\u4fe1\u606f\u7684\u4e00\u79cd\u65b9\u5f0f\u3002 HttpSession \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a JVM \u4e2d\u7684\u5bf9\u8c61\uff0c\u7c7b\u4f3c\u4e8e Map\uff0c\u4ee5\u952e\u503c\u5bf9\u7684\u65b9\u5f0f\u5b58\u50a8\u4fe1\u606f\uff1a HttpSession#setAttribute(String name, Object value) \uff1a\u8bbe\u7f6e\u5c5e\u6027\u3002 HttpSession#getAttribute(String name) \uff1a\u53d6\u51fa\u5c5e\u6027\u3002 HttpSession \u5e76\u975e\u7ebf\u7a0b\u5b89\u5168\uff0c\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u5fc5\u987b\u6ce8\u610f\u5c5e\u6027\u8bbe\u5b9a\u65f6\u5171\u4eab\u5b58\u50a8\u7684\u95ee\u9898\u3002","title":"HttpSession"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#httpsession-cookie","text":"\u5355\u7eaf\u9760 HttpSession \u662f\u65e0\u6cd5\u5b8c\u6210\u4f1a\u8bdd\u7ba1\u7406\u7684\uff0c\u4e00\u4e2a Web \u5e94\u7528\u6bcf\u5929\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u6d4f\u89c8\u5668\u7684\u8bf7\u6c42\uff0cHttpSession \u65e0\u6cd5\u9760\u81ea\u5df1\u8bc6\u522b\u81ea\u8eab\u6240\u5b58\u50a8\u7684\u4fe1\u606f\u5206\u522b\u5bf9\u5e94\u4e8e\u90a3\u4e2a\u6d4f\u89c8\u5668\uff0c\u53ea\u6709\u6d4f\u89c8\u5668\u643a\u5e26\u4e86\u53ef\u8bc6\u522b\u5176\u8eab\u4efd\u7684\u6807\u8bc6\u624d\u53ef\u4ee5\uff0c\u8fd9\u4e2a\u6807\u8bc6\u662f Session ID\u3002 HttpSession \u9ed8\u8ba4\u4f7f\u7528 Cookie \u6765\u8f85\u52a9\u7ba1\u7406 Session ID \u7684\u72b6\u6001\uff0cHttpSession \u521b\u5efa\u7684\u65f6\u5019\uff0c\u901a\u8fc7 set-cookie \u6765\u8bbe\u7f6e Session ID\uff0c\u901a\u5e38 name \u4e3a JSESSIONID \uff0c value \u4e3a\u4e00\u4e32\u6309\u4e00\u5b9a\u89c4\u5219\u751f\u6210\u7684\u968f\u673a\u5b57\u7b26\u4e32\uff1a set-cookie JESSIONID=1C58EFDA8C4..... \u6d4f\u89c8\u5668\u4e0b\u4e00\u6b21\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u4fbf\u4f1a\u628a Session ID \u901a\u8fc7 cookie \u5934\u53d1\u9001\u7ed9 Web \u5e94\u7528\uff0cWeb \u5e94\u7528\u6839\u636e Session ID\uff0c\u4fbf\u53ef\u4ee5\u53d6\u51fa\u8be5\u6d4f\u89c8\u5668\u4e4b\u524d\u5b58\u50a8\u7684\u5c5e\u6027\uff0c\u4ece\u800c\u5b9e\u73b0\u4f1a\u8bdd\u72b6\u6001\u7684\u7ba1\u7406\u3002 \u56fe","title":"\u4f1a\u8bdd\u7ba1\u7406\uff1aHttpSession + Cookie"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#httpsession_1","text":"HttpSession#setMaxInactiveInterval(long second) ServletContext#setSessionTimeout(int minute) \u901a\u8fc7 web.xml \u914d\u7f6e <web-app> <session-config> <!-- \u5355\u4f4d\u4e3a minute --> <session-timeout>30</session-timeout> </session-config> </web-app>","title":"HttpSession \u6709\u6548\u671f\u8bbe\u7f6e"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#session-id","text":"Session ID \u9ed8\u8ba4\u662f\u7531 Cookie \u6765\u8d1f\u8d23\u5b58\u50a8\u7684\uff0c\u901a\u8fc7\u4e0a\u9762 Cookie \u7ae0\u8282 \u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u77e5\u9053\u5982\u679c\u624b\u52a8\u5728 set-cookie \u7684\u65f6\u5019\u8bbe\u5b9a\u6709\u6548\u671f\uff0c\u90a3\u4e48\u8be5 cookie \u7684\u6709\u6548\u671f\u9ed8\u8ba4\u5230\u6d4f\u89c8\u5668\u5173\u95ed\uff0c\u8fd9\u6837\u4e0b\u4e00\u6b21\u7528\u6237\u518d\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee\u4e4b\u524d\u7684\u7f51\u7ad9\u65f6\u5019\uff0c\u4fbf\u65e0\u6cd5\u4f7f\u7528\u4e4b\u524d\u5b58\u50a8\u7684 HttpSesssion \u4fe1\u606f\u3002 \u4f46\u662f Session ID \u7684 set-cookie \u662f\u7531 HttpSession \u521b\u5efa\u65f6\u5019\u81ea\u52a8\u5b8c\u6210\u7684\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u624b\u52a8\u6dfb\u52a0\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u7b80\u5355\u901a\u8fc7 Cookie#setMaxAge(int second) \u65b9\u6cd5\u6765\u5b8c\u6210\u6709\u6548\u671f\u7684\u914d\u7f6e\u3002 \u4e0d\u8fc7 Servlet \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86 SessionCookieConfig \u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5176\u6765\u8bbe\u7f6e Session ID \u5bf9\u5e94 Cookie \u7684\u5c5e\u6027\uff1a // SessionCookieConfig \u5fc5\u987b\u5728 ServletContext \u521d\u59cb\u5316\u4e4b\u524d\u5b8c\u6210\u8bbe\u7f6e\u3002 // \u4e00\u4e2a\u65b9\u6cd5\u662f ServletContextListener#contextInitialized() \u4e2d\u4f7f\u7528\u8fd9\u4e9b API SessionCookieConfig config = servletContext.getSessionCookieConfig(); config.setName(\"mysessionId\");//\u8bbe\u7f6e Session ID Cookie name\uff0c\u9ed8\u8ba4\u662f JSESSIONID config.setMaxAge(7*24*60*60);// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4 config.setSecure(true);// \u53ea\u901a\u8fc7 Https \u4f20\u9001\u8be5 Cookie config.setHttpOnly(true);// \u4e0d\u5141\u8bb8 javascript \u8bfb\u53d6\u8be5 cookie ServletContextListener \u53c2\u8003 \u6211\u4eec\u4e5f\u53ef\u4ee5\u5728 Web.xml \u4e2d\u914d\u7f6e\uff1a <cookie-config> <name>mysessionId</name> <max-age>604800</max-age> <secure>true</secure> <http-only>true</http-only> </cookie-config> \u5355\u7eaf\u4f7f\u7528 HttpSession + Cookie \u540c\u6837\u8fd8\u662f\u4e0d\u591f\u5b89\u5168\u7684\uff0c\u5efa\u8bae\u4e00\u822c\u4e0d\u91c7\u7528 JSESSIONID \u4f5c\u4e3a Session ID \u540d\u79f0\uff0c\u5e76\u4e14\u4f7f\u7528 Https \u8fdb\u884c\u52a0\u5bc6\u4f20\u8f93\uff0c\u7528\u6237\u767b\u5f55\u6210\u529f\u540e\u8981\u53d8\u66f4 Session ID\uff0c\u5e76\u4e14\u5fc5\u8981\u65f6\u5019\u4e0d\u8981\u53ea\u901a\u8fc7 HttpSession \u4e2d\u7684\u4fe1\u606f\u6765\u5224\u65ad\u7528\u6237\u8eab\u4efd\u3002\u5982\u679c\u662f\u91cd\u8981\u7684\u64cd\u4f5c\u6b65\u9aa4\uff0c\u6700\u597d\u8fd8\u9700\u8981\u989d\u5916\u7684\u8eab\u4efd\u786e\u8ba4\uff0c\u6bd4\u5982\u652f\u4ed8\u6b65\u9aa4\u524d\u9700\u8981\u518d\u6b21\u8f93\u5165\u652f\u4ed8\u5bc6\u7801\u3002","title":"Session ID \u7684\u6709\u6548\u671f"},{"location":"javaee/JspAndServlet/servlet_api/session_management/#httpsession-uri","text":"HttpSession \u9ed8\u8ba4\u4f7f\u7528 Cookie \u6765\u5b58\u50a8 Session ID\uff0c\u4f46\u662f\u5982\u679c\u7528\u6237\u5173\u95ed\u4e86\u6d4f\u89c8\u5668\u7684 Cookie \u7684\u529f\u80fd\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5982\u679c\u8fd8\u60f3\u4f7f\u7528 HttpSession \u6765\u8fdb\u884c\u4f1a\u8bdd\u7ba1\u7406\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 URI \u91cd\u5199\u3002 URI \u91cd\u5199\u5c31\u662f\u5728\u54cd\u5e94\u7684\u6d4f\u89c8\u5668\u7684\u9875\u9762\u7684\u65f6\u5019\uff0c\u5bf9\u9875\u9762\u4e2d\u7684\u8d85\u94fe\u63a5\u7684 URI \u9644\u52a0 Session ID\uff0c\u4f8b\u5982\uff1a http://localhost/hello?name=ruby;jessionid=23DF2AC24 \u53ef\u4ee5\u4f7f\u7528 HttpServletResponse#encodeURL() \u65b9\u6cd5\u6765\u534f\u52a9 URI \u91cd\u5199\uff0c\u4f8b\u5982\uff1a PrintWriter out=response.getWriter(); out.printf(\"<a href='%s'>\u70b9\u51fb\u5c31\u9001</a>%n\",response.encodeURL(\"hello?name=ruby\")); \u5982\u679c Web \u5e94\u7528\u80fd\u4ece\u6d4f\u89c8\u5668\u7684\u8bf7\u6c42\u4e2d\u53d6\u51fa Session ID \u5bf9\u5e94\u7684 Cookie\uff0c\u5219 URI \u4e0d\u53d8\uff0c\u5426\u5219\u5728\u540e\u9762\u9644\u52a0 ;jsessionid=xxxx \u3002 URI \u91cd\u5199\u4f1a\u628a session ID \u66b4\u9732\u5728 URI \u4e2d\uff0c\u56e0\u6b64\u66f4\u52a0\u4e0d\u5b89\u5168\uff0c\u8fd9\u548c\u7528\u6237\u53ef\u80fd\u662f\u4e3a\u4e86\u5b89\u5168\u800c\u5173\u95ed cookie \u7684\u521d\u8877\u662f\u76f8\u53cd\u7684\u3002","title":"\u4f1a\u8bdd\u7ba1\u7406\uff1aHttpSession + URI \u91cd\u5199"},{"location":"javaee/spring/spring/","text":"","title":"Spring"},{"location":"javaee/web_container/tomcat/","text":"","title":"Tomcat"},{"location":"mysql/install/","text":"Mysql \u5b89\u88c5 centos 6/7 \u51c6\u5907\u6570\u636e\u5b58\u653e\u7684\u6587\u4ef6\u7cfb\u7edf \u521b\u5efa mysql \u7528\u6237 shell groupadd -r mysql useradd -g mysql -r -s /sbin/nologin -M -d /mydata/data mysql chown -R mysql:mysql /data/mysql \u4e0b\u8f7d\u5b89\u88c5\u5305\u5b89\u88c5 \u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u7136\u540e\u5230\u89e3\u538b\u5230\u5b89\u88c5\u8def\u5f84 /usr/local/mysql-xxxx\u3002 \u521b\u5efa\u8f6f\u94fe\u63a5\uff0c\u8fd9\u6837\u5728\u5347\u7ea7 mysql \u7248\u672c\u7684\u65f6\u5019\u53ea\u9700\u8981\u4fee\u6539\u8f6f\u8fde\u63a5\u7684\u6307\u5411\u5c31\u884c\u4e86\u3002 ln -sv /usr/local/mysql-xx /usr/local/mysql \u914d\u7f6e \u4fee\u6539\u6587\u4ef6\u76ee\u5f55\u6743\u9650\uff1a cd /usr/local/mysql chown -R mysql:mysql chown -R root . \u5728 /etc \u4e0b\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 vim /etc/my.cnf [mysqld] basedir=/usr/local/mysql datadir=/data/mysql/data port=3306 log-error=/var/log/mysql/error.log log-bin=/data/mysql/data/mysql-bin #cpu \u4e2a\u6570 * 2 #thread_concurrency = 2 #skip-slave-start #log-slave-updates=1 \u914d\u7f6e mysql \u7684 profile \u6587\u4ef6 vim /etc/profile.d/mysql.sh export MYSQL_HOME={{mysql_home}} export PATH=$MYSQL_HOME/bin:$PATH \u4e3amysql\u63d0\u4f9bsysv\u670d\u52a1\u811a\u672c cd /usr/local/mysql cp support-files/mysql.server /etc/rc.d/init.d/mysqld chmod +x /etc/rc.d/init.d/mysqld \u6dfb\u52a0\u81f3\u670d\u52a1\u5217\u8868\uff1a chkconfig --add mysqld #2345 \u7b49\u7ea7\u4e0b\u90fd\u5f00\u542f\u5b9e\u4f8b chkconfig mysqld on \u8f93\u51famysql\u7684man\u624b\u518c\u81f3man\u547d\u4ee4\u7684\u67e5\u627e\u8def\u5f84\uff1a vim /etc/man.config MANPATH /usr/local/mysql/man \u8f93\u51fa mysql \u7684\u5934\u6587\u4ef6\u81f3\u7cfb\u7edf\u8def\u5f84 /usr/include ln -sv /usr/local/mysql/include /usr/include/mysql \u8f93\u51famysql\u7684\u5e93\u6587\u4ef6\u7ed9\u7cfb\u7edf\u5e93\u67e5\u627e\u8def\u5f84\uff1a echo '/usr/local/mysql/lib' > /etc/ld.so.conf.d/mysql.conf \u800c\u540e\u8ba9\u7cfb\u7edf\u91cd\u65b0\u8f7d\u5165\u7cfb\u7edf\u5e93\uff1a ldconfig \u521d\u59cb\u5316 mysqld --initialize --user=mysql tmppwd=`grep 'A temporary password is generated for root@localhost' {{mysql_home}}/logs/error.log | tail -1 | grep -o 'root@localhost: .*' | awk '{print $2}'` service mysqld start mysql -uroot -p${tmppwd} --connect-expired-password -e \"alter user root@localhost identified by ${yourpasswd};\"","title":"Mysql \u5b89\u88c5"},{"location":"mysql/install/#mysql","text":"","title":"Mysql \u5b89\u88c5"},{"location":"mysql/install/#centos-67","text":"","title":"centos 6/7"},{"location":"mysql/install/#_1","text":"","title":"\u51c6\u5907\u6570\u636e\u5b58\u653e\u7684\u6587\u4ef6\u7cfb\u7edf"},{"location":"mysql/install/#mysql_1","text":"shell groupadd -r mysql useradd -g mysql -r -s /sbin/nologin -M -d /mydata/data mysql chown -R mysql:mysql /data/mysql","title":"\u521b\u5efa mysql \u7528\u6237"},{"location":"mysql/install/#_2","text":"\u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u7136\u540e\u5230\u89e3\u538b\u5230\u5b89\u88c5\u8def\u5f84 /usr/local/mysql-xxxx\u3002 \u521b\u5efa\u8f6f\u94fe\u63a5\uff0c\u8fd9\u6837\u5728\u5347\u7ea7 mysql \u7248\u672c\u7684\u65f6\u5019\u53ea\u9700\u8981\u4fee\u6539\u8f6f\u8fde\u63a5\u7684\u6307\u5411\u5c31\u884c\u4e86\u3002 ln -sv /usr/local/mysql-xx /usr/local/mysql","title":"\u4e0b\u8f7d\u5b89\u88c5\u5305\u5b89\u88c5"},{"location":"mysql/install/#_3","text":"\u4fee\u6539\u6587\u4ef6\u76ee\u5f55\u6743\u9650\uff1a cd /usr/local/mysql chown -R mysql:mysql chown -R root . \u5728 /etc \u4e0b\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 vim /etc/my.cnf [mysqld] basedir=/usr/local/mysql datadir=/data/mysql/data port=3306 log-error=/var/log/mysql/error.log log-bin=/data/mysql/data/mysql-bin #cpu \u4e2a\u6570 * 2 #thread_concurrency = 2 #skip-slave-start #log-slave-updates=1 \u914d\u7f6e mysql \u7684 profile \u6587\u4ef6 vim /etc/profile.d/mysql.sh export MYSQL_HOME={{mysql_home}} export PATH=$MYSQL_HOME/bin:$PATH \u4e3amysql\u63d0\u4f9bsysv\u670d\u52a1\u811a\u672c cd /usr/local/mysql cp support-files/mysql.server /etc/rc.d/init.d/mysqld chmod +x /etc/rc.d/init.d/mysqld \u6dfb\u52a0\u81f3\u670d\u52a1\u5217\u8868\uff1a chkconfig --add mysqld #2345 \u7b49\u7ea7\u4e0b\u90fd\u5f00\u542f\u5b9e\u4f8b chkconfig mysqld on \u8f93\u51famysql\u7684man\u624b\u518c\u81f3man\u547d\u4ee4\u7684\u67e5\u627e\u8def\u5f84\uff1a vim /etc/man.config MANPATH /usr/local/mysql/man \u8f93\u51fa mysql \u7684\u5934\u6587\u4ef6\u81f3\u7cfb\u7edf\u8def\u5f84 /usr/include ln -sv /usr/local/mysql/include /usr/include/mysql \u8f93\u51famysql\u7684\u5e93\u6587\u4ef6\u7ed9\u7cfb\u7edf\u5e93\u67e5\u627e\u8def\u5f84\uff1a echo '/usr/local/mysql/lib' > /etc/ld.so.conf.d/mysql.conf \u800c\u540e\u8ba9\u7cfb\u7edf\u91cd\u65b0\u8f7d\u5165\u7cfb\u7edf\u5e93\uff1a ldconfig","title":"\u914d\u7f6e"},{"location":"mysql/install/#_4","text":"mysqld --initialize --user=mysql tmppwd=`grep 'A temporary password is generated for root@localhost' {{mysql_home}}/logs/error.log | tail -1 | grep -o 'root@localhost: .*' | awk '{print $2}'` service mysqld start mysql -uroot -p${tmppwd} --connect-expired-password -e \"alter user root@localhost identified by ${yourpasswd};\"","title":"\u521d\u59cb\u5316"}]}